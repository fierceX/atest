# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2023-12-17 04:24+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: description
#: documentation/content/en/books/handbook/geom/_index.adoc:1
#, fuzzy, no-wrap
msgid ""
"In FreeBSD, the GEOM framework permits access and control to classes, such "
"as Master Boot Records and BSD labels, through the use of providers, or the "
"disk devices in /dev."
msgstr ""
"在 FreeBSD 中，GEOM 框架通过使用提供者（即在 /dev 中的磁盘设备）来允许访问和控制各种类，例如主引导记录和 BSD 标签。"

#. type: YAML Front Matter: part
#: documentation/content/en/books/handbook/geom/_index.adoc:1
#, fuzzy, no-wrap
msgid "Part III. System Administration"
msgstr "第三部分. 系统管理"

#. type: YAML Front Matter: title
#: documentation/content/en/books/handbook/geom/_index.adoc:1
#, fuzzy, no-wrap
msgid "Chapter 21. GEOM: Modular Disk Transformation Framework"
msgstr "第21章 GEOM: 模块化磁盘转换框架"

#. type: Title =
#: documentation/content/en/books/handbook/geom/_index.adoc:14
#, fuzzy, no-wrap
msgid "GEOM: Modular Disk Transformation Framework"
msgstr "GEOM：模块化磁盘转换框架"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:39
#, fuzzy
msgid ""
"include::shared/attributes/attributes-{{% lang %}}.adoc[] "
"include::shared/{{% lang %}}/teams.adoc[] include::shared/{{% lang "
"%}}/mailing-lists.adoc[] include::shared/{{% lang %}}/urls.adoc[]"
msgstr ""
"include::shared/attributes/attributes-{{% lang %}}.adoc[]\n"
"include::shared/{{% lang %}}/teams.adoc[]\n"
"include::shared/{{% lang %}}/mailing-lists.adoc[]\n"
"include::shared/{{% lang %}}/urls.adoc[]\n"
"\n"
"包含::shared/attributes/attributes-{{% lang %}}.adoc[] \n"
"包含::shared/{{% lang %}}/teams.adoc[]\n"
"包含::shared/{{% lang %}}/mailing-lists.adoc[]\n"
"包含::shared/{{% lang %}}/urls.adoc[]"

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:52
#, fuzzy, no-wrap
msgid "Synopsis"
msgstr "摘要"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:56
#, fuzzy
msgid ""
"In FreeBSD, the GEOM framework permits access and control to classes, such "
"as Master Boot Records and BSD labels, through the use of providers, or the "
"disk devices in [.filename]#/dev#.  By supporting various software RAID "
"configurations, GEOM transparently provides access to the operating system "
"and operating system utilities."
msgstr ""
"在FreeBSD中，GEOM框架通过使用提供者或磁盘设备在`/dev`路径下，允许对类别（如主引导记录和BSD标签）进行访问和控制。通过支持各种软件RAID配置，GEOM可以透明地提供对操作系统和操作系统实用工具的访问。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:60
#, fuzzy
msgid ""
"This chapter covers the use of disks under the GEOM framework in FreeBSD.  "
"This includes the major RAID control utilities which use the framework for "
"configuration.  This chapter is not a definitive guide to RAID "
"configurations and only GEOM-supported RAID classifications are discussed."
msgstr ""
"本章介绍了FreeBSD中在GEOM框架下使用磁盘的方法。这包括使用该框架进行配置的主要RAID控制工具。本章不是一个关于RAID配置的权威指南，仅讨论基于GEOM的RAID分类。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:62
#, fuzzy
msgid "After reading this chapter, you will know:"
msgstr "阅读本章后，您将了解以下内容："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:64
#, fuzzy
msgid "What type of RAID support is available through GEOM."
msgstr "GEOM支持哪种类型的RAID？"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:65
#, fuzzy
msgid ""
"How to use the base utilities to configure, maintain, and manipulate the "
"various RAID levels."
msgstr "如何使用基础实用工具来配置、维护和操作各种RAID级别。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:66
#, fuzzy
msgid ""
"How to mirror, stripe, encrypt, and remotely connect disk devices through "
"GEOM."
msgstr "如何通过GEOM镜像、条带化、加密和远程连接磁盘设备。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:67
#, fuzzy
msgid "How to troubleshoot disks attached to the GEOM framework."
msgstr "如何对连接到GEOM框架的磁盘进行故障排除。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:69
#, fuzzy
msgid "Before reading this chapter, you should:"
msgstr "在阅读本章之前，您应该："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:71
#, fuzzy
msgid ""
"Understand how FreeBSD treats disk devices (crossref:disks[disks,Storage])."
msgstr "了解自由软件系统（crossref:disks[disks, 储存设备]）中如何处理磁盘设备。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:72
#, fuzzy
msgid ""
"Know how to configure and install a new kernel "
"(crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel])."
msgstr "熟悉如何配置和安装新的内核（参考：kernelconfig[配置FreeBSD内核]）。"

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:74
#, fuzzy, no-wrap
msgid "RAID0 - Striping"
msgstr "RAID0 - 块级分割"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:79
#, fuzzy
msgid ""
"Striping combines several disk drives into a single volume.  Striping can be"
" performed through the use of hardware RAID controllers.  The GEOM disk "
"subsystem provides software support for disk striping, also known as RAID0, "
"without the need for a RAID disk controller."
msgstr ""
"条带化将多个磁盘驱动器合并成一个卷。条带化可以通过使用硬件RAID控制器来实现。GEOM磁盘子系统提供了软件支持来进行磁盘条带化，也被称为RAID0，而无需RAID磁盘控制器的支持。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:83
#, fuzzy
msgid ""
"In RAID0, data is split into blocks that are written across all the drives "
"in the array.  As seen in the following illustration, instead of having to "
"wait on the system to write 256k to one disk, RAID0 can simultaneously write"
" 64k to each of the four disks in the array, offering superior I/O "
"performance.  This performance can be enhanced further by using multiple "
"disk controllers."
msgstr ""
"在RAID0中，数据被分割成块，并在阵列中的所有驱动器上进行写入。如下图所示，RAID0可以同时将64k写入阵列中的四个驱动器，而不是等待系统将256k写入一个磁盘，从而提供更优越的I/O性能。使用多个磁盘控制器可以进一步提升性能。\n"
"\n"
"（注：RAID0是一种磁盘阵列技术，将数据分割成块并分别写入多个硬盘来提高读写速度。I/O是输入/输出的缩写，指的是计算机和外部设备之间的数据传输。驱动器指的是硬盘驱动器或磁盘驱动器。）"

#. type: Positional ($1) AttributeList argument for macro 'image'
#: documentation/content/en/books/handbook/geom/_index.adoc:84
#, fuzzy, no-wrap
msgid "Disk Striping Illustration"
msgstr "磁盘条带化图解"

#. type: Target for macro image
#: documentation/content/en/books/handbook/geom/_index.adoc:84
#, fuzzy, no-wrap
msgid "striping.png"
msgstr "striping.png 是一个图片文件。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:87
#, fuzzy
msgid ""
"Each disk in a RAID0 stripe must be of the same size, since I/O requests are"
" interleaved to read or write to multiple disks in parallel."
msgstr "在RAID0条带中，每个磁盘必须具有相同的大小，因为I/O请求是交错的，可以并行读取或写入多个磁盘。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:93
#, fuzzy
msgid ""
"RAID0 does _not_ provide any redundancy.  This means that if one disk in the"
" array fails, all of the data on the disks is lost.  If the data is "
"important, implement a backup strategy that regularly saves backups to a "
"remote system or device."
msgstr ""
"RAID0不提供任何冗余性。这意味着如果阵列中的一块磁盘损坏，所有磁盘上的数据都会丢失。如果数据很重要，应该实施定期将备份保存到远程系统或设备的备份策略。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:97
#, fuzzy
msgid ""
"The process for creating a software, GEOM-based RAID0 on a FreeBSD system "
"using commodity disks is as follows.  Once the stripe is created, refer to "
"man:gstripe[8] for more information on how to control an existing stripe."
msgstr ""
"使用普通硬盘，在FreeBSD系统上创建一个基于GEOM的RAID0软件的过程如下所示。一旦创建了条带化的存储空间，可以参考man:gstripe[8]了解如何控制已存在的条带化存储。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/geom/_index.adoc:101
#, fuzzy, no-wrap
msgid "*Procedure: Creating a Stripe of Unformatted ATA Disks*\n"
msgstr ""
"*过程：创建一个未格式化的ATA磁盘条带*\n"
"\n"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/geom/_index.adoc:103
#, fuzzy
msgid "Load the [.filename]#geom_stripe.ko# module:"
msgstr "加载 [.filename]#geom_stripe.ko# 模块："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:107
#, no-wrap
msgid "# kldload geom_stripe\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:110
#, fuzzy
msgid ""
"Ensure that a suitable mount point exists. If this volume will become a root"
" partition, then temporarily use another mount point such as "
"[.filename]#/mnt#."
msgstr "请确保存在适当的挂载点。如果该卷将成为根分区，则暂时使用另一个挂载点，例如 [.filename]#/mnt#。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:111
#, fuzzy
msgid ""
"Determine the device names for the disks which will be striped, and create "
"the new stripe device. For example, to stripe two unused and unpartitioned "
"ATA disks with device names of [.filename]#/dev/ad2# and "
"[.filename]#/dev/ad3#:"
msgstr ""
"确定将要被条带化的磁盘的设备名称，并创建新的条带设备。例如，要将两个未使用且未分区的ATA磁盘（设备名称为`/dev/ad2`和`/dev/ad3`）条带化："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:118
#, no-wrap
msgid ""
"# gstripe label -v st0 /dev/ad2 /dev/ad3\n"
"Metadata value stored on /dev/ad2.\n"
"Metadata value stored on /dev/ad3.\n"
"Done.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:121
#, fuzzy
msgid ""
"Write a standard label, also known as a partition table, on the new volume "
"and install the default bootstrap code:"
msgstr "在新卷上编写标准标签，也称为分区表，并安装默认引导代码："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:125
#, no-wrap
msgid "# bsdlabel -wB /dev/stripe/st0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:128
#, fuzzy
msgid ""
"This process should create two other devices in [.filename]#/dev/stripe# in "
"addition to [.filename]#st0#. Those include [.filename]#st0a# and "
"[.filename]#st0c#. At this point, a UFS file system can be created on "
"[.filename]#st0a# using `newfs`:"
msgstr ""
"这个过程应该在[.filename]#/dev/stripe#中创建除了[.filename]#st0#之外的另外两个设备。它们包括[.filename]#st0a#和[.filename]#st0c#。此时，可以使用`newfs`在[.filename]#st0a#上创建一个UFS文件系统："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:132
#, no-wrap
msgid "# newfs -U /dev/stripe/st0a\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:136
#, fuzzy
msgid ""
"Many numbers will glide across the screen, and after a few seconds, the "
"process will be complete.  The volume has been created and is ready to be "
"mounted."
msgstr "许多数字将在屏幕上滑动，并在几秒钟后，该过程将完成。卷已创建并准备好被挂载。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:137
#, fuzzy
msgid "To manually mount the created disk stripe:"
msgstr "要手动挂载创建的磁盘条带，请按以下步骤操作："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:141
#, no-wrap
msgid "# mount /dev/stripe/st0a /mnt\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:144
#, fuzzy
msgid ""
"To mount this striped file system automatically during the boot process, "
"place the volume information in [.filename]#/etc/fstab#. In this example, a "
"permanent mount point, named [.filename]#stripe#, is created:"
msgstr ""
"在启动过程中自动挂载这个条带文件系统，请将卷信息放置在`/etc/fstab`中。在这个示例中，创建了一个永久挂载点，名为`stripe`:"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:150
#, no-wrap
msgid ""
"# mkdir /stripe\n"
"# echo \"/dev/stripe/st0a /stripe ufs rw 2 2\" \\\n"
">> /etc/fstab\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:153
#, fuzzy
msgid ""
"The [.filename]#geom_stripe.ko# module must also be automatically loaded "
"during system initialization, by adding a line to "
"[.filename]#/boot/loader.conf#:"
msgstr ""
"在系统初始化期间还必须自动加载[.filename]#geom_stripe.ko#模块，方法是在[.filename]#/boot/loader.conf#文件中添加一行。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:157
#, no-wrap
msgid "# echo 'geom_stripe_load=\"YES\"' >> /boot/loader.conf\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:161
#, fuzzy, no-wrap
msgid "RAID1 - Mirroring"
msgstr ""
"RAID1 - 镜像\n"
"\n"
"RAID1是一种常见的磁盘阵列配置，通过将数据同时写入两个或多个磁盘驱动器来提供数据冗余和容错功能。RAID1使用镜像技术，将数据实时复制到多个驱动器中的每个驱动器上。\n"
"\n"
"在RAID1中，每个驱动器都存储完全相同的数据，因此如果其中一个驱动器出现故障，系统可以从其他驱动器中获取所需的数据，而不会造成数据丢失或中断服务。\n"
"\n"
"RAID1提供了高度的数据冗余和可靠性，但磁盘使用效率较低，因为每个数据块都需要存储在至少两个驱动器上。\n"
"\n"
"RAID1适用于需要高可靠性和数据保护的应用，如关键业务系统和数据库服务器。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/geom/_index.adoc:168
#, fuzzy
msgid ""
"RAID1, or _mirroring_, is the technique of writing the same data to more "
"than one disk drive.  Mirrors are usually used to guard against data loss "
"due to drive failure.  Each drive in a mirror contains an identical copy of "
"the data.  When an individual drive fails, the mirror continues to work, "
"providing data from the drives that are still functioning.  The computer "
"keeps running, and the administrator has time to replace the failed drive "
"without user interruption."
msgstr ""
"RAID1，也称为镜像，是将相同的数据写入多个磁盘驱动器的技术。通常使用镜像来防止因驱动器故障而导致数据丢失。镜像中的每个驱动器都包含数据的相同副本。当一个单独的驱动器发生故障时，镜像仍然继续工作，从仍然正常工作的驱动器提供数据。计算机保持运行状态，管理员有时间更换故障驱动器而不会中断用户操作。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/geom/_index.adoc:173
#, fuzzy
msgid ""
"Two common situations are illustrated in these examples.  The first creates "
"a mirror out of two new drives and uses it as a replacement for an existing "
"single drive.  The second example creates a mirror on a single new drive, "
"copies the old drive's data to it, then inserts the old drive into the "
"mirror.  While this procedure is slightly more complicated, it only requires"
" one new drive."
msgstr ""
"这些示例展示了两种常见情况。第一种情况是通过两个新的驱动器创建一个镜像，并将其用作现有单个驱动器的替代品。第二个示例在一个新的驱动器上创建一个镜像，将旧驱动器的数据复制到其中，然后将旧驱动器插入到镜像中。虽然这个过程稍微复杂一些，但只需要一个新的驱动器。"

#. type: delimited block * 4
#: documentation/content/en/books/handbook/geom/_index.adoc:178
#, fuzzy
msgid ""
"Traditionally, the two drives in a mirror are identical in model and "
"capacity, but man:gmirror[8] does not require that.  Mirrors created with "
"dissimilar drives will have a capacity equal to that of the smallest drive "
"in the mirror.  Extra space on larger drives will be unused.  Drives "
"inserted into the mirror later must have at least as much capacity as the "
"smallest drive already in the mirror."
msgstr ""
"传统上，镜像中的两个驱动器的型号和容量是相同的，但是 man:gmirror[8] "
"并不要求如此。使用不同驱动器创建的镜像的容量将等于镜像中最小驱动器的容量。较大驱动器上的额外空间将不会被使用。后期插入到镜像中的驱动器必须具有至少与镜像中最小驱动器相同的容量。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:182
#, fuzzy
msgid ""
"The mirroring procedures shown here are non-destructive, but as with any "
"major disk operation, make a full backup first."
msgstr "这里展示的镜像过程是非破坏性的，但是像任何重要的磁盘操作一样，请先进行完整备份。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:188
#, fuzzy
msgid ""
"While man:dump[8] is used in these procedures to copy file systems, it does "
"not work on file systems with soft updates journaling.  See man:tunefs[8] "
"for information on detecting and disabling soft updates journaling."
msgstr ""
"在这些过程中使用 man:dump[8] 来复制文件系统，但它不适用于具有软更新日志的文件系统。有关检测和禁用软更新日志的信息，请参阅 "
"man:tunefs[8]。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:191
#, fuzzy, no-wrap
msgid "Metadata Issues"
msgstr "元数据问题"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:196
#, fuzzy
msgid ""
"Many disk systems store metadata at the end of each disk.  Old metadata "
"should be erased before reusing the disk for a mirror.  Most problems are "
"caused by two particular types of leftover metadata: GPT partition tables "
"and old metadata from a previous mirror."
msgstr ""
"许多磁盘系统在每个磁盘的末尾存储元数据。在将磁盘重新用于镜像之前，应该删除旧的元数据。大多数问题是由两种特定类型的残留元数据引起的：GPT分区表和之前镜像的旧元数据。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:199
#, fuzzy
msgid ""
"GPT metadata can be erased with man:gpart[8].  This example erases both "
"primary and backup GPT partition tables from disk [.filename]#ada8#:"
msgstr "可以使用man:gpart[8] 命令来擦除GPT元数据。这个例子将从磁盘.文件名`ada8`中擦除主要和备份的GPT分区表。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:203
#, no-wrap
msgid "# gpart destroy -F ada8\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:207
#, fuzzy
msgid ""
"A disk can be removed from an active mirror and the metadata erased in one "
"step using man:gmirror[8].  Here, the example disk [.filename]#ada8# is "
"removed from the active mirror [.filename]#gm4#:"
msgstr ""
"可以使用 man:gmirror[8] 一步完成从活动镜像中移除磁盘并擦除元数据。在这个例子中，被移除的磁盘 [.filename]#ada8# "
"来自活动镜像 [.filename]#gm4#。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:211
#, no-wrap
msgid "# gmirror remove gm4 ada8\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:214
#, fuzzy
msgid ""
"If the mirror is not running, but old mirror metadata is still on the disk, "
"use `gmirror clear` to remove it:"
msgstr "如果镜像没有运行，但是旧的镜像元数据仍然存在在磁盘上，使用 `gmirror clear` 命令来删除它："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:218
#, no-wrap
msgid "# gmirror clear ada8\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:223
#, fuzzy
msgid ""
"man:gmirror[8] stores one block of metadata at the end of the disk.  As GPT "
"partition schemes also store metadata at the end of the disk, mirroring "
"entire GPT disks with man:gmirror[8] is not recommended.  MBR partitioning "
"is used here because it only stores a partition table at the start of the "
"disk and does not conflict with the mirror metadata."
msgstr ""
"man:gmirror[8]在磁盘的末尾存储一个元数据块。由于GPT分区方案也在磁盘末尾存储元数据，因此不建议使用man:gmirror[8]镜像整个GPT磁盘。这里使用了MBR分区，因为它只在磁盘开头存储分区表，与镜像的元数据不冲突。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:225
#, fuzzy, no-wrap
msgid "Creating a Mirror with Two New Disks"
msgstr "使用两块新硬盘创建镜像"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:230
#, fuzzy
msgid ""
"In this example, FreeBSD has already been installed on a single disk, "
"[.filename]#ada0#.  Two new disks, [.filename]#ada1# and [.filename]#ada2#, "
"have been connected to the system.  A new mirror will be created on these "
"two disks and used to replace the old single disk."
msgstr ""
"在这个例子中，FreeBSD已经安装在一块单独的磁盘[.filename]#ada0#上。系统已经连接了两个新的磁盘[.filename]#ada1#和[.filename]#ada2#。将在这两个磁盘上创建一个新的镜像，并用它来替换旧的单磁盘。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:233
#, fuzzy
msgid ""
"The [.filename]#geom_mirror.ko# kernel module must either be built into the "
"kernel or loaded at boot- or run-time.  Manually load the kernel module now:"
msgstr "[.filename]#geom_mirror.ko#内核模块必须在内核中构建或在启动或运行时加载。现在手动加载内核模块："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:237
#: documentation/content/en/books/handbook/geom/_index.adoc:359
#, no-wrap
msgid "# gmirror load\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:240
#, fuzzy
msgid "Create the mirror with the two new drives:"
msgstr "使用两个新的驱动器创建镜像："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:244
#, no-wrap
msgid "# gmirror label -v gm0 /dev/ada1 /dev/ada2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:248
#, fuzzy
msgid ""
"[.filename]#gm0# is a user-chosen device name assigned to the new mirror.  "
"After the mirror has been started, this device name appears in "
"[.filename]#/dev/mirror/#."
msgstr ""
"[.filename]#gm0# 是用户选择的设备名称，用于指定新的镜像。在镜像启动后，这个设备名称会显示在 "
"[.filename]#/dev/mirror/# 目录中。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:252
#, fuzzy
msgid ""
"MBR and bsdlabel partition tables can now be created on the mirror with "
"man:gpart[8].  This example uses a traditional file system layout, with "
"partitions for [.filename]#/#, swap, [.filename]#/var#, [.filename]#/tmp#, "
"and [.filename]#/usr#.  A single [.filename]#/# and a swap partition will "
"also work."
msgstr ""
"现在可以使用man:gpart[8]在镜像上创建MBR和bsdlabel分区表。这个示例使用传统的文件系统布局，包括/#、swap、/var、/tmp和/usr的分区。一个单独的/#和一个swap分区也可以工作。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:254
#, fuzzy
msgid ""
"Partitions on the mirror do not have to be the same size as those on the "
"existing disk, but they must be large enough to hold all the data already "
"present on [.filename]#ada0#."
msgstr "镜像上的分区不必与现有磁盘上的分区大小相同，但必须足够大以容纳已经存在于 *ada0* 上的所有数据。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:264
#, no-wrap
msgid ""
"# gpart create -s MBR mirror/gm0\n"
"# gpart add -t freebsd -a 4k mirror/gm0\n"
"# gpart show mirror/gm0\n"
"=>       63  156301423  mirror/gm0  MBR  (74G)\n"
"         63         63                    - free -  (31k)\n"
"        126  156301299                 1  freebsd  (74G)\n"
"  156301425         61                    - free -  (30k)\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:283
#, no-wrap
msgid ""
"# gpart create -s BSD mirror/gm0s1\n"
"# gpart add -t freebsd-ufs  -a 4k -s 2g mirror/gm0s1\n"
"# gpart add -t freebsd-swap -a 4k -s 4g mirror/gm0s1\n"
"# gpart add -t freebsd-ufs  -a 4k -s 2g mirror/gm0s1\n"
"# gpart add -t freebsd-ufs  -a 4k -s 1g mirror/gm0s1\n"
"# gpart add -t freebsd-ufs  -a 4k mirror/gm0s1\n"
"# gpart show mirror/gm0s1\n"
"=>        0  156301299  mirror/gm0s1  BSD  (74G)\n"
"          0          2                      - free -  (1.0k)\n"
"          2    4194304                   1  freebsd-ufs  (2.0G)\n"
"    4194306    8388608                   2  freebsd-swap (4.0G)\n"
"   12582914    4194304                   4  freebsd-ufs  (2.0G)\n"
"   16777218    2097152                   5  freebsd-ufs  (1.0G)\n"
"   18874370  137426928                   6  freebsd-ufs  (65G)\n"
"  156301298          1                      - free -  (512B)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:286
#: documentation/content/en/books/handbook/geom/_index.adoc:504
#, fuzzy
msgid ""
"Make the mirror bootable by installing bootcode in the MBR and bsdlabel and "
"setting the active slice:"
msgstr "通过在MBR中安装引导代码和bsdlabel，并设置活动分区，使镜像可启动："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:292
#: documentation/content/en/books/handbook/geom/_index.adoc:510
#, no-wrap
msgid ""
"# gpart bootcode -b /boot/mbr mirror/gm0\n"
"# gpart set -a active -i 1 mirror/gm0\n"
"# gpart bootcode -b /boot/boot mirror/gm0s1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:295
#, fuzzy
msgid "Format the file systems on the new mirror, enabling soft-updates."
msgstr "在新的镜像上格式化文件系统，并启用软更新。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:302
#, no-wrap
msgid ""
"# newfs -U /dev/mirror/gm0s1a\n"
"# newfs -U /dev/mirror/gm0s1d\n"
"# newfs -U /dev/mirror/gm0s1e\n"
"# newfs -U /dev/mirror/gm0s1f\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:305
#, fuzzy
msgid ""
"File systems from the original [.filename]#ada0# disk can now be copied onto"
" the mirror with man:dump[8] and man:restore[8]."
msgstr "现在可以使用`man:dump[8]`和`man:restore[8]`将来自原始`.filename`磁盘的文件系统复制到镜像中。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:316
#, no-wrap
msgid ""
"# mount /dev/mirror/gm0s1a /mnt\n"
"# dump -C16 -b64 -0aL -f - / | (cd /mnt && restore -rf -)\n"
"# mount /dev/mirror/gm0s1d /mnt/var\n"
"# mount /dev/mirror/gm0s1e /mnt/tmp\n"
"# mount /dev/mirror/gm0s1f /mnt/usr\n"
"# dump -C16 -b64 -0aL -f - /var | (cd /mnt/var && restore -rf -)\n"
"# dump -C16 -b64 -0aL -f - /tmp | (cd /mnt/tmp && restore -rf -)\n"
"# dump -C16 -b64 -0aL -f - /usr | (cd /mnt/usr && restore -rf -)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:319
#, fuzzy
msgid ""
"Edit [.filename]#/mnt/etc/fstab# to point to the new mirror file systems:"
msgstr "编辑 [.filename]#/mnt/etc/fstab#，将其指向新的镜像文件系统："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:328
#, no-wrap
msgid ""
"# Device\t\tMountpoint\tFStype\tOptions\tDump\tPass#\n"
"/dev/mirror/gm0s1a\t/\t\tufs\trw\t1\t1\n"
"/dev/mirror/gm0s1b\tnone\t\tswap\tsw\t0\t0\n"
"/dev/mirror/gm0s1d\t/var\t\tufs\trw\t2\t2\n"
"/dev/mirror/gm0s1e\t/tmp\t\tufs\trw\t2\t2\n"
"/dev/mirror/gm0s1f\t/usr\t\tufs\trw\t2\t2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:331
#, fuzzy
msgid ""
"If the [.filename]#geom_mirror.ko# kernel module has not been built into the"
" kernel, [.filename]#/mnt/boot/loader.conf# is edited to load the module at "
"boot:"
msgstr ""
"如果内核模块[.filename]#geom_mirror.ko#未被编译进内核，则需要编辑[.filename]#/mnt/boot/loader.conf#文件，在启动时加载该模块："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:335
#: documentation/content/en/books/handbook/geom/_index.adoc:538
#: documentation/content/en/books/handbook/geom/_index.adoc:651
#, no-wrap
msgid "geom_mirror_load=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:340
#, fuzzy
msgid ""
"Reboot the system to test the new mirror and verify that all data has been "
"copied.  The BIOS will see the mirror as two individual drives rather than a"
" mirror.  Since the drives are identical, it does not matter which is "
"selected to boot."
msgstr ""
"重新启动系统以测试新的镜像并验证是否已全部复制数据。 BIOS 将会把镜像视为两个独立的驱动器而不是一个镜像。 "
"由于驱动器是相同的，选择哪一个来启动并不重要。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:343
#, fuzzy
msgid ""
"See <<gmirror-troubleshooting>> if there are problems booting.  Powering "
"down and disconnecting the original [.filename]#ada0# disk will allow it to "
"be kept as an offline backup."
msgstr "如果启动时出现问题，请参见《gmirror故障排除》。关闭电源并断开原始的 `ada0` 磁盘将允许将其保留为离线备份。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:345
#, fuzzy
msgid "In use, the mirror will behave just like the original single drive."
msgstr "在使用中，这个镜像会像原来的单个驱动器一样运作。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:347
#, fuzzy, no-wrap
msgid "Creating a Mirror with an Existing Drive"
msgstr ""
"使用现有驱动器创建一个镜像\n"
"\n"
"在计算机中，创建一个驱动器的镜像是非常有用的。当你创建一个驱动器的镜像时，你实际上是在另一台驱动器上创建了一个与原始驱动器完全一样的副本。这个过程可以让你在原始驱动器发生故障时快速恢复数据，并保护你的数据免受意外删除或损坏的风险。\n"
"\n"
"要创建一个驱动器的镜像，你需要一个可用的驱动器来存储镜像文件。以下是创建驱动器镜像的步骤：\n"
"\n"
"1. 确保你有一个空的、可用的驱动器来存储镜像文件。你可以使用外部硬盘驱动器、网络存储设备或云存储服务。\n"
"\n"
"2. 打开计算机上的镜像软件。常见的镜像软件包括Clonezilla、Acronis True Image和Macrium Reflect等。\n"
"\n"
"3. 在镜像软件中选择创建镜像的选项。这可能会要求你选择要镜像的驱动器和目标驱动器。\n"
"\n"
"4. 配置镜像选项，如压缩级别、镜像文件类型和存储位置等。可以根据需要进行相应的调整。\n"
"\n"
"5. 点击开始或创建镜像的按钮，开始创建驱动器的镜像。这个过程可能需要一些时间，具体取决于你的驱动器的大小和计算机的性能。\n"
"\n"
"6. 创建完毕后，你会得到一个驱动器的镜像文件。你可以将镜像文件存储在安全的位置，以备将来需要时使用。\n"
"\n"
"通过创建驱动器的镜像，你可以轻松地恢复数据并保护你的重要信息。这对于个人用户和企业来说都是非常有用的。记住，定期更新镜像文件，并储存多个备份副本，以确保你的数据始终得到保护。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:353
#, fuzzy
msgid ""
"In this example, FreeBSD has already been installed on a single disk, "
"[.filename]#ada0#.  A new disk, [.filename]#ada1#, has been connected to the"
" system.  A one-disk mirror will be created on the new disk, the existing "
"system copied onto it, and then the old disk will be inserted into the "
"mirror.  This slightly complex procedure is required because `gmirror` needs"
" to put a 512-byte block of metadata at the end of each disk, and the "
"existing [.filename]#ada0# has usually had all of its space already "
"allocated."
msgstr ""
"在这个示例中，FreeBSD已经安装在一块单独的磁盘上，名为[.filename]#ada0#。已经连接了一个新的磁盘[.filename]#ada1#到系统中。将在新磁盘上创建一个单磁盘镜像，将现有系统复制到它上面，然后将旧磁盘插入到镜像中。这个稍微复杂的过程是因为`gmirror`需要在每个磁盘的末尾放置一个512字节的元数据块，并且通常已经分配了[.filename]#ada0#上的所有空间。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:355
#, fuzzy
msgid "Load the [.filename]#geom_mirror.ko# kernel module:"
msgstr "加载内核模块[.filename]#geom_mirror.ko#:"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:362
#, fuzzy
msgid "Check the media size of the original disk with `diskinfo`:"
msgstr "使用 `diskinfo` 命令检查原始磁盘的媒体大小。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:369
#, no-wrap
msgid ""
"# diskinfo -v ada0 | head -n3\n"
"/dev/ada0\n"
"        512             # sectorsize\n"
"        1000204821504   # mediasize in bytes (931G)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:376
#, fuzzy
msgid ""
"Create a mirror on the new disk.  To make certain that the mirror capacity "
"is not any larger than the original [.filename]#ada0# drive, man:gnop[8] is "
"used to create a fake drive of the exact same size.  This drive does not "
"store any data, but is used only to limit the size of the mirror.  When "
"man:gmirror[8] creates the mirror, it will restrict the capacity to the size"
" of [.filename]#gzero.nop#, even if the new [.filename]#ada1# drive has more"
" space.  Note that the _1000204821504_ in the second line is equal to "
"[.filename]#ada0#'s media size as shown by `diskinfo` above."
msgstr ""
"在新磁盘上创建一个镜像。为了确保镜像容量不大于原始的#ada0#驱动器，使用man:gnop[8]创建一个与大小完全相同的虚拟驱动器。该驱动器不存储任何数据，只用于限制镜像的大小。当man:gmirror[8]创建镜像时，它将限制容量为#gzero.nop#的大小，即使新的#ada1#驱动器有更多的空间。请注意，第二行中的_1000204821504_等于`diskinfo`上方显示的#ada0#的介质大小。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:383
#, no-wrap
msgid ""
"# geom zero load\n"
"# gnop create -s 1000204821504 gzero\n"
"# gmirror label -v gm0 gzero.nop ada1\n"
"# gmirror forget gm0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:388
#, fuzzy
msgid ""
"Since [.filename]#gzero.nop# does not store any data, the mirror does not "
"see it as connected.  The mirror is told to \"forget\" unconnected "
"components, removing references to [.filename]#gzero.nop#.  The result is a "
"mirror device containing only a single disk, [.filename]#ada1#."
msgstr ""
"由于 [.filename]#gzero.nop# 不存储任何数据，镜像设备不认为它是连接的。镜像设备被告知“忘记”未连接的组件，删除对 "
"[.filename]#gzero.nop# 的引用。结果是一个只包含单个磁盘 [.filename]#ada1# 的镜像设备。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:392
#, fuzzy
msgid ""
"After creating [.filename]#gm0#, view the partition table on "
"[.filename]#ada0#.  This output is from a 1 TB drive.  If there is some "
"unallocated space at the end of the drive, the contents may be copied "
"directly from [.filename]#ada0# to the new mirror."
msgstr ""
"创建了 [.filename]#gm0# 后，查看 [.filename]#ada0# 上的分区表。这个输出来自一个1 TB "
"的硬盘驱动器。如果驱动器的末尾有一些未分配的空间，可以将内容直接从 [.filename]#ada0# 复制到新的镜像。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:394
#, fuzzy
msgid ""
"However, if the output shows that all of the space on the disk is allocated,"
" as in the following listing, there is no space available for the 512-byte "
"mirror metadata at the end of the disk."
msgstr "然而，如果输出显示磁盘上的所有空间都已分配，如下述清单所示，则磁盘末尾没有空间可用于512字节的镜像元数据。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:400
#, no-wrap
msgid ""
"# gpart show ada0\n"
"=>        63  1953525105        ada0  MBR  (931G)\n"
"          63  1953525105           1  freebsd  [active]  (931G)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:404
#, fuzzy
msgid ""
"In this case, the partition table must be edited to reduce the capacity by "
"one sector on [.filename]#mirror/gm0#.  The procedure will be explained "
"later."
msgstr "在这种情况下，必须编辑分区表以将 [.filename]#mirror/gm0# 的容量减少一个扇区。该过程将在后面解释。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:406
#, fuzzy
msgid ""
"In either case, partition tables on the primary disk should be first copied "
"using `gpart backup` and `gpart restore`."
msgstr "无论哪种情况，都应首先使用 `gpart backup` 和 `gpart restore` 命令来复制主硬盘上的分区表。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:411
#, no-wrap
msgid ""
"# gpart backup ada0 > table.ada0\n"
"# gpart backup ada0s1 > table.ada0s1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:415
#, fuzzy
msgid ""
"These commands create two files, [.filename]#table.ada0# and "
"[.filename]#table.ada0s1#.  This example is from a 1 TB drive:"
msgstr ""
"这些命令创建了两个文件，[.filename]#table.ada0# 和 [.filename]#table.ada0s1#。这个示例是来自一个1 "
"TB的硬盘。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:421
#, no-wrap
msgid ""
"# cat table.ada0\n"
"MBR 4\n"
"1 freebsd         63 1953525105   [active]\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:433
#, no-wrap
msgid ""
"# cat table.ada0s1\n"
"BSD 8\n"
"1  freebsd-ufs          0    4194304\n"
"2 freebsd-swap    4194304   33554432\n"
"4  freebsd-ufs   37748736   50331648\n"
"5  freebsd-ufs   88080384   41943040\n"
"6  freebsd-ufs  130023424  838860800\n"
"7  freebsd-ufs  968884224  984640881\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:438
#, fuzzy
msgid ""
"If no free space is shown at the end of the disk, the size of both the slice"
" and the last partition must be reduced by one sector.  Edit the two files, "
"reducing the size of both the slice and last partition by one.  These are "
"the last numbers in each listing."
msgstr ""
"如果磁盘末尾没有显示可用空间，则必须将分区和最后一个分区的大小都减小一个扇区。编辑这两个文件，将分区和最后一个分区的大小都减小一个。这些是每个列表中的最后几个数字。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:444
#, no-wrap
msgid ""
"# cat table.ada0\n"
"MBR 4\n"
"1 freebsd         63 1953525104   [active]\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:456
#, no-wrap
msgid ""
"# cat table.ada0s1\n"
"BSD 8\n"
"1  freebsd-ufs          0    4194304\n"
"2 freebsd-swap    4194304   33554432\n"
"4  freebsd-ufs   37748736   50331648\n"
"5  freebsd-ufs   88080384   41943040\n"
"6  freebsd-ufs  130023424  838860800\n"
"7  freebsd-ufs  968884224  984640880\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:459
#, fuzzy
msgid ""
"If at least one sector was unallocated at the end of the disk, these two "
"files can be used without modification."
msgstr "如果磁盘末尾至少有一个未分配的扇区，则这两个文件可以直接使用，无需修改。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:461
#, fuzzy
msgid "Now restore the partition table into [.filename]#mirror/gm0#:"
msgstr "现在将分区表恢复到 [.filename]#mirror/gm0# 中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:466
#, no-wrap
msgid ""
"# gpart restore mirror/gm0 < table.ada0\n"
"# gpart restore mirror/gm0s1 < table.ada0s1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:470
#, fuzzy
msgid ""
"Check the partition table with `gpart show`.  This example has "
"[.filename]#gm0s1a# for [.filename]#/#, [.filename]#gm0s1d# for "
"[.filename]#/var#, [.filename]#gm0s1e# for [.filename]#/usr#, "
"[.filename]#gm0s1f# for [.filename]#/data1#, and [.filename]#gm0s1g# for "
"[.filename]#/data2#."
msgstr ""
"使用 `gpart show` 命令来查看分区表。这个示例中，`/#` 的分区为 `gm0s1a`，`/var` 的分区为 "
"`gm0s1d`，`/usr` 的分区为 `gm0s1e`，`/data1` 的分区为 `gm0s1f`，`/data2` 的分区为 `gm0s1g`。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:477
#, no-wrap
msgid ""
"# gpart show mirror/gm0\n"
"=>        63  1953525104  mirror/gm0  MBR  (931G)\n"
"          63  1953525042           1  freebsd  [active]  (931G)\n"
"  1953525105          62              - free -  (31k)\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:487
#, no-wrap
msgid ""
"# gpart show mirror/gm0s1\n"
"=>         0  1953525042  mirror/gm0s1  BSD  (931G)\n"
"           0     2097152             1  freebsd-ufs  (1.0G)\n"
"     2097152    16777216             2  freebsd-swap  (8.0G)\n"
"    18874368    41943040             4  freebsd-ufs  (20G)\n"
"    60817408    20971520             5  freebsd-ufs  (10G)\n"
"    81788928   629145600             6  freebsd-ufs  (300G)\n"
"   710934528  1242590514             7  freebsd-ufs  (592G)\n"
"  1953525042          63                - free -  (31k)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:490
#, fuzzy
msgid ""
"Both the slice and the last partition must have at least one free block at "
"the end of the disk."
msgstr "切片和最后一个分区都必须在磁盘末尾保留至少一个空闲块。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:493
#, fuzzy
msgid ""
"Create file systems on these new partitions.  The number of partitions will "
"vary to match the original disk, [.filename]#ada0#."
msgstr "在这些新的分区上创建文件系统。分区的数量将根据原始磁盘的情况而变化，如 [.filename]#ada0#。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:501
#, no-wrap
msgid ""
"# newfs -U /dev/mirror/gm0s1a\n"
"# newfs -U /dev/mirror/gm0s1d\n"
"# newfs -U /dev/mirror/gm0s1e\n"
"# newfs -U /dev/mirror/gm0s1f\n"
"# newfs -U /dev/mirror/gm0s1g\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:514
#, fuzzy
msgid ""
"Adjust [.filename]#/etc/fstab# to use the new partitions on the mirror.  "
"Back up this file first by copying it to [.filename]#/etc/fstab.orig#."
msgstr ""
"根据镜像上的新分区调整 [.filename]#/etc/fstab#，首先通过将其复制到 [.filename]#/etc/fstab.orig# "
"进行备份。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:518
#, no-wrap
msgid "# cp /etc/fstab /etc/fstab.orig\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:521
#, fuzzy
msgid ""
"Edit [.filename]#/etc/fstab#, replacing [.filename]#/dev/ada0# with "
"[.filename]#mirror/gm0#."
msgstr "编辑 [/etc/fstab] 文件，将 [/dev/ada0] 替换为 [mirror/gm0]。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:531
#, no-wrap
msgid ""
"# Device\t\tMountpoint\tFStype\tOptions\tDump\tPass#\n"
"/dev/mirror/gm0s1a\t/\t\tufs\trw\t1\t1\n"
"/dev/mirror/gm0s1b\tnone\t\tswap\tsw\t0\t0\n"
"/dev/mirror/gm0s1d\t/var\t\tufs\trw\t2\t2\n"
"/dev/mirror/gm0s1e\t/usr\t\tufs\trw\t2\t2\n"
"/dev/mirror/gm0s1f\t/data1\t\tufs\trw\t2\t2\n"
"/dev/mirror/gm0s1g\t/data2\t\tufs\trw\t2\t2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:534
#, fuzzy
msgid ""
"If the [.filename]#geom_mirror.ko# kernel module has not been built into the"
" kernel, edit [.filename]#/boot/loader.conf# to load it at boot:"
msgstr ""
"如果内核中尚未构建 [.filename]#geom_mirror.ko# 内核模块，则需要编辑 "
"[.filename]#/boot/loader.conf# 文件，以在启动时加载该模块。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:542
#, fuzzy
msgid ""
"File systems from the original disk can now be copied onto the mirror with "
"man:dump[8] and man:restore[8].  Each file system dumped with `dump -L` will"
" create a snapshot first, which can take some time."
msgstr ""
"可以使用 man:dump[8] 和 man:restore[8] 将原始磁盘的文件系统复制到镜像中。使用 `dump -L` "
"借助快照创建副本，这可能需要一些时间。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:555
#, no-wrap
msgid ""
"# mount /dev/mirror/gm0s1a /mnt\n"
"# dump -C16 -b64 -0aL -f - /    | (cd /mnt && restore -rf -)\n"
"# mount /dev/mirror/gm0s1d /mnt/var\n"
"# mount /dev/mirror/gm0s1e /mnt/usr\n"
"# mount /dev/mirror/gm0s1f /mnt/data1\n"
"# mount /dev/mirror/gm0s1g /mnt/data2\n"
"# dump -C16 -b64 -0aL -f - /usr | (cd /mnt/usr && restore -rf -)\n"
"# dump -C16 -b64 -0aL -f - /var | (cd /mnt/var && restore -rf -)\n"
"# dump -C16 -b64 -0aL -f - /data1 | (cd /mnt/data1 && restore -rf -)\n"
"# dump -C16 -b64 -0aL -f - /data2 | (cd /mnt/data2 && restore -rf -)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:560
#, fuzzy
msgid ""
"Restart the system, booting from [.filename]#ada1#.  If everything is "
"working, the system will boot from [.filename]#mirror/gm0#, which now "
"contains the same data as [.filename]#ada0# had previously.  See <<gmirror-"
"troubleshooting>> if there are problems booting."
msgstr ""
"重新启动系统，从 [.filename]#ada1# 启动。如果一切正常，系统将从 [.filename]#mirror/gm0# "
"启动，该镜像现在包含了与 [.filename]#ada0# 之前相同的数据。如果出现引导问题，请参考 <<gmirror-"
"troubleshooting>>。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:562
#, fuzzy
msgid ""
"At this point, the mirror still consists of only the single "
"[.filename]#ada1# disk."
msgstr "目前，镜像只包含一个 [.filename]#ada1# 磁盘。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:564
#, fuzzy
msgid ""
"After booting from [.filename]#mirror/gm0# successfully, the final step is "
"inserting [.filename]#ada0# into the mirror."
msgstr "成功从 [.filename]#mirror/gm0# 引导后，最后一步是将 [.filename]#ada0# 插入到镜像中。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:570
#, fuzzy
msgid ""
"When [.filename]#ada0# is inserted into the mirror, its former contents will"
" be overwritten by data from the mirror.  Make certain that "
"[.filename]#mirror/gm0# has the same contents as [.filename]#ada0# before "
"adding [.filename]#ada0# to the mirror.  If the contents previously copied "
"by man:dump[8] and man:restore[8] are not identical to what was on "
"[.filename]#ada0#, revert [.filename]#/etc/fstab# to mount the file systems "
"on [.filename]#ada0#, reboot, and start the whole procedure again."
msgstr ""
"当 [.filename]#ada0# 被插入到镜像中时，它以前的内容将被来自镜像的数据覆盖。在将 [.filename]#ada0# "
"添加到镜像之前，请确保 [.filename]#mirror/gm0# 的内容与 [.filename]#ada0# 相同。如果由 "
"man:dump[8] 和 man:restore[8] 复制的内容与 [.filename]#ada0# 上的内容不一致，请将 "
"[.filename]#/etc/fstab# 恢复为挂载在 [.filename]#ada0# 上的文件系统，然后重新启动并重新开始整个过程。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:576
#, no-wrap
msgid ""
"# gmirror insert gm0 ada0\n"
"GEOM_MIRROR: Device gm0: rebuilding provider ada0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:580
#, fuzzy
msgid ""
"Synchronization between the two disks will start immediately.  Use `gmirror "
"status` to view the progress."
msgstr "两个磁盘之间的同步将立即开始。使用 `gmirror status` 命令查看进度。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:587
#, no-wrap
msgid ""
"# gmirror status\n"
"      Name    Status  Components\n"
"mirror/gm0  DEGRADED  ada1 (ACTIVE)\n"
"                      ada0 (SYNCHRONIZING, 64%)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:590
#, fuzzy
msgid "After a while, synchronization will finish."
msgstr "一段时间后，同步将完成。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:598
#, no-wrap
msgid ""
"GEOM_MIRROR: Device gm0: rebuilding provider ada0 finished.\n"
"# gmirror status\n"
"      Name    Status  Components\n"
"mirror/gm0  COMPLETE  ada1 (ACTIVE)\n"
"                      ada0 (ACTIVE)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:602
#, fuzzy
msgid ""
"[.filename]#mirror/gm0# now consists of the two disks [.filename]#ada0# and "
"[.filename]#ada1#, and the contents are automatically synchronized with each"
" other.  In use, [.filename]#mirror/gm0# will behave just like the original "
"single drive."
msgstr ""
"[.filename]#mirror/gm0# 现在由两个磁盘 [.filename]#ada0# 和 [.filename]#ada1# "
"组成，并且它们的内容会自动同步。在使用中， [.filename]#mirror/gm0# 的行为将和原始的单个驱动器一样。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:604
#, fuzzy, no-wrap
msgid "Troubleshooting"
msgstr "故障排除"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:608
#, fuzzy
msgid ""
"If the system no longer boots, BIOS settings may have to be changed to boot "
"from one of the new mirrored drives.  Either mirror drive can be used for "
"booting, as they contain identical data."
msgstr "如果系统无法启动，可能需要更改BIOS设置以从新的镜像驱动器启动。可以使用任何一个镜像驱动器进行启动，因为它们包含相同的数据。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:610
#, fuzzy
msgid ""
"If the boot stops with this message, something is wrong with the mirror "
"device:"
msgstr "如果启动停在这个消息上，表示镜像设备出现了问题："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:614
#, no-wrap
msgid "Mounting from ufs:/dev/mirror/gm0s1a failed with error 19.\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:618
#, no-wrap
msgid ""
"Loader variables:\n"
"  vfs.root.mountfrom=ufs:/dev/mirror/gm0s1a\n"
"  vfs.root.mountfrom.options=rw\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:623
#, no-wrap
msgid ""
"Manual root filesystem specification:\n"
"  <fstype>:<device> [options]\n"
"      Mount <device> using filesystem <fstype>\n"
"      and with the specified (optional) option list.\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:628
#, no-wrap
msgid ""
"    e.g. ufs:/dev/da0s1a\n"
"        zfs:tank\n"
"        cd9660:/dev/acd0 ro\n"
"          (which is equivalent to: mount -t cd9660 -o ro /dev/acd0 /)\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:632
#, no-wrap
msgid ""
"  ?               List valid disk boot devices\n"
"  .               Yield 1 second (for background tasks)\n"
"  <empty line>    Abort manual input\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:634
#, no-wrap
msgid "mountroot>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:639
#, fuzzy
msgid ""
"Forgetting to load the [.filename]#geom_mirror.ko# module in "
"[.filename]#/boot/loader.conf# can cause this problem.  To fix it, boot from"
" a FreeBSD installation media and choose `Shell` at the first prompt.  Then "
"load the mirror module and mount the mirror device:"
msgstr ""
"在 [.filename]#/boot/loader.conf# 中忘记加载 [.filename]#geom_mirror.ko# "
"模块可能会导致此问题。要修复它，请从 FreeBSD 安装介质启动，并在第一个提示处选择 `Shell`。然后加载镜像模块并挂载镜像设备："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:644
#, no-wrap
msgid ""
"# gmirror load\n"
"# mount /dev/mirror/gm0s1a /mnt\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:647
#, fuzzy
msgid ""
"Edit [.filename]#/mnt/boot/loader.conf#, adding a line to load the mirror "
"module:"
msgstr "编辑 [.filename]#/mnt/boot/loader.conf#，添加一行加载镜像模块的代码："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:654
#, fuzzy
msgid "Save the file and reboot."
msgstr "保存文件并重新启动。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:660
#, fuzzy
msgid ""
"Other problems that cause `error 19` require more effort to fix.  Although "
"the system should boot from [.filename]#ada0#, another prompt to select a "
"shell will appear if [.filename]#/etc/fstab# is incorrect.  Enter "
"`ufs:/dev/ada0s1a` at the boot loader prompt and press kbd:[Enter].  Undo "
"the edits in [.filename]#/etc/fstab# then mount the file systems from the "
"original disk ([.filename]#ada0#) instead of the mirror.  Reboot the system "
"and try the procedure again."
msgstr ""
"其他导致\"错误 19\"的问题需要更多的工作来修复。虽然系统应该从`ada0`引导，但如果`/etc/fstab`不正确，将会出现另一个提示选择 "
"shell。在引导加载程序提示符处输入`ufs:/dev/ada0s1a`，然后按下回车键。撤消对`/etc/fstab`的编辑，然后将文件系统挂载到原始磁盘（`ada0`）上，而不是镜像。重新启动系统并再次尝试该过程。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:666
#, no-wrap
msgid ""
"Enter full pathname of shell or RETURN for /bin/sh:\n"
"# cp /etc/fstab.orig /etc/fstab\n"
"# reboot\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:668
#, fuzzy, no-wrap
msgid "Recovering from Disk Failure"
msgstr "从磁盘故障中恢复"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:672
#, fuzzy
msgid ""
"The benefit of disk mirroring is that an individual disk can fail without "
"causing the mirror to lose any data.  In the above example, if "
"[.filename]#ada0# fails, the mirror will continue to work, providing data "
"from the remaining working drive, [.filename]#ada1#."
msgstr ""
"磁盘镜像的好处是一个独立的磁盘可以出错而不会导致镜像丢失任何数据。在上面的例子中，如果 [.filename]#ada0# "
"失败，镜像仍然可以继续工作，从其余正常工作的驱动器 [.filename]#ada1# 提供数据。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:676
#, fuzzy
msgid ""
"To replace the failed drive, shut down the system and physically replace the"
" failed drive with a new drive of equal or greater capacity.  Manufacturers "
"use somewhat arbitrary values when rating drives in gigabytes, and the only "
"way to really be sure is to compare the total count of sectors shown by "
"`diskinfo -v`.  A drive with larger capacity than the mirror will work, "
"although the extra space on the new drive will not be used."
msgstr ""
"要替换故障的硬盘，关闭系统并用一个容量相等或更大的新硬盘进行物理替换。制造商在对硬盘进行千兆字节评级时会使用一些任意值，而真正确认的方法是比较由`diskinfo"
" -v`显示的扇区总数。大于镜像的容量的硬盘可以工作，尽管新硬盘上的额外空间不会被使用。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:679
#, fuzzy
msgid ""
"After the computer is powered back up, the mirror will be running in a "
"\"degraded\" mode with only one drive.  The mirror is told to forget drives "
"that are not currently connected:"
msgstr "在计算机重新启动后，镜像将以“降级”模式运行，只有一块驱动器。 镜像会被告知忘记当前未连接的驱动器："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:683
#, no-wrap
msgid "# gmirror forget gm0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:687
#, fuzzy
msgid ""
"Any old metadata should be cleared from the replacement disk using the "
"instructions in <<geom-mirror-metadata>>.  Then the replacement disk, "
"[.filename]#ada4# for this example, is inserted into the mirror:"
msgstr ""
"应该使用<<geom-mirror-"
"metadata>>中的指令清除替换磁盘上的旧元数据。然后将替换磁盘（对于此示例为[.filename]#ada4#）插入镜像："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:691
#, no-wrap
msgid "# gmirror insert gm0 /dev/ada4\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:696
#, fuzzy
msgid ""
"Resynchronization begins when the new drive is inserted into the mirror.  "
"This process of copying mirror data to a new drive can take a while.  "
"Performance of the mirror will be greatly reduced during the copy, so "
"inserting new drives is best done when there is low demand on the computer."
msgstr ""
"重新同步开始于将新的驱动器插入到镜像中。将镜像数据复制到新驱动器的过程可能需要一些时间。在复制过程中，镜像的性能将大幅降低，因此最好在计算机需求较低时插入新的驱动器。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:699
#, fuzzy
msgid ""
"Progress can be monitored with `gmirror status`, which shows drives that are"
" being synchronized and the percentage of completion.  During "
"resynchronization, the status will be `DEGRADED`, changing to `COMPLETE` "
"when the process is finished."
msgstr ""
"可以使用 `gmirror status` 来监视进度，它会显示正在同步的驱动器以及完成的百分比。在重新同步期间，状态将会显示为 "
"`DEGRADED`，当进程完成时会变为 `COMPLETE`。"

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:701
#, fuzzy, no-wrap
msgid "RAID3 - Byte-level Striping with Dedicated Parity"
msgstr "RAID3 - 字节级条带化与独立奇偶校验"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:709
#, fuzzy
msgid ""
"RAID3 is a method used to combine several disk drives into a single volume "
"with a dedicated parity disk.  In a RAID3 system, data is split up into a "
"number of bytes that are written across all the drives in the array except "
"for one disk which acts as a dedicated parity disk.  This means that disk "
"reads from a RAID3 implementation access all disks in the array.  "
"Performance can be enhanced by using multiple disk controllers.  The RAID3 "
"array provides a fault tolerance of 1 drive, while providing a capacity of 1"
" - 1/n times the total capacity of all drives in the array, where n is the "
"number of hard drives in the array.  Such a configuration is mostly suitable"
" for storing data of larger sizes such as multimedia files."
msgstr ""
"RAID3是一种将多个磁盘驱动器组合成一个带有专用奇偶校验磁盘的方法。在RAID3系统中，数据被分割成多个字节，并写入阵列中除一个磁盘外的所有驱动器中。该磁盘充当专用奇偶校验磁盘。这意味着RAID3实现的磁盘读取会访问阵列中的所有磁盘。通过使用多个磁盘控制器，可以提高性能。RAID3阵列提供一个驱动器的容错性，同时提供总容量为所有驱动器总容量的1"
" - 1/n倍的容量，其中n是阵列中的硬盘数量。这种配置主要适用于存储较大的数据，如多媒体文件。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:713
#, fuzzy
msgid ""
"At least 3 physical hard drives are required to build a RAID3 array.  Each "
"disk must be of the same size, since I/O requests are interleaved to read or"
" write to multiple disks in parallel.  Also, due to the nature of RAID3, the"
" number of drives must be equal to 3, 5, 9, 17, and so on, or 2^n + 1."
msgstr ""
"构建 RAID3 阵列至少需要3个物理硬盘。每个硬盘必须具有相同的大小，因为 I/O 请求会并行地在多个硬盘上进行交错读写。此外，由于 RAID3 "
"的特性，硬盘的数量必须等于3、5、9、17等，即 2^n + 1。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:715
#, fuzzy
msgid ""
"This section demonstrates how to create a software RAID3 on a FreeBSD "
"system."
msgstr "本节介绍如何在FreeBSD系统上创建一个软件RAID3。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:719
#, fuzzy
msgid ""
"While it is theoretically possible to boot from a RAID3 array on FreeBSD, "
"that configuration is uncommon and is not advised."
msgstr "虽然理论上可以在FreeBSD上从RAID3阵列引导启动，但这种配置很少见，也不被建议。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:721
#, fuzzy, no-wrap
msgid "Creating a Dedicated RAID3 Array"
msgstr ""
"创建一个专用的RAID3阵列\n"
"\n"
"可以使用以下步骤创建一个专用的RAID3阵列：\n"
"\n"
"1. 首先，确保你已经安装了至少三个硬盘驱动器，并且它们都连接到计算机上。\n"
"\n"
"2. 打开计算机的操作系统，并登录到以管理员权限运行的帐户。\n"
"\n"
"3. 打开RAID管理软件或者BIOS设置实用程序，这取决于你的计算机和RAID控制器的型号。\n"
"\n"
"4. 在RAID管理软件中，选择创建新的阵列选项。\n"
"\n"
"5. 从可用的驱动器列表中选择三个硬盘驱动器，并将它们分配给RAID3阵列。\n"
"\n"
"6. 设置RAID3的参数，如数据块的大小、奇偶校验盘的位置等。\n"
"\n"
"7. 确认设置并保存更改，在确认对硬盘驱动器进行格式化和数据初始化操作之前，系统会要求你进行确认。\n"
"\n"
"8. 等待RAID3阵列的创建和初始化过程完成。\n"
"\n"
"一旦RAID3阵列创建成功，你可以将其用作存储大量数据的高容错性解决方案。请注意，RAID3阵列需要至少三个硬盘驱动器，并且它提供高容错性和数据冗余来保护数据免受硬盘驱动器故障的影响。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:725
#, fuzzy
msgid ""
"In FreeBSD, support for RAID3 is implemented by the man:graid3[8] GEOM "
"class.  Creating a dedicated RAID3 array on FreeBSD requires the following "
"steps."
msgstr ""
"在 FreeBSD 中，对 RAID3 的支持是通过 man:graid3[8] GEOM 类实现的。在 FreeBSD 上创建一个专用的 RAID3 "
"数组需要以下步骤。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:728
#, fuzzy
msgid ""
"First, load the [.filename]#geom_raid3.ko# kernel module by issuing one of "
"the following commands:"
msgstr "首先，通过执行以下命令之一加载内核模块[.filename]#geom_raid3.ko#："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:732
#, no-wrap
msgid "# graid3 load\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:735
#, fuzzy
msgid "or:"
msgstr "或者："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:739
#, no-wrap
msgid "# kldload geom_raid3\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:742
#, fuzzy
msgid ""
"Ensure that a suitable mount point exists. This command creates a new "
"directory to use as the mount point:"
msgstr "确保存在一个合适的挂载点。下面的命令将创建一个新的目录作为挂载点："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:746
#, no-wrap
msgid "# mkdir /multimedia\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:749
#, fuzzy
msgid ""
"Determine the device names for the disks which will be added to the array, "
"and create the new RAID3 device. The final device listed will act as the "
"dedicated parity disk. This example uses three unpartitioned ATA drives: "
"[.filename]#ada1# and [.filename]#ada2# for data, and [.filename]#ada3# for "
"parity."
msgstr ""
"确定将添加到阵列中的磁盘的设备名称，并创建新的RAID3设备。最后列出的设备将充当专用奇偶校验磁盘。此示例使用三个未分区的ATA驱动器：数据使用 "
"[.filename]#ada1# 和 [.filename]#ada2#，奇偶校验使用 [.filename]#ada3#。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:757
#, no-wrap
msgid ""
"# graid3 label -v gr0 /dev/ada1 /dev/ada2 /dev/ada3\n"
"Metadata value stored on /dev/ada1.\n"
"Metadata value stored on /dev/ada2.\n"
"Metadata value stored on /dev/ada3.\n"
"Done.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:760
#, fuzzy
msgid ""
"Partition the newly created [.filename]#gr0# device and put a UFS file "
"system on it:"
msgstr "将新创建的 [.filename]#gr0# 设备进行分区，并在其中放置一个 UFS 文件系统："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:766
#, no-wrap
msgid ""
"# gpart create -s GPT /dev/raid3/gr0\n"
"# gpart add -t freebsd-ufs /dev/raid3/gr0\n"
"# newfs -j /dev/raid3/gr0p1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:770
#, fuzzy
msgid ""
"Many numbers will glide across the screen, and after a bit of time, the "
"process will be complete.  The volume has been created and is ready to be "
"mounted:"
msgstr "许多数字将在屏幕上滑动，并经过一段时间后，进程将完成。卷已经创建并准备好挂载："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:774
#, no-wrap
msgid "# mount /dev/raid3/gr0p1 /multimedia/\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:777
#, fuzzy
msgid "The RAID3 array is now ready to use."
msgstr "RAID3阵列现已准备就绪。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:779
#, fuzzy
msgid ""
"Additional configuration is needed to retain this setup across system "
"reboots."
msgstr "在系统重启后，需要进行额外的配置以保留这个设置。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:782
#, fuzzy
msgid ""
"The [.filename]#geom_raid3.ko# module must be loaded before the array can be"
" mounted. To automatically load the kernel module during system "
"initialization, add the following line to [.filename]#/boot/loader.conf#:"
msgstr ""
"在挂载数组之前，必须加载 [.filename]#geom_raid3.ko# 模块。为了在系统初始化期间自动加载内核模块，请将以下行添加到 "
"[.filename]#/boot/loader.conf# 文件中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:786
#, no-wrap
msgid "geom_raid3_load=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:789
#, fuzzy
msgid ""
"The following volume information must be added to [.filename]#/etc/fstab# in"
" order to automatically mount the array's file system during the system boot"
" process:"
msgstr "为了在系统启动过程中自动挂载数组的文件系统，必须将以下卷信息添加到/etc/fstab。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:793
#, no-wrap
msgid "/dev/raid3/gr0p1\t/multimedia\tufs\trw\t2\t2\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:796
#, fuzzy, no-wrap
msgid "Software RAID Devices"
msgstr "软件 RAID 设备"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:801
#, fuzzy
msgid ""
"Some motherboards and expansion cards add some simple hardware, usually just"
" a ROM, that allows the computer to boot from a RAID array.  After booting, "
"access to the RAID array is handled by software running on the computer's "
"main processor.  This \"hardware-assisted software RAID\" gives RAID arrays "
"that are not dependent on any particular operating system, and which are "
"functional even before an operating system is loaded."
msgstr ""
"一些主板和扩展卡会添加一些简单的硬件，通常只是一个ROM，它允许计算机从RAID阵列引导。在引导之后，访问RAID阵列由计算机主处理器上运行的软件处理。这种\"硬件辅助的软件RAID\"提供了不依赖于任何特定操作系统的RAID阵列，并且在加载操作系统之前就可以使用。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:804
#, fuzzy
msgid ""
"Several levels of RAID are supported, depending on the hardware in use.  See"
" man:graid[8] for a complete list."
msgstr "根据所使用的硬件，支持多个级别的RAID。请参阅 man:graid[8] 以获取完整列表。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:807
#, fuzzy
msgid ""
"man:graid[8] requires the [.filename]#geom_raid.ko# kernel module, which is "
"included in the [.filename]#GENERIC# kernel starting with FreeBSD 9.1.  If "
"needed, it can be loaded manually with `graid load`."
msgstr ""
"man:graid[8] 需要 [.filename]#geom_raid.ko# 内核模块，在 FreeBSD 9.1 及以上版本的 "
"[.filename]#GENERIC# 内核中已包含。如果需要的话，可以使用 `graid load` 命令手动加载。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:809
#, fuzzy, no-wrap
msgid "Creating an Array"
msgstr ""
"创建一个数组\n"
"\n"
"要创建一个数组，你需要使用编程语言提供的相应语法。数组是一种用于存储多个相同类型数据的数据结构。\n"
"\n"
"在大多数编程语言中，你可以使用以下语法来创建一个数组：\n"
"\n"
"```\n"
"type[] arrayName = new type[size];\n"
"```\n"
"\n"
"其中，`type`表示数组中存储的数据类型，`arrayName`是你为数组命名的名称，`size`是数组的大小，表示数组可以容纳的元素数量。\n"
"\n"
"例如，如果你想创建一个整数类型的数组，可以使用以下语法：\n"
"\n"
"```\n"
"int[] numbers = new int[5];\n"
"```\n"
"\n"
"这将创建一个可以存储5个整数的数组。\n"
"\n"
"你还可以使用以下语法来初始化数组并为其赋值：\n"
"\n"
"```\n"
"type[] arrayName = {value1, value2, value3};\n"
"```\n"
"\n"
"例如，如果你想创建一个字符串类型的数组并为其赋值，可以使用以下语法：\n"
"\n"
"```\n"
"String[] names = {\"Alice\", \"Bob\", \"Charlie\"};\n"
"```\n"
"\n"
"这将创建一个包含3个字符串的数组。\n"
"\n"
"请根据你使用的编程语言和具体需求来选择最适合的数组创建方式。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:814
#, fuzzy
msgid ""
"Software RAID devices often have a menu that can be entered by pressing "
"special keys when the computer is booting.  The menu can be used to create "
"and delete RAID arrays.  man:graid[8] can also create arrays directly from "
"the command line."
msgstr ""
"软件 RAID 设备通常在计算机引导时按下特殊键才能进入菜单。该菜单可用于创建和删除 RAID 阵列。man:graid[8] "
"也可以直接通过命令行创建阵列。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:818
#, fuzzy
msgid ""
"`graid label` is used to create a new array.  The motherboard used for this "
"example has an Intel software RAID chipset, so the Intel metadata format is "
"specified.  The new array is given a label of [.filename]#gm0#, it is a "
"mirror (RAID1), and uses drives [.filename]#ada0# and [.filename]#ada1#."
msgstr ""
"`graid "
"label`用于创建一个新的阵列。这个示例中使用的主板具有Intel软件RAID芯片组，因此指定了Intel元数据格式。新的阵列被命名为[.filename]#gm0#，它是一个镜像（RAID1），使用驱动器[.filename]#ada0#和[.filename]#ada1#。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:823
#, fuzzy
msgid ""
"Some space on the drives will be overwritten when they are made into a new "
"array.  Back up existing data first!"
msgstr "当将磁盘制作成新的阵列时，部分空间将被覆盖。请先备份现有数据！"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:837
#, no-wrap
msgid ""
"# graid label Intel gm0 RAID1 ada0 ada1\n"
"GEOM_RAID: Intel-a29ea104: Array Intel-a29ea104 created.\n"
"GEOM_RAID: Intel-a29ea104: Disk ada0 state changed from NONE to ACTIVE.\n"
"GEOM_RAID: Intel-a29ea104: Subdisk gm0:0-ada0 state changed from NONE to ACTIVE.\n"
"GEOM_RAID: Intel-a29ea104: Disk ada1 state changed from NONE to ACTIVE.\n"
"GEOM_RAID: Intel-a29ea104: Subdisk gm0:1-ada1 state changed from NONE to ACTIVE.\n"
"GEOM_RAID: Intel-a29ea104: Array started.\n"
"GEOM_RAID: Intel-a29ea104: Volume gm0 state changed from STARTING to OPTIMAL.\n"
"Intel-a29ea104 created\n"
"GEOM_RAID: Intel-a29ea104: Provider raid/r0 for volume gm0 created.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:840
#, fuzzy
msgid "A status check shows the new mirror is ready for use:"
msgstr "状态检查显示新镜像已准备好供使用："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:847
#: documentation/content/en/books/handbook/geom/_index.adoc:1023
#, no-wrap
msgid ""
"# graid status\n"
"   Name   Status  Components\n"
"raid/r0  OPTIMAL  ada0 (ACTIVE (ACTIVE))\n"
"                  ada1 (ACTIVE (ACTIVE))\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:852
#, fuzzy
msgid ""
"The array device appears in [.filename]#/dev/raid/#.  The first array is "
"called [.filename]#r0#.  Additional arrays, if present, will be "
"[.filename]#r1#, [.filename]#r2#, and so on."
msgstr "数组设备出现在`/dev/raid/`路径下。第一个数组被称为`r0`。如果存在其他数组，它们将被命名为`r1`、`r2`等等。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:856
#, fuzzy
msgid ""
"The BIOS menu on some of these devices can create arrays with special "
"characters in their names.  To avoid problems with those special characters,"
" arrays are given simple numbered names like [.filename]#r0#.  To show the "
"actual labels, like [.filename]#gm0# in the example above, use "
"man:sysctl[8]:"
msgstr ""
"某些设备的BIOS菜单可以创建包含特殊字符的数组。为了避免这些特殊字符带来的问题，数组被赋予简单的编号名称，例如[.filename]#r0#。要显示实际标签，例如上面的例子中的[.filename]#gm0#，请使用man:sysctl[8]命令。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:860
#, no-wrap
msgid "# sysctl kern.geom.raid.name_format=1\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:863
#, fuzzy, no-wrap
msgid "Multiple Volumes"
msgstr "多个卷"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:869
#, fuzzy
msgid ""
"Some software RAID devices support more than one _volume_ on an array.  "
"Volumes work like partitions, allowing space on the physical drives to be "
"split and used in different ways.  For example, Intel software RAID devices "
"support two volumes.  This example creates a 40 G mirror for safely storing "
"the operating system, followed by a 20 G RAID0 (stripe) volume for fast "
"temporary storage:"
msgstr ""
"一些软件 RAID 设备支持在阵列上创建多个 _卷(volume)_ 。 卷类似于分区，允许将物理驱动器上的空间分割并以不同的方式使用。 "
"例如，Intel 软件 RAID 设备支持创建两个卷。 下面的示例创建了一个容量为 40 G 的镜像卷，用于安全存储操作系统，随后创建一个容量为 20 "
"G 的 RAID0（条带）卷，用于快速临时存储："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:874
#, no-wrap
msgid ""
"# graid label -S 40G Intel gm0 RAID1 ada0 ada1\n"
"# graid add -S 20G gm0 RAID0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:878
#, fuzzy
msgid ""
"Volumes appear as additional [.filename]#rX# entries in "
"[.filename]#/dev/raid/#.  An array with two volumes will show "
"[.filename]#r0# and [.filename]#r1#."
msgstr ""
"卷在`/dev/raid/`中会显示为附加的`.filename`的`rX`条目。一个包含两个卷的阵列将显示为`.filename`的`r0`和`r1`条目。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:880
#, fuzzy
msgid ""
"See man:graid[8] for the number of volumes supported by different software "
"RAID devices."
msgstr "请参阅 man:graid[8] 查看不同软件 RAID 设备支持的卷数。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:882
#, fuzzy, no-wrap
msgid "Converting a Single Drive to a Mirror"
msgstr ""
"将单个驱动器转换为镜像\n"
"\n"
"== Introduction\n"
"\n"
"Converting a single drive to a mirror is a process of creating a redundant copy of the data on the original drive onto another drive. This is done to ensure data resilience and protection against drive failure. In this guide, we will cover the steps required to convert a single drive to a mirror using various methods.\n"
"\n"
"== Prerequisites\n"
"\n"
"Before you begin, make sure you have the following:\n"
"\n"
"- A spare drive with enough capacity to mirror the original drive\n"
"- An understanding of the concept of mirroring and its benefits\n"
"- Basic knowledge of computer hardware and disk management\n"
"\n"
"== Methods\n"
"\n"
"There are multiple ways to convert a single drive to a mirror, depending on the operating system and disk management tools available. Here are a few common methods:\n"
"\n"
"1. Using software RAID: Many operating systems, such as Windows and Linux, support software RAID (Redundant Array of Independent Disks). This allows you to create a mirror using built-in tools or third-party software.\n"
"\n"
"2. Hardware RAID: If you have a RAID controller or a motherboard with integrated RAID capabilities, you can use the hardware RAID feature to create a mirror.\n"
"\n"
"3. Disk cloning: Another method is to clone the original drive onto the spare drive using disk cloning software. This creates an exact copy of the original drive, including the operating system and all data.\n"
"\n"
"== Conclusion\n"
"\n"
"Converting a single drive to a mirror is an effective way to protect your data from drive failures. By creating a redundant copy of your data, you ensure that even if one drive fails, your data remains accessible. Choose the method that suits your needs and follow the steps carefully to successfully convert your drive to a mirror."

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:886
#, fuzzy
msgid ""
"Under certain specific conditions, it is possible to convert an existing "
"single drive to a man:graid[8] array without reformatting.  To avoid data "
"loss during the conversion, the existing drive must meet these minimum "
"requirements:"
msgstr ""
"在特定条件下，可以将现有的单个驱动器转换为 "
"man:graid[8]（单盘冗余阵列）而无需重新格式化。为了在转换过程中避免数据丢失，现有的驱动器必须满足以下最低要求："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:888
#, fuzzy
msgid ""
"The drive must be partitioned with the MBR partitioning scheme. GPT or other"
" partitioning schemes with metadata at the end of the drive will be "
"overwritten and corrupted by the man:graid[8] metadata."
msgstr ""
"驱动器必须使用MBR分区方案进行分区。使用GPT或其他分区方案，并且在驱动器末尾具有元数据的情况下，将被man:graid[8]元数据覆盖和损坏。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:889
#, fuzzy
msgid ""
"There must be enough unpartitioned and unused space at the end of the drive "
"to hold the man:graid[8] metadata. This metadata varies in size, but the "
"largest occupies 64 M, so at least that much free space is recommended."
msgstr ""
"磁盘末尾必须有足够的未分区和未使用空间来容纳 man:graid[8] 的元数据。该元数据的大小可能不同，但最大值为 64 "
"M，因此建议至少保留这么多的可用空间。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:892
#, fuzzy
msgid ""
"If the drive meets these requirements, start by making a full backup.  Then "
"create a single-drive mirror with that drive:"
msgstr "如果驱动器满足这些要求，请首先进行完整备份。然后使用该驱动器创建一个单驱动器镜像："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:896
#, no-wrap
msgid "# graid label Intel gm0 RAID1 ada0 NONE\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:900
#, fuzzy
msgid ""
"man:graid[8] metadata was written to the end of the drive in the unused "
"space.  A second drive can now be inserted into the mirror:"
msgstr "man:graid[8] 会将元数据写入未使用的空间的磁盘的末尾。现在可以将第二个磁盘插入到镜像中了："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:904
#, no-wrap
msgid "# graid insert raid/r0 ada1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:908
#, fuzzy
msgid ""
"Data from the original drive will immediately begin to be copied to the "
"second drive.  The mirror will operate in degraded status until the copy is "
"complete."
msgstr "从原始驱动器复制的数据将立即开始复制到第二个驱动器。镜像将在复制完成之前以降级状态运行。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:910
#, fuzzy, no-wrap
msgid "Inserting New Drives into the Array"
msgstr "将新驱动器插入数组中"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:915
#, fuzzy
msgid ""
"Drives can be inserted into an array as replacements for drives that have "
"failed or are missing.  If there are no failed or missing drives, the new "
"drive becomes a spare.  For example, inserting a new drive into a working "
"two-drive mirror results in a two-drive mirror with one spare drive, not a "
"three-drive mirror."
msgstr ""
"可以将驱动器插入到数组中以替换失败或丢失的驱动器。如果没有失败或丢失的驱动器，新驱动器将变为备用驱动器。例如，将新驱动器插入到正常工作的两个驱动器镜像中会得到一个带有一个备用驱动器的两个驱动器镜像，而不是一个三个驱动器的镜像。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:918
#, fuzzy
msgid ""
"In the example mirror array, data immediately begins to be copied to the "
"newly-inserted drive.  Any existing information on the new drive will be "
"overwritten."
msgstr "在镜像阵列的示例中，数据立即开始复制到新插入的驱动器中。新驱动器上的任何现有信息都将被覆盖。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:926
#, no-wrap
msgid ""
"# graid insert raid/r0 ada1\n"
"GEOM_RAID: Intel-a29ea104: Disk ada1 state changed from NONE to ACTIVE.\n"
"GEOM_RAID: Intel-a29ea104: Subdisk gm0:1-ada1 state changed from NONE to NEW.\n"
"GEOM_RAID: Intel-a29ea104: Subdisk gm0:1-ada1 state changed from NEW to REBUILD.\n"
"GEOM_RAID: Intel-a29ea104: Subdisk gm0:1-ada1 rebuild start at 0.\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:929
#, fuzzy, no-wrap
msgid "Removing Drives from the Array"
msgstr "从阵列中移除驱动器"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:932
#, fuzzy
msgid ""
"Individual drives can be permanently removed from a from an array and their "
"metadata erased:"
msgstr "可以将单个驱动器从阵列中永久删除，并擦除其元数据："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:939
#, no-wrap
msgid ""
"# graid remove raid/r0 ada1\n"
"GEOM_RAID: Intel-a29ea104: Disk ada1 state changed from ACTIVE to OFFLINE.\n"
"GEOM_RAID: Intel-a29ea104: Subdisk gm0:1-[unknown] state changed from ACTIVE to NONE.\n"
"GEOM_RAID: Intel-a29ea104: Volume gm0 state changed from OPTIMAL to DEGRADED.\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:942
#, fuzzy, no-wrap
msgid "Stopping the Array"
msgstr "停止数组"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:946
#, fuzzy
msgid ""
"An array can be stopped without removing metadata from the drives.  The "
"array will be restarted when the system is booted."
msgstr "可以在不从驱动器中删除元数据的情况下停止阵列。系统重新启动时，阵列将被重新启动。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:950
#, no-wrap
msgid "# graid stop raid/r0\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:953
#, fuzzy, no-wrap
msgid "Checking Array Status"
msgstr "检查数组状态"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:957
#, fuzzy
msgid ""
"Array status can be checked at any time.  After a drive was added to the "
"mirror in the example above, data is being copied from the original drive to"
" the new drive:"
msgstr "可以随时检查数组状态。 在上面的示例中，添加驱动器到镜像后，数据正在从原始驱动器复制到新驱动器："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:964
#, no-wrap
msgid ""
"# graid status\n"
"   Name    Status  Components\n"
"raid/r0  DEGRADED  ada0 (ACTIVE (ACTIVE))\n"
"                   ada1 (ACTIVE (REBUILD 28%))\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:968
#, fuzzy
msgid ""
"Some types of arrays, like `RAID0` or `CONCAT`, may not be shown in the "
"status report if disks have failed.  To see these partially-failed arrays, "
"add `-ga`:"
msgstr ""
"某些类型的数组，如 `RAID0` 或 `CONCAT`，如果磁盘发生故障，在状态报告中可能不会显示。要查看这些部分故障的数组，请添加 `-ga` "
"参数："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:974
#, no-wrap
msgid ""
"# graid status -ga\n"
"          Name  Status  Components\n"
"Intel-e2d07d9a  BROKEN  ada6 (ACTIVE (ACTIVE))\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:977
#, fuzzy, no-wrap
msgid "Deleting Arrays"
msgstr ""
"删除数组\n"
"\n"
"要删除一个数组，在大多数编程语言中都有一些常见的方法和技巧。以下是几种常用的删除数组的方法：\n"
"\n"
"1. 使用特定的数组删除函数或方法：许多编程语言提供了直接删除数组的函数或方法。使用这些函数或方法，可以将数组完全从内存中删除。\n"
"\n"
"2. 重新分配数组：有些编程语言允许重新分配数组的大小或长度。通过将数组的大小或长度设置为0，可以达到删除数组的效果。\n"
"\n"
"3. 使用关键字或功能：某些编程语言提供了特定的关键字或功能，用于删除数组。这些关键字或功能可以将数组标记为删除，并在适当的时候清理或回收内存。\n"
"\n"
"无论你选择哪种方法来删除数组，都需要小心确保没有留下任何引用或指向该数组的指针，以便垃圾回收机制可以正确地处理它。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:981
#, fuzzy
msgid ""
"Arrays are destroyed by deleting all of the volumes from them.  When the "
"last volume present is deleted, the array is stopped and metadata is removed"
" from the drives:"
msgstr "数组是通过从中删除所有卷来销毁的。当删除最后一个存在的卷时，数组会停止，并从驱动器中删除元数据。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:985
#: documentation/content/en/books/handbook/geom/_index.adoc:1030
#, no-wrap
msgid "# graid delete raid/r0\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:988
#, fuzzy, no-wrap
msgid "Deleting Unexpected Arrays"
msgstr ""
"删除意外的数组\n"
"\n"
"在计算机编程中，有时候会遇到不需要或意外创建的数组。这可能是由于代码错误、逻辑错误或其他不可预测的情况导致的。为了解决这个问题，我们需要删除这些意外的数组。\n"
"\n"
"删除数组的过程可能会涉及以下步骤：\n"
"\n"
"1. 确定意外的数组：首先，我们需要识别哪些数组是意外创建的。可以通过检查代码中的变量、函数和条件语句来进行识别。\n"
"\n"
"2. 调试代码：一旦发现了意外数组的来源，我们需要对代码进行调试，找出导致数组创建的错误或逻辑问题。\n"
"\n"
"3. 删除数组：一旦我们确定了要删除的数组，就可以通过使用适当的代码语句或函数来删除它们。这可能涉及到使用数组的索引或指针来定位并删除数组。\n"
"\n"
"通过删除意外的数组，我们可以提高代码的质量和性能，并避免不必要的资源消耗。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:993
#, fuzzy
msgid ""
"Drives may unexpectedly contain man:graid[8] metadata, either from previous "
"use or manufacturer testing.  man:graid[8] will detect these drives and "
"create an array, interfering with access to the individual drive.  To remove"
" the unwanted metadata:"
msgstr ""
"硬盘可能意外地包含来自先前使用或制造商测试的 man:graid[8] 元数据。 man:graid[8] "
"将检测这些硬盘并创建一个数组，从而干扰对单个硬盘的访问。要删除不需要的元数据："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:996
#, fuzzy
msgid ""
"Boot the system. At the boot menu, select `2` for the loader prompt. Enter:"
msgstr "启动系统。在启动菜单中，选择`2`以进入加载程序提示符。输入："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1001
#, no-wrap
msgid ""
"OK set kern.geom.raid.enable=0\n"
"OK boot\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1004
#, fuzzy
msgid "The system will boot with man:graid[8] disabled."
msgstr "系统在禁用 man:graid[8] 的情况下启动。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1005
#, fuzzy
msgid "Back up all data on the affected drive."
msgstr "备份受影响驱动器上的所有数据。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1006
#, fuzzy
msgid ""
"As a workaround, man:graid[8] array detection can be disabled by adding"
msgstr "作为一种解决方法，可以通过添加 man:graid[8] 数组检测来禁用。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1010
#, no-wrap
msgid "kern.geom.raid.enable=0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1013
#, fuzzy
msgid "to [.filename]#/boot/loader.conf#."
msgstr "到`/boot/loader.conf`文件。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1016
#, fuzzy
msgid ""
"To permanently remove the man:graid[8] metadata from the affected drive, "
"boot a FreeBSD installation CD-ROM or memory stick, and select `Shell`.  Use"
" `status` to find the name of the array, typically `raid/r0`:"
msgstr ""
"要永久删除受影响驱动器上的 \"man:graid[8]\" 元数据，请使用FreeBSD安装CD-ROM或内存棒启动，然后选择 "
"\"Shell\"。使用 \"status\" 命令查找数组的名称，通常为 \"raid/r0\"："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1026
#, fuzzy
msgid "Delete the volume by name:"
msgstr "按名称删除卷："

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1034
#, fuzzy
msgid ""
"If there is more than one volume shown, repeat the process for each volume."
"  After the last array has been deleted, the volume will be destroyed."
msgstr "如果显示了多个卷，请对每个卷重复该过程。在删除了最后一个阵列之后，卷将被销毁。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1037
#, fuzzy
msgid ""
"Reboot and verify data, restoring from backup if necessary.  After the "
"metadata has been removed, the `kern.geom.raid.enable=0` entry in "
"[.filename]#/boot/loader.conf# can also be removed."
msgstr ""
"重新启动并验证数据，如有必要，从备份中恢复。在元数据被删除后，还可以删除 [.filename]#/boot/loader.conf# 中的 "
"`kern.geom.raid.enable=0` 条目。"

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:1039
#, fuzzy, no-wrap
msgid "GEOM Gate Network"
msgstr "GEOM (存储器几何)门网络"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1044
#, fuzzy
msgid ""
"GEOM provides a simple mechanism for providing remote access to devices such"
" as disks, CDs, and file systems through the use of the GEOM Gate network "
"daemon, ggated.  The system with the device runs the server daemon which "
"handles requests made by clients using ggatec.  The devices should not "
"contain any sensitive data as the connection between the client and the "
"server is not encrypted."
msgstr ""
"GEOM通过使用GEOM "
"Gate网络守护程序ggated提供了一种简单的机制，可以远程访问诸如磁盘、光盘和文件系统等设备。设备所在的系统运行服务器守护程序，处理客户端通过ggatec发出的请求。由于客户端和服务器之间的连接没有加密，所以设备不应包含任何敏感数据。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1048
#, fuzzy
msgid ""
"Similar to NFS, which is discussed in crossref:network-servers[network-"
"nfs,\"Network File System (NFS)\"], ggated is configured using an exports "
"file.  This file specifies which systems are permitted to access the "
"exported resources and what level of access they are offered.  For example, "
"to give the client `192.168.1.5` read and write access to the fourth slice "
"on the first SCSI disk, create [.filename]#/etc/gg.exports# with this line:"
msgstr ""
"与NFS类似的是，ggated也需要使用exports文件进行配置。该文件指定哪些系统被允许访问导出的资源以及它们所提供的访问级别。例如，如果要为客户机`192.168.1.5`提供对第一块SCSI磁盘的第四个分片的读写访问权限，请创建以下行的`/etc/gg.exports`文件："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1052
#, no-wrap
msgid "192.168.1.5 RW /dev/da0s4d\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1056
#, fuzzy
msgid ""
"Before exporting the device, ensure it is not currently mounted.  Then, "
"start ggated:"
msgstr "在导出设备之前，确保它当前未挂载。然后，启动 ggated："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1060
#, no-wrap
msgid "# ggated\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1064
#, fuzzy
msgid ""
"Several options are available for specifying an alternate listening port or "
"changing the default location of the exports file.  Refer to man:ggated[8] "
"for details."
msgstr "有几个选项可用于指定一个备用的监听端口或更改exports文件的默认位置。有关详细信息，请参阅man:ggated[8]。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1069
#, fuzzy
msgid ""
"To access the exported device on the client machine, first use `ggatec` to "
"specify the IP address of the server and the device name of the exported "
"device.  If successful, this command will display a `ggate` device name to "
"mount.  Mount that specified device name on a free mount point.  This "
"example connects to the [.filename]#/dev/da0s4d# partition on `192.168.1.1`,"
" then mounts [.filename]#/dev/ggate0# on [.filename]#/mnt#:"
msgstr ""
"要在客户机上访问导出设备，首先使用 `ggatec` 命令指定服务器的 IP 地址和导出设备的设备名称。如果成功，该命令将显示一个 `ggate` "
"设备名称以便挂载。在一个空闲的挂载点上挂载该指定的设备名称。本示例连接到 `192.168.1.1` 上的 "
"[.filename]#/dev/da0s4d# 分区，然后将 [.filename]#/dev/ggate0# 挂载到 "
"[.filename]#/mnt# 上："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1075
#, no-wrap
msgid ""
"# ggatec create -o rw 192.168.1.1 /dev/da0s4d\n"
"ggate0\n"
"# mount /dev/ggate0 /mnt\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1079
#, fuzzy
msgid ""
"The device on the server may now be accessed through [.filename]#/mnt# on "
"the client.  For more details about `ggatec` and a few usage examples, refer"
" to man:ggatec[8]."
msgstr ""
"现在可以通过客户端上的 `[/mnt]` 访问服务器上的设备。有关 `ggatec` 的更多详细信息和一些使用示例，请参考 man:ggatec[8]。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1084
#, fuzzy
msgid ""
"The mount will fail if the device is currently mounted on either the server "
"or any other client on the network.  If simultaneous access is needed to "
"network resources, use NFS instead."
msgstr "如果设备当前在服务器上或网络中的任何其他客户端上已挂载，挂载将失败。如果需要同时访问网络资源，请使用NFS。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1087
#, fuzzy
msgid ""
"When the device is no longer needed, unmount it with `umount` so that the "
"resource is available to other clients."
msgstr "当设备不再需要时，使用 `umount` 命令卸载它，以便资源可以供其他客户端使用。"

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:1089
#, fuzzy, no-wrap
msgid "Labeling Disk Devices"
msgstr "标记磁盘设备"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1095
#, fuzzy
msgid ""
"During system initialization, the FreeBSD kernel creates device nodes as "
"devices are found.  This method of probing for devices raises some issues.  "
"For instance, what if a new disk device is added via USB? It is likely that "
"a flash device may be handed the device name of [.filename]#da0# and the "
"original [.filename]#da0# shifted to [.filename]#da1#.  This will cause "
"issues mounting file systems if they are listed in [.filename]#/etc/fstab# "
"which may also prevent the system from booting."
msgstr ""
"在系统初始化过程中，FreeBSD内核会在找到设备时创建设备节点。此种探测设备的方法会带来一些问题。例如，如果通过USB添加了一个新的磁盘设备，可能会将一个闪存设备赋予设备名[.filename]#da0#，并且原始的[.filename]#da0#会变成[.filename]#da1#。这将导致挂载文件系统时出现问题，因为它们可能在[.filename]#/etc/fstab#中列出，这也可能导致系统无法启动。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1100
#, fuzzy
msgid ""
"One solution is to chain SCSI devices in order so a new device added to the "
"SCSI card will be issued unused device numbers.  But what about USB devices "
"which may replace the primary SCSI disk? This happens because USB devices "
"are usually probed before the SCSI card.  One solution is to only insert "
"these devices after the system has been booted.  Another method is to use "
"only a single ATA drive and never list the SCSI devices in "
"[.filename]#/etc/fstab#."
msgstr ""
"一种解决方案是按顺序链式连接SCSI设备，这样在SCSI卡上添加新设备时将发出未使用的设备编号。但是，对于可能替代主SCSI磁盘的USB设备会出现什么情况呢？这是因为USB设备通常是在SCSI卡之前进行探测的。一种解决方案是在系统启动后再插入这些设备。另一种方法是只使用单个ATA驱动器，并且在`/etc/fstab`文件中不列出SCSI设备。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1104
#, fuzzy
msgid ""
"A better solution is to use `glabel` to label the disk devices and use the "
"labels in [.filename]#/etc/fstab#.  Since `glabel` stores the label in the "
"last sector of a given provider, the label will remain persistent across "
"reboots.  By using this label as a device, the file-system may always be "
"mounted regardless of what device node it is accessed through."
msgstr ""
"更好的解决方案是使用`glabel`来为磁盘设备添加标签，并在`/etc/fstab`中使用这些标签。由于`glabel`将标签存储在给定提供程序的最后一个扇区中，标签将在重新启动后保持持久。通过使用此标签作为设备，文件系统可以始终挂载，而不管通过哪个设备节点访问。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1109
#, fuzzy
msgid ""
"`glabel` can create both transient and permanent labels. Only permanent "
"labels are consistent across reboots.  Refer to man:glabel[8] for more "
"information on the differences between labels."
msgstr ""
"`glabel`可以创建临时标签和永久标签。只有永久标签在重新启动后才能保持一致。\n"
"有关标签之间区别的更多信息，请参阅 man:glabel[8]。"

#. type: Title ===
#: documentation/content/en/books/handbook/geom/_index.adoc:1111
#, fuzzy, no-wrap
msgid "Label Types and Examples"
msgstr ""
"标签类型和示例\n"
"\n"
"在asciidoc中，标签用于为内容添加特定的语义信息。以下是一些常见的标签类型及其示例：\n"
"\n"
"1. 文字修饰标签：\n"
"\n"
"- \"+\"标签：用于添加强调效果，例如`+加粗+`会被显示为**加粗**。\n"
"- \"_\"标签：用于添加斜体效果，例如`_斜体_`会被显示为*斜体*。\n"
"- \"`\"标签：用于添加代码块，例如` `int i = 0;` `会被显示为`int i = 0;`。\n"
"\n"
"2. 特定语义标签：\n"
"\n"
"- \"NOTE\"标签：用于添加注意事项，例如`NOTE: 这是一个注意事项。`会被显示为```\n"
"注意: 这是一个注意事项。\n"
"```。\n"
"- \"TIP\"标签：用于添加提示信息，例如`TIP: 这是一个提示。`会被显示为```\n"
"提示: 这是一个提示。\n"
"```。\n"
"- \"WARNING\"标签：用于添加警告信息，例如`WARNING: 这是一个警告。`会被显示为```\n"
"警告: 这是一个警告。\n"
"```。\n"
"\n"
"这些只是一些常见的标签类型和示例，asciidoc还有其他更多的标签可供使用。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1119
#, fuzzy
msgid ""
"Permanent labels can be a generic or a file system label.  Permanent file "
"system labels can be created with man:tunefs[8] or man:newfs[8].  These "
"types of labels are created in a sub-directory of [.filename]#/dev#, and "
"will be named according to the file system type.  For example, UFS2 file "
"system labels will be created in [.filename]#/dev/ufs#.  Generic permanent "
"labels can be created with `glabel label`.  These are not file system "
"specific and will be created in [.filename]#/dev/label#."
msgstr ""
"永久标签可以是通用标签或文件系统标签。永久文件系统标签可以使用 man:tunefs[8] 或 man:newfs[8] 创建。这些类型的标签将在 "
"[.filename]#/dev# 的子目录中创建，并根据文件系统类型进行命名。例如，UFS2文件系统标签将被创建在 "
"[.filename]#/dev/ufs# 中。通用永久标签可以使用 `glabel label` 创建。这些标签与文件系统无关，将被创建在 "
"[.filename]#/dev/label#。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1123
#, fuzzy
msgid ""
"Temporary labels are destroyed at the next reboot.  These labels are created"
" in [.filename]#/dev/label# and are suited to experimentation.  A temporary "
"label can be created using `glabel create`."
msgstr ""
"临时标签会在下次重启时被销毁。这些标签是在 [.filename]#/dev/label# 中创建的，适合用于实验。可以使用 `glabel "
"create` 命令创建临时标签。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1125
#, fuzzy
msgid ""
"To create a permanent label for a UFS2 file system without destroying any "
"data, issue the following command:"
msgstr "要在不销毁任何数据的情况下为 UFS2 文件系统创建一个永久标签，执行以下命令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1129
#, no-wrap
msgid "# tunefs -L home /dev/da3\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1132
#, fuzzy
msgid ""
"A label should now exist in [.filename]#/dev/ufs# which may be added to "
"[.filename]#/etc/fstab#:"
msgstr "现在应该在`/dev/ufs`文件中存在一个标签，可以将其添加到`/etc/fstab`文件中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1136
#, no-wrap
msgid "/dev/ufs/home\t\t/home            ufs     rw              2      2\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1141
#, fuzzy
msgid "The file system must not be mounted while attempting to run `tunefs`."
msgstr "在尝试运行`tunefs`时，文件系统不能挂载。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1144
#, fuzzy
msgid "Now the file system may be mounted:"
msgstr "现在可以挂载文件系统："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1148
#, no-wrap
msgid "# mount /home\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1151
#, fuzzy
msgid ""
"From this point on, so long as the [.filename]#geom_label.ko# kernel module "
"is loaded at boot with [.filename]#/boot/loader.conf# or the `GEOM_LABEL` "
"kernel option is present, the device node may change without any ill effect "
"on the system."
msgstr ""
"从这一点开始，只要 [.filename]#geom_label.ko# 内核模块在启动时加载 "
"[.filename]#/boot/loader.conf# 或者 `GEOM_LABEL` "
"内核选项存在，设备节点可以随意更改而不会对系统产生任何不良影响。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1154
#, fuzzy
msgid ""
"File systems may also be created with a default label by using the `-L` flag"
" with `newfs`.  Refer to man:newfs[8] for more information."
msgstr "使用`newfs`命令的`-L`选项可以为文件系统创建一个默认标签。有关更多信息，请参阅man:newfs[8]。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1156
#, fuzzy
msgid "The following command can be used to destroy the label:"
msgstr "可以使用以下命令来删除该标签："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1160
#, no-wrap
msgid "# glabel destroy home\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1163
#, fuzzy
msgid ""
"The following example shows how to label the partitions of a boot disk."
msgstr "以下示例展示了如何为引导磁盘的分区添加标签。"

#. type: Block title
#: documentation/content/en/books/handbook/geom/_index.adoc:1164
#, fuzzy, no-wrap
msgid "Labeling Partitions on the Boot Disk"
msgstr "在引导磁盘上对分区进行标记"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1170
#, fuzzy
msgid ""
"By permanently labeling the partitions on the boot disk, the system should "
"be able to continue to boot normally, even if the disk is moved to another "
"controller or transferred to a different system.  For this example, it is "
"assumed that a single ATA disk is used, which is currently recognized by the"
" system as [.filename]#ad0#.  It is also assumed that the standard FreeBSD "
"partition scheme is used, with [.filename]#/#, [.filename]#/var#, "
"[.filename]#/usr# and [.filename]#/tmp#, as well as a swap partition."
msgstr ""
"通过对引导磁盘上的分区进行永久标记，即使将磁盘移动到另一个控制器或转移到其他系统，系统也应能够正常引导。在本例中，假设使用了一个单独的ATA磁盘，系统当前将其识别为[.filename]#ad0#。同时假设使用了标准的FreeBSD分区方案，包括[.filename]#/#、[.filename]#/var#、[.filename]#/usr#和[.filename]#/tmp#，以及一个交换分区。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1173
#, fuzzy
msgid ""
"Reboot the system, and at the man:loader[8] prompt, press kbd:[4] to boot "
"into single user mode.  Then enter the following commands:"
msgstr "重新启动系统，在 man:loader[8] 的提示符下，按下 kbd:[4] 键以进入单用户模式。然后输入以下命令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1187
#, no-wrap
msgid ""
"# glabel label rootfs /dev/ad0s1a\n"
"GEOM_LABEL: Label for provider /dev/ad0s1a is label/rootfs\n"
"# glabel label var /dev/ad0s1d\n"
"GEOM_LABEL: Label for provider /dev/ad0s1d is label/var\n"
"# glabel label usr /dev/ad0s1f\n"
"GEOM_LABEL: Label for provider /dev/ad0s1f is label/usr\n"
"# glabel label tmp /dev/ad0s1e\n"
"GEOM_LABEL: Label for provider /dev/ad0s1e is label/tmp\n"
"# glabel label swap /dev/ad0s1b\n"
"GEOM_LABEL: Label for provider /dev/ad0s1b is label/swap\n"
"# exit\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1192
#, fuzzy
msgid ""
"The system will continue with multi-user boot.  After the boot completes, "
"edit [.filename]#/etc/fstab# and replace the conventional device names, with"
" their respective labels.  The final [.filename]#/etc/fstab# will look like "
"this:"
msgstr ""
"系统将继续进行多用户引导。引导完成后，编辑[/etc/fstab]文件，将传统设备名称替换为对应的标签。最终的/etc/fstab文件如下所示："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1201
#, no-wrap
msgid ""
"# Device                Mountpoint      FStype  Options         Dump    Pass#\n"
"/dev/label/swap         none            swap    sw              0       0\n"
"/dev/label/rootfs       /               ufs     rw              1       1\n"
"/dev/label/tmp          /tmp            ufs     rw              2       2\n"
"/dev/label/usr          /usr            ufs     rw              2       2\n"
"/dev/label/var          /var            ufs     rw              2       2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1205
#, fuzzy
msgid ""
"The system can now be rebooted.  If everything went well, it will come up "
"normally and `mount` will show:"
msgstr "系统现在可以重新启动。如果一切顺利，它将正常启动并且 `mount` 命令将显示："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1214
#, no-wrap
msgid ""
"# mount\n"
"/dev/label/rootfs on / (ufs, local)\n"
"devfs on /dev (devfs, local)\n"
"/dev/label/tmp on /tmp (ufs, local, soft-updates)\n"
"/dev/label/usr on /usr (ufs, local, soft-updates)\n"
"/dev/label/var on /var (ufs, local, soft-updates)\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1222
#, fuzzy
msgid ""
"The man:glabel[8] class supports a label type for UFS file systems, based on"
" the unique file system id, `ufsid`.  These labels may be found in "
"[.filename]#/dev/ufsid# and are created automatically during system startup."
"  It is possible to use `ufsid` labels to mount partitions using "
"[.filename]#/etc/fstab#.  Use `glabel status` to receive a list of file "
"systems and their corresponding `ufsid` labels:"
msgstr ""
"man:glabel[8]类支持基于唯一文件系统ID（`ufsid`）的UFS文件系统的标签类型。这些标签可以在[.filename]#/dev/ufsid#中找到，并在系统启动时自动创建。可以使用`ufsid`标签使用[.filename]#/etc/fstab#挂载分区。使用`glabel"
" status`命令可以获取文件系统及其相应的`ufsid`标签列表。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1229
#, no-wrap
msgid ""
"% glabel status\n"
"                  Name  Status  Components\n"
"ufsid/486b6fc38d330916     N/A  ad4s1d\n"
"ufsid/486b6fc16926168e     N/A  ad4s1f\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1233
#, fuzzy
msgid ""
"In the above example, [.filename]#ad4s1d# represents [.filename]#/var#, "
"while [.filename]#ad4s1f# represents [.filename]#/usr#.  Using the `ufsid` "
"values shown, these partitions may now be mounted with the following entries"
" in [.filename]#/etc/fstab#:"
msgstr ""
"在上面的示例中，[.filename]#ad4s1d# 表示 [.filename]#/var#，而 [.filename]#ad4s1f# 表示 "
"[.filename]#/usr#。使用所示的 `ufsid` 值，这些分区可以通过以下条目在 [.filename]#/etc/fstab# "
"中进行挂载："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1238
#, no-wrap
msgid ""
"/dev/ufsid/486b6fc38d330916        /var        ufs        rw        2      2\n"
"/dev/ufsid/486b6fc16926168e        /usr        ufs        rw        2      2\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1241
#, fuzzy
msgid ""
"Any partitions with `ufsid` labels can be mounted in this way, eliminating "
"the need to manually create permanent labels, while still enjoying the "
"benefits of device name independent mounting."
msgstr "任何带有 `ufsid` 标签的分区都可以以这种方式挂载，从而无需手动创建永久标签，同时仍然可以享受设备名称无关挂载的好处。"

#. type: Title ==
#: documentation/content/en/books/handbook/geom/_index.adoc:1243
#, fuzzy, no-wrap
msgid "UFS Journaling Through GEOM"
msgstr "通过GEOM进行UFS日志记录"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1249
#, fuzzy
msgid ""
"Support for journals on UFS file systems is available on FreeBSD.  The "
"implementation is provided through the GEOM subsystem and is configured "
"using `gjournal`.  Unlike other file system journaling implementations, the "
"`gjournal` method is block based and not implemented as part of the file "
"system.  It is a GEOM extension."
msgstr ""
"在FreeBSD上，UFS文件系统支持期刊。该实现通过GEOM子系统提供，并使用`gjournal`进行配置。与其他文件系统期刊实现不同，`gjournal`方法是基于块的，并非作为文件系统的一部分实现，而是GEOM的扩展功能。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1252
#, fuzzy
msgid ""
"Journaling stores a log of file system transactions, such as changes that "
"make up a complete disk write operation, before meta-data and file writes "
"are committed to the disk.  This transaction log can later be replayed to "
"redo file system transactions, preventing file system inconsistencies."
msgstr ""
"日志记录存储了文件系统事务的日志，例如在元数据和文件写入提交到磁盘之前所做的完整磁盘写入操作的更改。这个事务日志可以在以后重新播放，以重新执行文件系统事务，从而防止文件系统不一致性。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1257
#, fuzzy
msgid ""
"This method provides another mechanism to protect against data loss and "
"inconsistencies of the file system.  Unlike Soft Updates, which tracks and "
"enforces meta-data updates, and snapshots, which create an image of the file"
" system, a log is stored in disk space specifically for this task.  For "
"better performance, the journal may be stored on another disk.  In this "
"configuration, the journal provider or storage device should be listed after"
" the device to enable journaling on."
msgstr ""
"这种方法提供了另一种机制来保护文件系统的数据丢失和一致性。与跟踪和执行元数据更新的软更新以及创建文件系统镜像的快照不同，日志是专门用来存储这个任务的磁盘空间。为了提高性能，日志可以存储在另一个磁盘上。在这种配置中，日志提供者或存储设备应该在设备后面列出，以启用日志记录。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1260
#, fuzzy
msgid ""
"The [.filename]#GENERIC# kernel provides support for `gjournal`.  To "
"automatically load the [.filename]#geom_journal.ko# kernel module at boot "
"time, add the following line to [.filename]#/boot/loader.conf#:"
msgstr ""
"通用内核 [.filename]#GENERIC# 提供了对 `gjournal` 的支持。为了在启动时自动加载 "
"[.filename]#geom_journal.ko# 内核模块，将以下行添加到 [.filename]#/boot/loader.conf# "
"文件中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1264
#, no-wrap
msgid "geom_journal_load=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1267
#, fuzzy
msgid ""
"If a custom kernel is used, ensure the following line is in the kernel "
"configuration file:"
msgstr "如果使用自定义内核，请确保以下行在内核配置文件中："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1271
#, no-wrap
msgid "options\tGEOM_JOURNAL\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1275
#, fuzzy
msgid ""
"Once the module is loaded, a journal can be created on a new file system "
"using the following steps.  In this example, [.filename]#da4# is a new SCSI "
"disk:"
msgstr "一旦模块被加载，可以按照以下步骤在新的文件系统上创建日志。 在这个例子中，`.filename` `da4` 是一个新的SCSI磁盘："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1280
#, no-wrap
msgid ""
"# gjournal load\n"
"# gjournal label /dev/da4\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1283
#, fuzzy
msgid ""
"This will load the module and create a [.filename]#/dev/da4.journal# device "
"node on [.filename]#/dev/da4#."
msgstr "这将加载模块并在 `/dev/da4` 上创建一个 `journal` 设备节点。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1285
#, fuzzy
msgid ""
"A UFS file system may now be created on the journaled device, then mounted "
"on an existing mount point:"
msgstr "现在可以在有日志记录的设备上创建一个UFS文件系统，然后将其挂载到现有的挂载点："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1290
#, no-wrap
msgid ""
"# newfs -O 2 -J /dev/da4.journal\n"
"# mount /dev/da4.journal /mnt\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/geom/_index.adoc:1296
#, fuzzy
msgid ""
"In the case of several slices, a journal will be created for each individual"
" slice.  For instance, if [.filename]#ad4s1# and [.filename]#ad4s2# are both"
" slices, then `gjournal` will create [.filename]#ad4s1.journal# and "
"[.filename]#ad4s2.journal#."
msgstr ""
"在多个切片的情况下，每个单独的切片都会创建一个日志。例如，如果 [.filename]#ad4s1# 和 [.filename]#ad4s2# "
"都是切片，那么 `gjournal` 将创建 [.filename]#ad4s1.journal# 和 "
"[.filename]#ad4s2.journal#。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1302
#, fuzzy
msgid ""
"Journaling may also be enabled on current file systems by using `tunefs`.  "
"However, _always_ make a backup before attempting to alter an existing file "
"system.  In most cases, `gjournal` will fail if it is unable to create the "
"journal, but this does not protect against data loss incurred as a result of"
" misusing `tunefs`.  Refer to man:gjournal[8] and man:tunefs[8] for more "
"information about these commands."
msgstr ""
"使用 `tunefs` 可以在当前的文件系统上启用日志。 但是，在尝试更改现有文件系统之前，\"始终\"创建备份。 "
"大多数情况下，如果无法创建日志，`gjournal` 将无法成功，但这并不能防止因错误使用 `tunefs` 导致的数据丢失。 "
"有关这些命令的更多信息，请参阅 man:gjournal[8] 和 man:tunefs[8]。"

#. type: Plain text
#: documentation/content/en/books/handbook/geom/_index.adoc:1304
#, fuzzy
msgid ""
"It is possible to journal the boot disk of a FreeBSD system.  Refer to the "
"article extref:{gjournal-desktop}[Implementing UFS Journaling on a Desktop "
"PC] for detailed instructions."
msgstr ""
"可以将FreeBSD系统的启动磁盘进行日志记录。请参考文章[gjournal桌面实现][Implementing UFS Journaling on a"
" Desktop PC]中的详细说明。"
