<!DOCTYPE html>
<html class="theme-light" lang="zh-cn-auto">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="FreeBSD 提供了两种互补的技术来安装第三方软件：FreeBSD Ports Collection 用于从源代码安装，而包（packages）用于从预编译的二进制文件安装。"/>
  <meta name="keywords" content="91, 34, 112, 111, 114, 116, 115, 34, 44, 32, 34, 99, 111, 108, 108, 101, 99, 116, 105, 111, 110, 34, 44, 32, 34, 112, 107, 103, 34, 44, 32, 34, 112, 111, 117, 100, 114, 105, 101, 114, 101, 34, 44, 32, 34, 109, 97, 110, 97, 103, 101, 109, 101, 110, 116, 34, 93"/>
  <meta name="copyright" content="1995-2024 The FreeBSD Foundation" />
  <link rel="canonical" href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/" />

  <title>第四章 安装应用程序：软件包和 Ports |  FreeBSD Documentation Portal</title>

  <meta name="theme-color" content="#790000">
  <meta name="color-scheme" content="system light dark high-contrast">

    <link rel="shortcut icon" href="https://free.bsd-doc.org/favicon.ico">
    <link rel="stylesheet" href="/styles/main.min.css">
    <link rel="stylesheet" href="https://free.bsd-doc.org/css/font-awesome-min.css">
    <script defer src="/js/theme-chooser.min.js"></script>
    <script defer src="/js/copy-clipboard.min.js"></script>
    <script defer src="/js/search.min.js"></script>

  
  
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:domain" content="docs.FreeBSD.org"/>
    <meta name="twitter:site" content="@freebsd"/>
    <meta name="twitter:url" content="https://twitter.com/freebsd"/>
    <meta property="og:title" content="第四章 安装应用程序：软件包和 Ports" />
    <meta property="og:description" content="FreeBSD 提供了两种互补的技术来安装第三方软件：FreeBSD Ports Collection 用于从源代码安装，而包（packages）用于从预编译的二进制文件安装。" />
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://free.bsd-doc.orgfavicon.ico"/>
    <meta property="og:image:alt" content="FreeBSD Logo">
    <meta property="og:locale" content="zh-cn-auto" />
    <meta property="og:url" content="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/" />
    <meta property="og:site_name" content="FreeBSD Documentation Portal" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Article",
        "url": "https:\/\/free.bsd-doc.org\/zh-cn-auto\/books\/handbook\/ports\/",
        "name": "FreeBSD Documentation Portal",
        "headline": "FreeBSD Documentation Portal",
        "description": "FreeBSD Documentation Portal"
      }
    </script>
    

  
</head>


  <body>
    <header>
  <div class="header-container">
    <div class="logo-menu-bars-container">
      <a href="https://free.bsd-doc.org" class="logo">
        <img src="https://free.bsd-doc.org/images/FreeBSD-monochromatic.svg" width="160" height="50" alt="FreeBSD logo" />
      </a>
      <label class="menu-bars" for="menu-bars">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </label>
    </div>
    <input id="menu-bars" type="checkbox" />
    
    <div class="search-donate-container">
      
      <div class="donate">
        <a href="https://github.com/fierceX/freebsd-doc-cn" target="_blank">
          <span class="heart">♥</span>
          GitHub
        </a>
      </div>
    </div>
  </div>
</header>

    
<input type="checkbox" class="hidden toggle" id="menu-control">
<main class="main-wrapper-book">
  <a id="top"></a>
  
  <aside class="book-menu">
    <div class="book-menu-content">
      <input id="search-book" type="text" placeholder="Search" aria-label="Search" maxlength="128" />
      <nav id="MenuContents">
        
  <ul>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ada319c45e780947f82b569049480cc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-8ada319c45e780947f82b569049480cc"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/">
              前言
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-audience">预期读者</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-changes-from4">第四版</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-changes-from3">第三版</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-changes-from2">第二版（2004 年）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-changes">第一版（2001 年）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-overview">本书的组织结构</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-conv">本书中使用的约定</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/preface/#preface-acknowledgements">致谢</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-32a83d18a326852a8d9ae2582360bbc8" class="toggle"  />
          <label  for="chapter-32a83d18a326852a8d9ae2582360bbc8"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/parti/">
              第一部分：入门指南
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a4909db05d872d16d5be86a57cbc2dc7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a4909db05d872d16d5be86a57cbc2dc7"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/introduction/">
              第一章 引言
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/introduction/#introduction-synopsis">1.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/introduction/#nutshell">1.2. 欢迎来到 FreeBSD ！</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/introduction/#history">1.3. 关于 FreeBSD 项目</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3c2455cadf89eadd3f6e77461085d5e9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3c2455cadf89eadd3f6e77461085d5e9"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/">
              第二章 安装 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-synopsis">2.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-hardware">2.2. 最低硬件要求</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-pre">2.3. 安装前的任务</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-start">2.4. 开始安装</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#using-bsdinstall">2.5. 使用 bsdinstall</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-partitioning">2.6. 分配磁盘空间</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-fetching-distribution">2.7. 获取分发文件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-post">2.8. 网络接口，账户，时区，服务和加固</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#bsdinstall-install-trouble">2.9. 故障排除</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bsdinstall/#using-live-cd">2.10. 使用 Live CD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-709481b75d22ad36960f7ac166b3306c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-709481b75d22ad36960f7ac166b3306c"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/">
              第三章. FreeBSD 基础知识
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#basics-synopsis">3.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#consoles">3.2. 虚拟控制台和终端</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#users-synopsis">3.3. 用户和基本账户管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#permissions">3.4. 权限</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#dirstructure">3.5. 目录结构</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#disk-organization">3.6. 磁盘组织</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#mount-unmount">3.7. 挂载和卸载文件系统</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#basics-processes">3.8. 进程和守护进程</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#shells">3.9. Shells</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#editors">3.10. 文本编辑器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#basics-devices">3.11. 设备和设备节点</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics/#basics-more-information">3.12. 手册页</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-58c050d31a1fbecd859248dacefeb567" class="toggle"  checked  />
          <label  class="icon cursor"  for="chapter-58c050d31a1fbecd859248dacefeb567"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/">
              第四章 安装应用程序：软件包和 Ports
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-synopsis">4.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-overview">4.2. 软件安装概述</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-finding-applications">4.3. 寻找软件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#pkgng-intro">4.4. 使用 pkg 进行二进制包管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-using">4.5. 使用 Ports 集合</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-poudriere">4.6. 使用 poudriere 构建软件包</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-nextsteps">4.7. 安装后的考虑事项</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ports/#ports-broken">4.8. 处理损坏的 ports</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e5a000ce7f50680a180e2c1b83c121bc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e5a000ce7f50680a180e2c1b83c121bc"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11/">
              第五章 X Window 系统
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11/#x11-synopsis">5.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11/#x-install">5.2. 安装 Xorg</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11/#x-graphic-card-drivers">5.3. 显卡驱动程序</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11/#x-config">5.4. Xorg 配置</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11/#x-fonts">5.5. 在 Xorg 中使用字体</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-235af08fb87fd7a58003348706d2111d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-235af08fb87fd7a58003348706d2111d"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/">
              第六章 Wayland
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-synopsis">6.1. Wayland 概述</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-wayfire">6.2. Wayfire 合成器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-hikari">6.3. Hikari 合成器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-sway">6.4. Sway 合成器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-xwayland">6.5. 使用 Xwayland</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-remotedesktop">6.6. 使用 VNC 进行远程桌面访问</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-ly">6.7. Wayland 登录管理器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wayland/#wayland-utilities">6.8. 有用的工具</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-4de18483dde20bf9ed0024176afd09da" class="toggle"  />
          <label  class="icon cursor"  for="chapter-4de18483dde20bf9ed0024176afd09da"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/">
              第 7 章 网络
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#network-synopsis">7.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#config-network-setup">7.2. 设置网络</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#config-network-connection">7.3. 有线网络</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#network-wireless">7.4. 无线网络</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#hostname">7.5. 主机名</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#dns">7.6. DNS</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network/#troubleshooting">7.7. 故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-5eb30759c3a2873e716dc31d7760054c" class="toggle"  />
          <label  for="chapter-5eb30759c3a2873e716dc31d7760054c"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/partii/">
              第二部分：常见任务
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-c96504f017c56f4bc7f71548cccf5382" class="toggle"  />
          <label  class="icon cursor"  for="chapter-c96504f017c56f4bc7f71548cccf5382"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/">
              第 8 章 桌面环境
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-synopsis">8.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-environments">8.2. 桌面环境</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-browsers">8.3. 浏览器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-development">8.4. 开发工具</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-productivity">8.5. 桌面办公生产力</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-viewers">8.6. 文档查看器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/desktop/#desktop-finance">8.7. 金融</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e1898af36aaacc168e13b673d25b908f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e1898af36aaacc168e13b673d25b908f"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/">
              第 9 章 多媒体
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/#multimedia-synopsis">9.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/#sound-setup">9.2. 设置声卡</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/#audio-ports">9.3. 音频播放器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/#video-ports">9.4. 视频播放器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/#conferencing-meetings">9.5. 会议和会议</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/multimedia/#scanners">9.6. 图像扫描仪</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6926664836e63c5cae4b2fa60855f91d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-6926664836e63c5cae4b2fa60855f91d"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/">
              第 10 章 配置 FreeBSD 内核
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/#kernelconfig-synopsis">10.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/#kernelconfig-custom-kernel">10.2. 为什么要构建自定义内核？</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/#kernelconfig-devices">10.3. 查找系统硬件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/#kernelconfig-config">10.4. 配置文件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/#kernelconfig-building">10.5. 构建和安装自定义内核</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/kernelconfig/#kernelconfig-trouble">10.6. 如果出现问题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-19d36bd70a320268f0ea1f66e4f3e224" class="toggle"  />
          <label  class="icon cursor"  for="chapter-19d36bd70a320268f0ea1f66e4f3e224"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/">
              第 11 章 打印
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/#printing-quick-start">11.1. 快速入门</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/#printing-connections">11.2. 打印机连接</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/#printing-pdls">11.3. 常见的页面描述语言</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/#printing-direct">11.4. 直接打印</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/#printing-lpd">11.5. LPD （ Line Printer Daemon ）是一种用于打印机的网络协议。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/printing/#printing-other">11.6. 其他打印系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/linuxemu/">
              第 12 章 . Linux 二进制兼容性
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/linuxemu/#linuxemu-synopsis">12.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/linuxemu/#linuxemu-lbc-install">12.2. 配置 Linux 二进制兼容性</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/linuxemu/#linux-userlands">12.3. Linux 用户空间</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/linuxemu/#linuxemu-advanced">12.4. 高级主题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-af234c193ce95c480af0ff5ec3f32f5c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-af234c193ce95c480af0ff5ec3f32f5c"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/">
              第 13 章 WINE
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#wine-synopsis">13.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#wine-overview-concepts">13.2. WINE 概述与概念</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#installing-wine-on-freebsd">13.3. 在 FreeBSD 上安装 WINE</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#running-first-wine-program">13.4. 在 FreeBSD 上运行第一个 WINE 程序</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#configuring-wine-installation">13.5. 配置 WINE 安装</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#wine-management-guis">13.6. WINE 管理图形界面</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#wine-in-multi-user-os-installations">13.7. 在多用户的 FreeBSD 安装中使用 WINE</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/wine/#wine-on-os-faq">13.8. 在 FreeBSD 上使用 WINE 的常见问题解答</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-51416fdea9d5a1dfa1c2718cd825213a" class="toggle"  />
          <label  for="chapter-51416fdea9d5a1dfa1c2718cd825213a"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/partiii/">
              第三部分：系统管理
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-532d0380ba66d66e033765a0b6930ee7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-532d0380ba66d66e033765a0b6930ee7"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/">
              第 14 章 配置、服务、日志和电源管理
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#config-synopsis">14.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#configtuning-configfiles">14.2. 配置文件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#configtuning-rcd">14.3. 在 FreeBSD 中管理服务</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#cron-periodic">14.4. Cron 和周期性任务</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#configtuning-syslog">14.5. 配置系统日志</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#acpi-overview">14.6. 功耗和资源管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/config/#adding-swap-space">14.7. 添加交换空间</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-d05f41680fb7e3d68b354ae03de368b1" class="toggle"  />
          <label  class="icon cursor"  for="chapter-d05f41680fb7e3d68b354ae03de368b1"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/boot/">
              第 15 章 . FreeBSD 的启动过程
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/boot/#boot-synopsis">15.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/boot/#boot-introduction">15.2. FreeBSD 引导过程</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/boot/#device-hints">15.3. 设备提示</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/boot/#boot-shutdown">15.4. 关机序列</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-513e8e407c57354df334059688e9b60a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-513e8e407c57354df334059688e9b60a"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/">
              第 16 章 安全
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-synopsis">16.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-intro">16.2. 介绍</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#sec-accounts">16.3. 保护账户安全</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-ids">16.4. 入侵检测系统（ IDS ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-secure-levels">16.5. 安全级别</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-file-flags">16.6. 文件标志</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#openssh">16.7. OpenSSH 是一个用于安全远程登录和文件传输的开源软件套件。它提供了加密的通信通道，以防止未经授权的访问和数据泄露。 OpenSSH 支持 SSH 协议，可以在不同的操作系统上运行，并且具有强大的身份验证和加密功能。它被广泛用于管理远程服务器和保护敏感数据的传输。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#openssl">16.8. OpenSSL 是一个开源的软件库，提供了一套用于安全通信的加密工具。它支持多种加密算法和协议，包括 SSL 和 TLS 。 OpenSSL 广泛用于网络通信、数字证书管理和数据加密等领域。它是一个功能强大且可靠的工具，被广泛应用于各种计算机系统和应用程序中。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#kerberos5">16.9. Kerberos 是一种网络身份验证协议，用于在计算机网络中验证用户的身份。它使用加密技术来确保通信的安全性，并防止身份伪造和中间人攻击。 Kerberos 还提供了单点登录功能，允许用户在一次身份验证后访问多个网络服务。它是计算机领域中常用的身份验证解决方案之一。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#tcpwrappers">16.10. TCP 包装器（ TCP Wrappers ）是一种网络访问控制工具，用于在 TCP/IP 网络上限制对特定服务的访问。它通过检查远程主机的 IP 地址和主机名来决定是否允许连接到受保护的服务。 TCP 包装器可以用于增强网络安全性，防止未经授权的访问和恶意活动。它通常与网络服务（如 SSH 、 FTP 和 Telnet ）一起使用，以提供对这些服务的访问控制。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#fs-acl">16.11. 访问控制列表</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#capsicum">16.12. Capsicum 是一种辣椒植物，属于茄科。它的果实通常被用作调味品和食材，具有辛辣的味道。 Capsicum 也被用于药用目的，具有抗氧化和抗炎作用。它含有丰富的维生素 C 和维生素 A ，对于保持健康非常重要。 Capsicum 在烹饪中被广泛使用，可以用于制作各种菜肴和调味品。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-accounting">16.13. 进程账户</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-resourcelimits">16.14. 资源限制</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-pkg">16.15. 监控第三方安全问题</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/security/#security-advisories">16.16. FreeBSD 安全公告</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0f7d2858504c83a029928c048d394e2a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0f7d2858504c83a029928c048d394e2a"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/">
              第 17 章 监狱和容器
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#jails-synopsis">17.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#jail-types">17.2. 监狱类型</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#host-configuration">17.3. 主机配置</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#classic-jail">17.4. 经典监狱（厚重监狱）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#thin-jail">17.5. 薄型监狱</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#jail-management">17.6. 监狱管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#jail-upgrading">17.7. 监狱升级</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#jail-resource-limits">17.8. 监狱资源限制</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/jails/#jail-managers-and-containers">17.9. 监狱管理员和容器</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-15be125ce5997f51c5499e3a0dee6c2c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-15be125ce5997f51c5499e3a0dee6c2c"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/">
              第 18 章 强制访问控制
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-synopsis">18.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-inline-glossary">18.2. 关键术语</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-understandlabel">18.3. 理解 MAC 标签</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-planning">18.4. 规划安全配置</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-policies">18.5. 可用的 MAC 策略</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-userlocked">18.6. 用户锁定</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-implementing">18.7. 在 MAC 监狱中的 Nagios</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mac/#mac-troubleshoot">18.8. 解决 MAC 框架的问题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3f7e8d763b17c7d0c44c60505cf0feea" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3f7e8d763b17c7d0c44c60505cf0feea"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/audit/">
              第 19 章 安全事件审计
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/audit/#audit-synopsis">19.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/audit/#audit-inline-glossary">19.2. 关键术语</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/audit/#audit-config">19.3. 审计配置</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/audit/#audit-administration">19.4. 使用审计跟踪功能</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7bb1cb2287cd08a3672cc878e604f0d0" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7bb1cb2287cd08a3672cc878e604f0d0"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/">
              第 20 章 存储
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#disks-synopsis">20.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#disks-adding">20.2. 添加磁盘</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#disks-growing">20.3. 调整和扩展磁盘大小</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#usb-disks">20.4. USB 存储设备</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#creating-cds">20.5. 创建和使用 CD 媒体</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#creating-dvds">20.6. 创建和使用 DVD 媒体</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#floppies">20.7. 创建和使用软盘</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#using-ntfs">20.8. 使用 NTFS 磁盘</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#backup-basics">20.9. 备份基础知识</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#disks-virtual">20.10. 内存磁盘</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#snapshots">20.11. 文件系统快照</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#quotas">20.12. 磁盘配额</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#disks-encrypting">20.13. 加密磁盘分区</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#swap-encrypting">20.14. 加密交换分区</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/disks/#disks-hast">20.15. 高可用存储（ Highly Available Storage ， HAST ）</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-dec5fc4f0100e5030db0fb188d8d4b2f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-dec5fc4f0100e5030db0fb188d8d4b2f"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/">
              第 21 章 GEOM ：模块化磁盘转换框架
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-synopsis">21.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-striping">21.2. RAID0 - 条带化</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-mirror">21.3. RAID1 - 镜像</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-raid3">21.4. RAID3 - 以字节为单位的条带化和专用奇偶校验</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-graid">21.5. 软件 RAID 设备</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-ggate">21.6. GEOM Gate Network 是一种计算机网络技术。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-glabel">21.7. 标记磁盘设备</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/geom/#geom-gjournal">21.8. 通过 GEOM 实现的 UFS 日志记录</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7f1657a05627dd16bad31d4c7f675604" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7f1657a05627dd16bad31d4c7f675604"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/">
              第 22 章 Z 文件系统（ ZFS ）
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-differences">22.1. ZFS 有何不同之处</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-quickstart">22.2. 快速入门指南</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-zpool">22.3. <code>zpool</code> 管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-zfs">22.4. <code>zfs</code> 管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-zfs-allow">22.5. 委派管理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-advanced">22.6. 高级主题</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-links">22.7. 进一步资源</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/zfs/#zfs-term">22.8. ZFS 功能和术语</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-4c6bf6828e601b79edb2813329ac6604" class="toggle"  />
          <label  class="icon cursor"  for="chapter-4c6bf6828e601b79edb2813329ac6604"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/filesystems/">
              第 23 章 其他文件系统
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/filesystems/#filesystems-synopsis">23.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/filesystems/#filesystems-linux">23.2. Linux® 文件系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-ae23289d4b6415f3f878893f9d3ef9b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-ae23289d4b6415f3f878893f9d3ef9b8"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/">
              第 24 章 虚拟化
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-synopsis">24.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-guest-parallelsdesktop">24.2. 在 Parallels Desktop for macOS® 上作为客户机的 FreeBSD</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-guest-vmware">24.3. 在 macOS 上使用 VMware Fusion 作为客户机的 FreeBSD</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-guest-virtualbox">24.4. 在 VirtualBox™ 上作为客户机的 FreeBSD</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-host-virtualbox">24.5. 使用 VirtualBox™ 将 FreeBSD 作为主机</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-host-bhyve">24.6. 使用 bhyve 作为 FreeBSD 主机</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/virtualization/#virtualization-host-xen">24.7. FreeBSD 作为 Xen™ 主机</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-b279d2b738963a45a059268d2fae00d5" class="toggle"  />
          <label  class="icon cursor"  for="chapter-b279d2b738963a45a059268d2fae00d5"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/l10n/">
              第 25 章 本地化 - i18n/L10n 的使用和设置
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/l10n/#l10n-synopsis">25.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/l10n/#using-localization">25.2. 使用本地化</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/l10n/#l10n-compiling">25.3. 寻找国际化应用程序</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/l10n/#lang-setup">25.4. 特定语言的区域配置</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9e3f99bd76c861ab2e9a5f31ac421842" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9e3f99bd76c861ab2e9a5f31ac421842"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/">
              第 26 章 更新和升级 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#updating-upgrading-synopsis">26.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate">26.2. FreeBSD 更新</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#updating-bootcode">26.3. 更新引导代码</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#updating-upgrading-documentation">26.4. 更新文档集合</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#current-stable">26.5. 跟踪开发分支</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#makeworld">26.6. 从源代码更新 FreeBSD</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#small-lan">26.7. 多台机器的追踪</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/cutting-edge/#building-on-non-freebsd-hosts">26.8. 在非 FreeBSD 主机上构建</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3ba999091575eb04ae88235cd0fb1afa" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3ba999091575eb04ae88235cd0fb1afa"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/dtrace/">
              第 27 章 DTrace
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/dtrace/#dtrace-synopsis">27.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/dtrace/#dtrace-implementation">27.2. 实现差异</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/dtrace/#dtrace-enable">27.3. 启用 DTrace 支持</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/dtrace/#dtrace-using">27.4. 使用 DTrace</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-bdb217202a0a3eef4571dd1fcd50863c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-bdb217202a0a3eef4571dd1fcd50863c"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/usb-device-mode/">
              第 28 章 USB 设备模式 /USB OTG
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/usb-device-mode/#usb-device-mode-synopsis">28.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/usb-device-mode/#usb-device-mode-terminals">28.2. USB 虚拟串口</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/usb-device-mode/#usb-device-mode-network">28.3. USB 设备模式网络接口</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/usb-device-mode/#usb-device-mode-storage">28.4. USB 虚拟存储设备</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6d4439926bb106ac084ecc88cfd3cfa4" class="toggle"  />
          <label  for="chapter-6d4439926bb106ac084ecc88cfd3cfa4"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/partiv/">
              第四部分：网络通信
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-05a353fcb61d8e035f7c43e14725766e" class="toggle"  />
          <label  class="icon cursor"  for="chapter-05a353fcb61d8e035f7c43e14725766e"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/">
              第 29 章 串行通信
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/#serial-synopsis">29.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/#serial">29.2. 串行术语和硬件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/#term">29.3. 终端</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/#dialup">29.4. 拨入服务</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/#dialout">29.5. 拨出服务</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/serialcomms/#serialconsole-setup">29.6. 设置串行控制台</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ppp-and-slip/">
              第 30 章 PPP
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis">30.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ppp-and-slip/#userppp">30.2. 配置 PPP</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ppp-and-slip/#ppp-troubleshoot">30.3. PPP 连接故障排除</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ppp-and-slip/#pppoe">30.4. 使用以太网上的点对点协议（ PPP over Ethernet ， PPPoE ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/ppp-and-slip/#pppoa">30.5. 使用 ATM 上的 PPP （ PPPoA ）</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9d023b545804f197d195dd9412749943" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9d023b545804f197d195dd9412749943"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/">
              第 31 章 电子邮件
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#mail-synopsis">31.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#mail-using">31.2. 邮件组件</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#dragonFly-mail-agent">31.3. DragonFly Mail Agent （ DMA ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#sendmail">31.4. Sendmail 是一种用于电子邮件传输的开源软件。它是一种邮件传输代理（ MTA ），用于将电子邮件从发送者的计算机发送到接收者的计算机。 Sendmail 具有广泛的功能和灵活性，可以在各种操作系统上运行，并且被广泛用于互联网上的电子邮件传输。它支持多种邮件协议和格式，并提供了丰富的配置选项，使用户能够根据自己的需求进行定制。 Sendmail 是互联网上最早的邮件传输代理之一，至今仍然被广泛使用。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#mail-changingmta">31.5. 更改邮件传输代理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#mail-agents">31.6. 邮件用户代理</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mail/#mail-advanced">31.7. 高级主题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-42b19e05d30c4135c74b9878818747a9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-42b19e05d30c4135c74b9878818747a9"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/">
              第 32 章 网络服务器
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-servers-synopsis">32.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-inetd">32.2. inetd 超级服务器</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-nfs">32.3. 网络文件系统（ NFS ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-nis">32.4. 网络信息系统（ NIS ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-ldap">32.5. 轻量级目录访问协议（ LDAP ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-dhcp">32.6. 动态主机配置协议（ DHCP ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-dns">32.7. 域名系统（ DNS ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-apache">32.8. Apache HTTP Server 是一个开源的 Web 服务器软件，它是目前最流行的 Web 服务器之一。它由 Apache 软件基金会开发和维护，可运行在多种操作系统上，包括 Windows 、 Linux 和 Unix 等。 Apache HTTP Server 具有高度可扩展性和灵活性，支持多种模块和插件，可以实现各种功能，如动态内容生成、虚拟主机配置和安全性控制等。它还提供了丰富的文档和社区支持，使得用户能够轻松地学习和使用。无论是个人网站还是大型企业应用， Apache HTTP Server 都是一个可靠和强大的选择。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-ftp">32.9. 文件传输协议（ FTP ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-samba">32.10. 适用于 Microsoft® Windows® 客户端的文件和打印服务（ Samba ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-ntp">32.11. 使用 NTP 进行时钟同步</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/network-servers/#network-iscsi">32.12. iSCSI 发起者和目标配置</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9554a5177d00d0e87ada408809a1fc67" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9554a5177d00d0e87ada408809a1fc67"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/">
              第 33 章 防火墙
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/#firewalls-intro">33.1. 简介</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/#firewalls-concepts">33.2. 防火墙概念</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/#firewalls-pf">33.3. PF 可以有多种含义，根据上下文不同可能指：</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/#firewalls-ipfw">33.4. IPFW 是指 Internet 协议防火墙，是一种用于网络安全的技术。它可以通过过滤和监控网络流量来保护计算机和网络免受恶意攻击和未经授权的访问。 IPFW 可以根据预先定义的规则集来控制网络流量的进出，以实现对网络连接的管理和保护。它是一种常见的防火墙解决方案，被广泛应用于企业和个人网络环境中。</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/#firewalls-ipf">33.5. IPFILTER （ IPF ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/firewalls/#firewalls-blacklistd">33.6. 黑名单服务</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9903a1d844ed803a436595e93ec33572" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9903a1d844ed803a436595e93ec33572"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/">
              第 34 章 . 高级网络
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#advanced-networking-synopsis">34.1. 概要</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-routing">34.2. 网关和路由</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#configtuning-virtual-hosts">34.3. 虚拟主机</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-advanced-wireless">34.4. 无线高级认证</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#wireless-ad-hoc-mode">34.5. 无线自组网模式</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-usb-tethering">34.6. USB 网络共享</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-bluetooth">34.7. 蓝牙</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-bridging">34.8. 桥接</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-aggregation">34.9. 链路聚合和故障转移</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-diskless">34.10. 使用 PXE 进行无盘操作</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#carp">34.11. 常见地址冗余协议（ CARP ）</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/advanced-networking/#network-vlan">34.12. 虚拟局域网（ VLANs ）</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ca29f99c249993ee9234cb4632af7a5" class="toggle"  />
          <label  for="chapter-8ca29f99c249993ee9234cb4632af7a5"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/partv/">
              第五部分. 附录
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0229d553ebf23ffeb945be6f32836221" class="toggle"  />
          <label  for="chapter-0229d553ebf23ffeb945be6f32836221"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/mirrors/">
              附录 A. 获取 FreeBSD
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-743c99fa278b8138914ff018e40c9231" class="toggle"  />
          <label  class="icon cursor"  for="chapter-743c99fa278b8138914ff018e40c9231"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bibliography/">
              附录 B. 参考文献
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bibliography/#bibliography-freebsd">B.1. FreeBSD 参考文献</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bibliography/#bibliography-security">B.2. 安全参考</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bibliography/#bibliography-history">B.3. UNIX® 历史</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/bibliography/#bibliography-journals">B.4. 期刊、杂志和期刊</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-de7eade4b8b64f298c0cbac44c2278da" class="toggle"  />
          <label  class="icon cursor"  for="chapter-de7eade4b8b64f298c0cbac44c2278da"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/eresources/">
              附录 C. 互联网资源
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/eresources/#eresources-www">C.1. 网站</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/eresources/#eresources-mail">C.2. 邮件列表</a></li>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/eresources/#eresources-news">C.3. Usenet 新闻组</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26" class="toggle"  />
          <label  class="icon cursor"  for="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/pgpkeys/">
              附录 D. OpenPGP 密钥
            </a>
            
            
  <ul>
    <li><a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/pgpkeys/#pgpkeys-officers">D.1. 官员们</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-2a8deedf14429128049622ec007c9d3f" class="toggle"  />
          <label  for="chapter-2a8deedf14429128049622ec007c9d3f"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/glossary/">
              FreeBSD 词汇表
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-110dbb242491bf200e51e76db171f670" class="toggle"  />
          <label  for="chapter-110dbb242491bf200e51e76db171f670"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/colophon/">
              后记
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-caffbcba74982e4b26b9263ac0232bc3" class="toggle"  />
          <label  for="chapter-caffbcba74982e4b26b9263ac0232bc3"><a role="button"></a></label>

          
            
            <a href="https://free.bsd-doc.org/zh-cn-auto/books/handbook/introduction/">
              
            </a>
            
            
          

        
      </li>
    
      <li>
        
      </li>
    
  </ul>


      </nav>
    </div>
  </aside>
  
  <div class="book">
    
    <div class="book-menu-mobile">
      <label for="menu-control">
        <span class="menu-control-button">
          <i class="fa fa-list" aria-hidden="true" title="Book menu"></i>
          Book menu
        </span>
      </label>
    </div>
    
    <h1 class="title">第四章 安装应用程序：软件包和 Ports</h1>
    
    
      <div class="admonitionblock note">
        <p>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          如果发现翻译错误，请直接 <a href="https://github.com/fierceX/freebsd-doc-cn/pulls" target="_blank">发起PR修改</a>。
        </p>
      </div>
    
    
    
    <div class="toc-mobile">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#ports-synopsis">4.1. 简介</a></li>
    <li><a href="#ports-overview">4.2. 软件安装概述</a></li>
    <li><a href="#ports-finding-applications">4.3. 寻找软件</a></li>
    <li><a href="#pkgng-intro">4.4. 使用 pkg 进行二进制包管理</a></li>
    <li><a href="#ports-using">4.5. 使用 Ports 集合</a></li>
    <li><a href="#ports-poudriere">4.6. 使用 poudriere 构建软件包</a></li>
    <li><a href="#ports-nextsteps">4.7. 安装后的考虑事项</a></li>
    <li><a href="#ports-broken">4.8. 处理损坏的 ports</a></li>
  </ul>
</nav>
    </div>
    
      
      
    
    <div class="book-content">
      <div id="preamble">
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="ports-synopsis">4.1. 简介<a class="anchor" href="#ports-synopsis"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>FreeBSD 捆绑了丰富的系统工具作为基本系统的一部分。此外，FreeBSD 还提供了两种互补的技术来安装第三方软件：FreeBSD Ports Collection 用于从源代码安装，而软件包则用于从预编译的二进制文件安装。可以使用任一方法从本地媒体或网络安装软件。</p>
</div>
<div class="paragraph">
<p>阅读完本章后，您将了解：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>二进制包和 ports 之间的区别。</p>
</li>
<li>
<p>如何找到已经移植到 FreeBSD 的第三方软件。</p>
</li>
<li>
<p>如何使用 pkg 管理二进制软件包。</p>
</li>
<li>
<p>如何使用 Ports Collection 从源代码构建第三方软件。</p>
</li>
<li>
<p>如何找到应用程序安装后的文件，以进行后续配置。</p>
</li>
<li>
<p>如果软件安装失败，应该怎么办。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ports-overview">4.2. 软件安装概述<a class="anchor" href="#ports-overview"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>FreeBSD 的 <code>ports</code> 是一组文件，旨在自动化从源代码编译应用程序的过程。组成 ports 的文件包含了自动下载、提取、打补丁、编译和安装应用程序所需的所有必要信息。</p>
</div>
<div class="paragraph">
<p>如果软件尚未在 FreeBSD 上进行适配和测试，源代码可能需要进行编辑，以便正确安装和运行。</p>
</div>
<div class="paragraph">
<p>然而，在 <a href="https://www.FreeBSD.org/ports/">36000</a> 上已经有许多第三方应用程序被移植到了 FreeBSD。在可行的情况下，这些应用程序会以预编译的软件包形式提供下载。</p>
</div>
<div class="paragraph">
<p>可以使用 FreeBSD 软件包管理命令来操作软件包。</p>
</div>
<div class="paragraph">
<p>包和 ports 都能理解依赖关系。如果使用包或 ports 来安装一个应用程序，并且所依赖的库尚未安装，那么该库将会自动被先安装。</p>
</div>
<div class="paragraph">
<p>一个 FreeBSD 软件包包含了一个应用程序的预编译副本，以及任何配置文件和文档。可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 命令来操作软件包，例如 <code>pkg install</code>。</p>
</div>
<div class="paragraph">
<p>虽然这两种技术相似，但软件包和 ports 各有各的优势。选择符合您安装特定应用程序需求的技术。</p>
</div>
<div class="ulist">
<div class="title">包的好处</div>
<ul>
<li>
<p>通常，压缩的软件包 tarball 比包含应用程序源代码的压缩 tarball 要小。</p>
</li>
<li>
<p>包不需要编译时间。对于大型应用程序，如 Firefox 、KDE Plasma 或 GNOME，在慢速系统上这一点可能很重要。</p>
</li>
<li>
<p>在 FreeBSD 上编译软件的过程中，包不需要任何理解。</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Port 的好处</div>
<ul>
<li>
<p>通常情况下，软件包会使用保守的选项进行编译，因为它们需要在尽可能多的系统上运行。通过从 ports 进行编译，可以更改编译选项。</p>
</li>
<li>
<p>一些应用程序具有与安装的功能相关的编译时选项。例如，NGINX® 可以配置多种不同的内置选项。</p>
<div class="paragraph">
<p>在某些情况下，为了指定特定的设置，同一个应用程序可能会存在多个软件包。例如，NGINX® 有一个 <code>nginx</code> 软件包和一个 <code>nginx-lite</code> 软件包，取决于是否安装了 Xorg。如果一个应用程序有超过一两个不同的编译选项，创建多个软件包将很快变得不可能。</p>
</div>
</li>
<li>
<p>一些软件的许可条件禁止二进制分发。这类软件必须以源代码的形式分发，并由最终用户进行编译。</p>
</li>
<li>
<p>有些人不信任二进制发行版，或者更喜欢阅读源代码以寻找潜在问题。</p>
</li>
<li>
<p>为了应用自定义补丁，需要提供源代码。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>要跟踪更新的 ports ，请订阅 {freebsd-ports} 和 {freebsd-ports-bugs} 。</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在安装应用程序之前，请检查 <a href="https://vuxml.freebsd.org/" class="bare">https://vuxml.freebsd.org/</a> 是否存在相关的安全问题。</p>
</div>
<div class="paragraph">
<p>要对已安装的软件包进行已知漏洞的审计，请运行 <code>pkg audit -F</code>。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>本章的其余部分将解释如何使用软件包和 ports 在 FreeBSD 上安装和管理第三方软件。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ports-finding-applications">4.3. 寻找软件<a class="anchor" href="#ports-finding-applications"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>FreeBSD 的可用应用程序列表不断增长。有多种方法可以找到要安装的软件：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FreeBSD 网站维护着一个最新的可搜索的应用程序列表，位于 <a href="https://www.FreeBSD.org/ports/">Ports Portal</a>。可以通过应用程序名称或软件类别来搜索 ports。</p>
</li>
<li>
<p>Dan Langille 维护着 <a href="https://www.freshports.org/">FreshPorts</a>，该网站提供了一个全面的搜索工具，并跟踪 Ports Collection 中应用程序的变化。注册用户可以创建一个定制的监视列表，以便在所监视的 ports 更新时收到自动邮件通知。</p>
</li>
<li>
<p>如果找到一个特定的应用程序变得困难，可以尝试在 <a href="https://sourceforge.net/">SourceForge</a> 或者 <a href="https://github.com/">GitHub</a> 这样的网站上进行搜索，然后再回到 <a href="https://www.FreeBSD.org/ports/">Ports Portal</a> 查看该应用程序是否已经被移植。</p>
</li>
<li>
<p>使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 命令在二进制软件包仓库中搜索一个应用程序</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pkgng-intro">4.4. 使用 pkg 进行二进制包管理<a class="anchor" href="#pkgng-intro"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 提供了一个用于操作软件包的接口：注册、添加、删除和升级软件包。</p>
</div>
<div class="paragraph">
<p>对于只希望使用 FreeBSD 镜像站点提供的预编译二进制包的网站，使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 来管理软件包可能已经足够了。</p>
</div>
<div class="paragraph">
<p>然而，对于那些从源代码构建网站的用户，将需要使用单独的 ports 管理工具。</p>
</div>
<div class="paragraph">
<p>由于 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 只能用于二进制软件包，它并不能替代这些工具。这些工具可以用于安装来自二进制软件包和 Ports Collection 的软件，而 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 只能安装二进制软件包。</p>
</div>
<div class="sect2">
<h3 id="pkgng-initial-setup">4.4.1. 开始使用 pkg<a class="anchor" href="#pkgng-initial-setup"></a></h3>
<div class="paragraph">
<p>所有支持的 FreeBSD 版本现在都包含 <code>/usr/sbin/pkg</code>，也被称为 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=7&amp;format=html">pkg(7)</a> 。这是一个小的占位符，只包含安装真正的 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 所需的最小功能。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在引导过程中，需要一个互联网连接才能成功。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>运行 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 命令行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>The package management tool is not yet installed on your system.
Do you want to fetch and install it now? [y/N]</pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=7&amp;format=html">pkg(7)</a> 将拦截该命令，如果您确认这是您的意图，将下载 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> tarball ，并从中安装 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a>，引导本地软件包数据库，然后继续运行您最初请求的命令。</p>
</div>
<div class="paragraph">
<p>较新版本的 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=7&amp;format=html">pkg(7)</a> 可以理解 <code>pkg -N</code> 作为一种测试，用于检查是否安装了 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a>，而不触发安装操作。相反，pkg bootstrap[-f] 用于安装 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a>（或强制重新安装），而不执行任何其他操作。</p>
</div>
<div class="paragraph">
<p>可以通过查看 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 手册页面或者在运行 <code>pkg</code> 命令时不添加额外参数来获取 pkg 的使用信息。有关其他 pkg 配置选项的描述，请参阅 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg.conf&amp;sektion=5&amp;format=html">pkg.conf(5)</a> 。</p>
</div>
<div class="paragraph">
<p>每个 pkg 命令参数都在特定命令的手册页中有详细说明。</p>
</div>
<div class="paragraph">
<p>例如，要阅读 <code>pkg install</code> 的手册页，请运行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg help install</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>本节的其余部分演示了使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 执行的常见二进制包管理任务。每个演示的命令都提供了许多开关来自定义其使用方式。有关详细信息和更多示例，请参阅命令的帮助或 man 页面。</p>
</div>
</div>
<div class="sect2">
<h3 id="quarterly-latest-branch">4.4.2. 季度和最新的 ports 分支<a class="anchor" href="#quarterly-latest-branch"></a></h3>
<div class="paragraph">
<p><code>Quarterly</code> 分支为用户提供了更可预测和稳定的 ports 和软件包安装和升级体验。这主要通过只允许非功能性更新来实现。季度分支旨在接收安全修复（可能是版本更新或提交的回溯）、错误修复和 ports 合规性或框架更改。季度分支在每年的一月、四月、七月和十月的季度初从 HEAD 中切出。分支的命名方式根据它们创建的年份（YYYY）和季度（Q1-4）。例如， 2023 年 1 月创建的季度分支被命名为 2023Q1。而 <code>Latest</code> 分支为用户提供了软件包的最新版本。</p>
</div>
<div class="paragraph">
<p>要将 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 从季度版切换到最新版，请运行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># mkdir -p /usr/local/etc/pkg/repos</span>
<span class="c"># echo &#39;FreeBSD: { url: &#34;pkg+http://pkg.FreeBSD.org/${ABI}/latest&#34; }&#39; &gt; /usr/local/etc/pkg/repos/FreeBSD.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>然后运行以下命令来更新本地软件包仓库目录，以获取最新分支的内容：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg update -f</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkg-configuration">4.4.3. 配置 pkg<a class="anchor" href="#pkg-configuration"></a></h3>
<div class="paragraph">
<p><a href="https://man.freebsd.org/cgi/man.cgi?query=pkg.conf&amp;sektion=5&amp;format=html">pkg.conf(5)</a> 是 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 工具使用的系统级配置文件。该文件的默认位置是 <code>/usr/local/etc/pkg.conf</code>。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>FreeBSD 不需要有 <code>pkg.conf</code> 文件。许多安装可以在没有任何 <code>pkg.conf</code> 文件或只有空的 <code>pkg.conf</code> 文件（除了注释行）的情况下正常工作。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>以&#34;#&#34;开头的行是注释，会被忽略。</p>
</div>
<div class="paragraph">
<p>该文件采用 UCL 格式。有关 <a href="https://man.freebsd.org/cgi/man.cgi?query=libucl&amp;sektion=3&amp;format=html">libucl(3)</a> 语法的更多信息，请访问 <a href="https://github.com/vstakhov/libucl">official UCL website</a> 。</p>
</div>
<div class="paragraph">
<p>识别以下类型的选项 - 布尔型、字符串型和列表型选项。</p>
</div>
<div class="paragraph">
<p>如果在配置文件中指定了以下值之一 - YES 、TRUE 和 ON，则将布尔选项标记为已启用。</p>
</div>
</div>
<div class="sect2">
<h3 id="pkg-search">4.4.4. 搜索软件包<a class="anchor" href="#pkg-search"></a></h3>
<div class="paragraph">
<p>要搜索一个软件包，可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-search&amp;sektion=8&amp;format=html">pkg-search(8)</a> 命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg search nginx</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>modsecurity3-nginx-1.0.3       Instruction detection and prevention engine / nginx Wrapper
nginx-1.22.1_2,3               Robust and small WWW server
nginx-devel-1.23.2_4           Robust and small WWW server
nginx-full-1.22.1_1,3          Robust and small WWW server (full package)
nginx-lite-1.22.1,3            Robust and small WWW server (lite package)
nginx-naxsi-1.22.1,3           Robust and small WWW server (plus NAXSI)
nginx-prometheus-exporter-0.10.0_7 Prometheus exporter for NGINX and NGINX Plus stats
nginx-ultimate-bad-bot-blocker-4.2020.03.2005_1 Nginx bad bot and other things blocker
nginx-vts-exporter-0.10.7_7    Server that scraps NGINX vts stats and export them via HTTP
p5-Nginx-ReadBody-0.07_1       Nginx embeded perl module to read and evaluate a request body
p5-Nginx-Simple-0.07_1         Perl 5 module for easy to use interface for Nginx Perl Module
p5-Test-Nginx-0.30             Testing modules for Nginx C module development
py39-certbot-nginx-2.0.0       NGINX plugin for Certbot
rubygem-passenger-nginx-6.0.15 Modules for running Ruby on Rails and Rack applications</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkg-installing-fetching">4.4.5. 安装和获取软件包<a class="anchor" href="#pkg-installing-fetching"></a></h3>
<div class="paragraph">
<p>要安装一个二进制软件包，可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-install&amp;sektion=8&amp;format=html">pkg-install(8)</a> 命令。该命令使用存储库数据来确定要安装的软件的版本以及是否有未安装的依赖项。例如，要安装 curl ：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg install curl</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Updating FreeBSD repository catalogue...
FreeBSD repository is up to date.
All repositories are up to date.
The following 9 package(s) will be affected (of 0 checked):

New packages to be INSTALLED:
        ca_root_nss: 3.83
        curl: 7.86.0
        gettext-runtime: 0.21
        indexinfo: 0.3.1
        libidn2: 2.3.3
        libnghttp2: 1.48.0
        libpsl: 0.21.1_4
        libssh2: 1.10.0.3
        libunistring: 1.0

Number of packages to be installed: 9

The process will require 11 MiB more space.
3 MiB to be downloaded

Proceed with this action? [y/N]</pre>
</div>
</div>
<div class="paragraph">
<p>新的软件包以及作为依赖项安装的任何其他软件包都可以在已安装软件包列表中看到：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg info</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ca_root_nss-3.83               Root certificate bundle from the Mozilla Project
curl-7.86.0                    Command line tool and library for transferring data with URLs
gettext-runtime-0.21.1         GNU gettext runtime libraries and programs
indexinfo-0.3.1                Utility to regenerate the GNU info page index
libidn2-2.3.3                  Implementation of IDNA2008 internationalized domain names
libnghttp2-1.48.0              HTTP/2.0 C Library
libpsl-0.21.1_6                C library to handle the Public Suffix List
libssh2-1.10.0.3               Library implementing the SSH2 protocol
libunistring-1.0               Unicode string library
pkg-1.18.4                     Package manager</pre>
</div>
</div>
<div class="paragraph">
<p>要获取一个软件包并稍后安装它或在另一个地方安装，请使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-fetch&amp;sektion=8&amp;format=html">pkg-fetch(8)</a>。例如，要下载 <code>nginx-lite</code>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg fetch -d -o /usr/home/user/packages/ nginx-lite</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-d</code>：用于获取所有的依赖项</p>
</li>
<li>
<p><code>-o</code>：用于指定下载目录</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Updating FreeBSD repository catalogue...
FreeBSD repository is up to date.
All repositories are up to date.
The following packages will be fetched:

New packages to be FETCHED:
        nginx-lite: 1.22.1,3 (342 KiB: 22.20% of the 2 MiB to download)
        pcre: 8.45_3 (1 MiB: 77.80% of the 2 MiB to download)

Number of packages to be fetched: 2

The process will require 2 MiB more space.
2 MiB to be downloaded.

Proceed with fetching packages? [y/N]:</pre>
</div>
</div>
<div class="paragraph">
<p>要安装下载的软件包，可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-install&amp;sektion=8&amp;format=html">pkg-install(8)</a> 命令，具体操作如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/home/user/packages/</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg install nginx-lite-1.22.1,3.pkg</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkgng-pkg-info">4.4.6. 获取已安装软件包的信息<a class="anchor" href="#pkgng-pkg-info"></a></h3>
<div class="paragraph">
<p>可以通过运行 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-info&amp;sektion=8&amp;format=html">pkg-info(8)</a> 来查看系统上安装的软件包的信息。当不带任何开关运行时，它将列出所有已安装软件包或指定软件包的版本信息。</p>
</div>
<div class="paragraph">
<p>例如，要查看已安装的 pkg 版本，请运行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg info pkg</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>pkg-1.19.0
Name           : pkg
Version        : 1.19.0
Installed on   : Sat Dec 17 11:05:28 2022 CET
Origin         : ports-mgmt/pkg
Architecture   : FreeBSD:13:amd64
Prefix         : /usr/local
Categories     : ports-mgmt
Licenses       : BSD2CLAUSE
Maintainer     : pkg@FreeBSD.org
WWW            : https://github.com/freebsd/pkg
Comment        : Package manager
Options        :
        DOCS           : on
Shared Libs provided:
        libpkg.so.4
Annotations    :
        FreeBSD_version: 1301000
        repo_type      : binary
        repository     : FreeBSD
Flat size      : 33.2MiB
Description    :
Package management tool

WWW: https://github.com/freebsd/pkg</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkgng-upgrading">4.4.7. 升级已安装的软件包<a class="anchor" href="#pkgng-upgrading"></a></h3>
<div class="paragraph">
<p>已安装的软件包可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-upgrade&amp;sektion=8&amp;format=html">pkg-upgrade(8)</a> 命令升级到最新版本。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg upgrade</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>该命令将比较已安装的版本与存储库目录中可用的版本，并从存储库中升级它们。</p>
</div>
</div>
<div class="sect2">
<h3 id="pkgng-auditing">4.4.8. 审核已安装的软件包<a class="anchor" href="#pkgng-auditing"></a></h3>
<div class="paragraph">
<p>第三方应用程序经常会发现软件漏洞。为了解决这个问题，pkg 包含了一个内置的审计机制。要确定系统上安装的软件是否存在已知的漏洞，请使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-audit&amp;sektion=8&amp;format=html">pkg-audit(8)</a> 命令。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg audit -F</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Fetching vuln.xml.xz: 100%  976 KiB 499.5kB/s    00:02
chromium-108.0.5359.98 is vulnerable:
  chromium -- multiple vulnerabilities
  CVE: CVE-2022-4440
  CVE: CVE-2022-4439
  CVE: CVE-2022-4438
  CVE: CVE-2022-4437
  CVE: CVE-2022-4436
  WWW: https://vuxml.FreeBSD.org/freebsd/83eb9374-7b97-11ed-be8f-3065ec8fd3ec.html</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkg-delete">4.4.9. 移除软件包<a class="anchor" href="#pkg-delete"></a></h3>
<div class="paragraph">
<p>不再需要的软件包可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-delete&amp;sektion=8&amp;format=html">pkg-delete(8)</a> 命令进行删除。</p>
</div>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg delete curl</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Checking integrity... done (0 conflicting)
Deinstallation has been requested for the following 1 packages (of 0 packages in the universe):

Installed packages to be REMOVED:
        curl :7.86.0

Number of packages to be removed: 1

The operation will free 4 MiB.

Proceed with deinstallation packages? [y/N]: y
[1/1] Deinstalling curl-7.86.0...
[1/1] Deleting files for curl-7.86.0: 100%</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkgng-autoremove">4.4.10. 自动删除未使用的软件包<a class="anchor" href="#pkgng-autoremove"></a></h3>
<div class="paragraph">
<p>删除一个软件包可能会留下不再需要的依赖项。可以使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-autoremove&amp;sektion=8&amp;format=html">pkg-autoremove(8)</a> 自动检测和删除作为依赖项安装的不需要的软件包（叶子软件包）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg autoremove</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Checking integrity... done (0 conflicting)
Deinstallation has been requested for the following 1 packages:

Installed packages to be REMOVED:
        ca_root_nss-3.83

Number of packages to be removed: 1

The operation will free 723 KiB.

Proceed with deinstalling packages? [y/N]:</pre>
</div>
</div>
<div class="paragraph">
<p>作为依赖安装的软件包被称为 <em>自动</em> 软件包。非自动软件包，即明确安装而不是作为其他软件包的依赖项安装的软件包，可以使用以下命令列出：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg prime-list</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>nginx
openvpn
sudo</pre>
</div>
</div>
<div class="paragraph">
<p><code>pkg prime-list</code> 是在 <code>/usr/local/etc/pkg.conf</code> 中声明的一个别名命令。系统中还有许多其他命令可以用来查询软件包数据库。例如，命令 <code>pkg prime-origins</code> 可以用来获取上述列表的源 ports 目录。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg prime-origins</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>输出应该类似于以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>www/nginx
security/openvpn
security/sudo</pre>
</div>
</div>
<div class="paragraph">
<p>这个列表可以用于使用构建工具（如 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/">ports-mgmt/poudriere</a> 或 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/synth/">ports-mgmt/synth</a>）重新构建系统上安装的所有软件包。</p>
</div>
<div class="paragraph">
<p>将已安装的软件包标记为自动安装可以使用以下方法：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg set -A 1 devel/cmake</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>一旦一个包是一个叶子包并且被标记为自动安装，它将被 <code>pkg autoremove</code> 命令选择删除。</p>
</div>
<div class="paragraph">
<p>将已安装的软件包标记为 <em>非</em> 自动安装可以使用以下方法：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg set -A 0 devel/cmake</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkgng-clean">4.4.11. 移除过期的软件包<a class="anchor" href="#pkgng-clean"></a></h3>
<div class="paragraph">
<p>默认情况下，pkg 将二进制软件包存储在由 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg.conf&amp;sektion=5&amp;format=html">pkg.conf(5)</a> 中的 <code>PKG_CACHEDIR</code> 定义的缓存目录中。只保留最新安装的软件包的副本。旧版本的 pkg 会保留所有先前的软件包。要删除这些过时的二进制软件包，请运行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg clean</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>可以通过运行以下命令来清除整个缓存：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg clean -a</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkg-locking-unlocking">4.4.12. 锁定和解锁软件包<a class="anchor" href="#pkg-locking-unlocking"></a></h3>
<div class="paragraph">
<p><a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-lock&amp;sektion=8&amp;format=html">pkg-lock(8)</a> 用于锁定包，防止重新安装、修改或删除。<a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-unlock&amp;sektion=8&amp;format=html">pkg-unlock(8)</a> 用于解锁指定的包。无论哪种变体，都只对当前已安装的包产生影响。因此，除非安装新包意味着更新已锁定的包，否则无法通过此机制阻止新包的安装。</p>
</div>
<div class="paragraph">
<p>例如，要锁定 <code>nginx-lite</code>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg lock nginx-lite</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>要解锁 <code>nginx-lite</code>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg unlock nginx-lite</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pkgng-set">4.4.13. 修改软件包元数据<a class="anchor" href="#pkgng-set"></a></h3>
<div class="paragraph">
<p>FreeBSD Ports Collection 中的软件可能会经历主版本号的更改。为了解决这个问题，pkg 有一个内置命令来更新软件包的来源。这在某些情况下非常有用，例如，如果 <a class="package" href="https://cgit.freebsd.org/ports/tree/lang/python3/">lang/python3</a> 被重命名为 <a class="package" href="https://cgit.freebsd.org/ports/tree/lang/python311/">lang/python311</a> ，那么 <a class="package" href="https://cgit.freebsd.org/ports/tree/lang/python3/">lang/python3</a> 现在可以表示版本 <code>3.11</code>。</p>
</div>
<div class="paragraph">
<p>要更改上面示例的软件包来源，请运行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg set -o lang/python3:lang/python311</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>另一个例子是，要将 <a class="package" href="https://cgit.freebsd.org/ports/tree/lang/ruby31/">lang/ruby31</a> 更新为 <a class="package" href="https://cgit.freebsd.org/ports/tree/lang/ruby32/">lang/ruby32</a>，运行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg set -o lang/ruby31:lang/ruby32</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在更改软件包来源时，重要的是重新安装依赖于已修改来源的软件包。要强制重新安装依赖软件包，请运行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg install -Rf lang/ruby32</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ports-using">4.5. 使用 Ports 集合<a class="anchor" href="#ports-using"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ports Collection 是一组 <code>Makefiles</code>、补丁和描述文件。每组这些文件用于在 FreeBSD 上编译和安装单个应用程序，被称为一个 <em>ports</em>。</p>
</div>
<div class="paragraph">
<p>默认情况下，Ports Collection 本身存储在 <code>/usr/ports</code> 的子目录中。</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在安装和使用 Ports Collection 之前，请注意通常不建议使用 Ports Collection 与通过 pkg 提供的二进制软件包一起安装软件。 pkg 默认跟踪 ports 树的季度分支发布，而不是 HEAD 。与季度分支发布中的对应 ports 相比， HEAD 中的 ports 的依赖关系可能不同，这可能导致 pkg 安装的依赖关系与 Ports Collection 中的依赖关系发生冲突。如果必须同时使用 Ports Collection 和 pkg ，请确保您的 Ports Collection 和 pkg 位于相同的 ports 树分支发布上。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Ports 集合包含了软件类别的目录。每个类别中都有针对个别应用程序的子目录。每个应用程序子目录包含一组文件，告诉 FreeBSD 如何编译和安装该程序，称为 <em>ports skeleton</em>。每个 ports 骨架包括以下文件和目录：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Makefile</strong>：包含指定应用程序如何编译以及其组件应安装在何处的语句。</p>
</li>
<li>
<p><strong>distinfo</strong>：包含构建 ports 所需下载的文件的名称和校验和。</p>
</li>
<li>
<p><strong>files/</strong>：这个目录包含了在 FreeBSD 上编译和安装程序所需的补丁文件。这个目录也可能包含其他用于构建 ports 的文件。</p>
</li>
<li>
<p><strong>pkg-descr</strong>：提供程序的更详细描述。</p>
</li>
<li>
<p><strong>pkg-plist</strong>：一个包含所有将由 ports 安装的文件的列表。它还告诉 ports 系统在卸载时要删除哪些文件。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>一些 ports 包括 <code>pkg-message</code> 或其他文件来处理特殊情况。有关这些文件以及 ports 的更多详细信息，请参考 <a href="{porters-handbook}">FreeBSD Porter’s Handbook</a>。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ports 不包含实际的源代码，也称为 `distfile` 。构建 ports 的提取部分将自动将下载的源代码保存到 `/usr/ports/distfiles`。</pre>
</div>
</div>
<div class="sect2">
<h3 id="ports-using-installation-methods">4.5.1. 安装 Ports 集合<a class="anchor" href="#ports-using-installation-methods"></a></h3>
<div class="paragraph">
<p>在使用 ports 编译应用程序之前，必须先安装 ports 集合。如果在安装 FreeBSD 时没有安装它，请使用以下方法之一进行安装：</p>
</div>
<div id="ports-using-git-method" class="sidebarblock procedure">
<div class="content">
<div class="paragraph">
<p><strong>过程：Git 方法</strong></p>
</div>
<div class="paragraph">
<p>如果需要对 ports 树进行更多的控制，或者需要维护本地更改，或者正在运行 FreeBSD-CURRENT，可以使用 Git 来获取 Ports Collection。有关 Git 的详细描述，请参阅 <a href="{committers-guide}#git-primer">Git Primer</a>。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在使用 Git 检出 ports 树之前，必须先安装 Git 。如果已经存在一个 ports 树的副本，请按照以下方式安装 Git ：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/ports/devel/git</span>
<span class="c"># make install clean</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果 ports 树不可用，或者正在使用 pkg 来管理软件包，可以将 Git 作为一个软件包安装：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg install git</span></code></pre>
</div>
</div>
</li>
<li>
<p>检出 ports 树的 HEAD 分支的副本：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># git clone https://git.FreeBSD.org/ports.git /usr/ports</span></code></pre>
</div>
</div>
</li>
<li>
<p>或者，检出一个季度分支的副本：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># git clone https://git.FreeBSD.org/ports.git -b 2023Q1 /usr/ports</span></code></pre>
</div>
</div>
</li>
<li>
<p>在初始的 Git 检出之后，根据需要更新 <code>/usr/ports</code>。</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># git -C /usr/ports pull</span></code></pre>
</div>
</div>
</li>
<li>
<p>根据需要，将 <code>/usr/ports</code> 切换到不同的季度分支：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># git -C /usr/ports switch 2023Q1</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_安装_ports">4.5.2. 安装 Ports<a class="anchor" href="#_安装_ports"></a></h3>
<div class="paragraph">
<p>本节提供了使用 Ports Collection 安装或删除软件的基本说明。有关可用的 <code>make</code> 目标和环境变量的详细描述，请参阅 <a href="https://man.freebsd.org/cgi/man.cgi?query=ports&amp;sektion=7&amp;format=html">ports(7)</a>。</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在编译任何 ports 之前，请确保按照前一节中的描述更新 Ports Collection。由于安装任何第三方软件都可能引入安全漏洞，建议首先在 <a href="https://vuxml.freebsd.org/" class="bare">https://vuxml.freebsd.org/</a> 上检查与该 ports 相关的已知安全问题。或者，在安装新 ports 之前运行 <code>pkg audit -F</code>。此命令可以配置为在每日安全系统检查期间自动执行安全审计和漏洞数据库的更新。有关更多信息，请参阅 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-audit&amp;sektion=8&amp;format=html">pkg-audit(8)</a> 和 <a href="https://man.freebsd.org/cgi/man.cgi?query=periodic&amp;sektion=8&amp;format=html">periodic(8)</a>。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>使用 Ports 集合需要一个正常的互联网连接。它还需要超级用户权限。</p>
</div>
<div class="paragraph">
<p>要编译和安装 ports，请切换到要安装的 ports 的目录，然后在提示符下键入 <code>make install</code>。消息将指示进度：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/ports/sysutils/lsof</span>
<span class="c"># make install</span>
<span class="gp">&gt;&gt; </span>lsof_4.88D.freebsd.tar.gz doesn<span class="s1">&#39;t seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.88
...
[extraction output snipped]
...
&gt;&gt; Checksum OK for lsof_4.88D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.88.d,8
===&gt;  Applying FreeBSD patches for lsof-4.88.d,8
===&gt;  Configuring for lsof-4.88.d,8
...
[configure output snipped]
...
===&gt;  Building for lsof-4.88.d,8
...
[compilation output snipped]
...

===&gt;  Installing for lsof-4.88.d,8
...
[installation output snipped]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.88.d,8
===&gt;   Registering installation for lsof-4.88.d,8
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
/usr/local/sbin/lsof
#</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>由于 <code>lsof</code> 是一个以增加权限运行的程序，因此在安装时会显示一个安全警告。安装完成后，提示符将会返回。</p>
</div>
<div class="paragraph">
<p>一些 shell 会在 <code>PATH</code> 环境变量所列目录中保留一个命令缓存，以加快对这些命令可执行文件的查找操作。使用 <code>tcsh</code> shell 的用户应该输入 <code>rehash</code> 命令，以便可以在不指定完整路径的情况下使用新安装的命令。对于 <code>sh</code> shell，请使用 <code>hash -r</code> 命令。有关更多信息，请参阅 shell 的文档。</p>
</div>
<div class="paragraph">
<p>在安装过程中，会创建一个工作子目录，其中包含编译过程中使用的所有临时文件。删除此目录可以节省磁盘空间，并在以后升级到新版本的 ports 时最大程度地减少问题的可能性。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># make clean</span>
<span class="gp">===&gt;  </span>Cleaning <span class="k">for </span>lsof-88.d,8
<span class="c">#</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>为了避免这个额外的步骤，编译 ports 时可以使用 <code>make install clean</code>。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_自定义_ports_安装">4.5.2.1. 自定义 ports 安装<a class="anchor" href="#_自定义_ports_安装"></a></h4>
<div class="paragraph">
<p>一些 ports 提供构建选项，可以用于启用或禁用应用程序组件，提供安全选项或允许其他自定义。示例包括 <a class="package" href="https://cgit.freebsd.org/ports/tree/www/firefox/">www/firefox</a> 和 <a class="package" href="https://cgit.freebsd.org/ports/tree/security/gpgme/">security/gpgme</a>。如果该 ports 依赖于具有可配置选项的其他 ports，则默认行为是提示用户从菜单中选择选项，因此可能会多次暂停以进行用户交互。为了避免这种情况，并在一个批处理中进行所有配置，请在 ports 骨架中运行 <code>make config-recursive</code>。然后，运行 <code>make install [clean]</code> 来编译和安装该 ports。</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>当使用 <code>config-recursive</code> 时，要配置的 ports 列表是通过 <code>all-depends-list</code> 目标收集的。建议运行 <code>make config-recursive</code> 直到所有依赖 ports 选项都被定义，并且 ports 选项屏幕不再出现，以确保所有依赖选项都已配置。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>在构建 ports 后，有几种方法可以重新访问 ports 的构建选项菜单，以添加、删除或更改这些选项。一种方法是进入包含 ports 的目录，然后输入 <code>make config</code> 命令。另一种选择是使用 <code>make showconfig</code> 命令。还可以执行 <code>make rmconfig</code> 命令，该命令将删除所有已选择的选项，并允许您重新开始。所有这些选项以及其他选项都在 <a href="https://man.freebsd.org/cgi/man.cgi?query=ports&amp;sektion=7&amp;format=html">ports(7)</a> 中详细解释。</p>
</div>
<div class="paragraph">
<p>ports 系统使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=fetch&amp;sektion=1&amp;format=html">fetch(1)</a> 来下载源文件，该工具支持各种环境变量。如果 FreeBSD 系统位于防火墙或 FTP/HTTP 代理后面，可能需要设置 <code>FTP_PASSIVE_MODE</code>、<code>FTP_PROXY</code> 和 <code>FTP_PASSWORD</code> 变量。有关支持的变量的完整列表，请参阅 <a href="https://man.freebsd.org/cgi/man.cgi?query=fetch&amp;sektion=3&amp;format=html">fetch(3)</a>。</p>
</div>
<div class="paragraph">
<p>对于不能始终连接到互联网的用户，可以在 <code>/usr/ports</code> 目录下运行 <code>make fetch</code> 命令，以获取所有的 distfiles，或者在某个分类目录（例如 <code>/usr/ports/net</code>）或特定的 ports 骨架中运行。请注意，如果一个 ports 有任何依赖项，那么在分类目录或 ports 骨架中运行此命令将不会获取来自其他分类的 ports 的 distfiles。相反，使用 <code>make fetch-recursive</code> 命令也可以获取 ports 的所有依赖项的 distfiles。</p>
</div>
<div class="paragraph">
<p>在极少数情况下，例如当组织拥有本地的 distfiles 仓库时，<code>MASTER_SITES</code> 变量可以用于覆盖 <code>Makefile</code> 中指定的下载位置。在使用时，请指定替代位置：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/ports/directory</span>
<span class="c"># make MASTER_SITE_OVERRIDE= \</span>
ftp://ftp.organization.org/pub/FreeBSD/ports/distfiles/ fetch</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>WRKDIRPREFIX</code> 和 <code>PREFIX</code> 变量可以覆盖默认的工作目录和目标目录。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># make WRKDIRPREFIX=/usr/home/example/ports install</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>将 ports 编译在 <code>/usr/home/example/ports</code> 目录下，并将所有内容安装在 <code>/usr/local</code> 目录下。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># make PREFIX=/usr/home/example/local install</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>将 ports 编译在 <code>/usr/ports</code> 中，并将其安装在 <code>/usr/home/example/local</code> 中。并且：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># make WRKDIRPREFIX=../ports PREFIX=../local install</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>将两者合并。</p>
</div>
<div class="paragraph">
<p>这些也可以设置为环境变量。请参考您所使用的 shell 的手册页面，了解如何设置环境变量的指令。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ports-removing">4.5.3. 移除已安装的 ports<a class="anchor" href="#ports-removing"></a></h3>
<div class="paragraph">
<p>使用 <code>pkg delete</code> 命令可以卸载已安装的 ports。有关使用此命令的示例，请参阅 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg-delete&amp;sektion=8&amp;format=html">pkg-delete(8)</a> 手册页。</p>
</div>
<div class="paragraph">
<p>或者，可以在 ports 的目录中运行 <code>make deinstall</code> 命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/ports/sysutils/lsof</span>
<span class="c"># make deinstall</span>
<span class="gp">===&gt;  </span>Deinstalling <span class="k">for </span>sysutils/lsof
<span class="gp">===&gt;   </span>Deinstalling
Deinstallation has been requested <span class="k">for </span>the following 1 packages:

	lsof-4.88.d,8

The deinstallation will free 229 kB
<span class="o">[</span>1/1] Deleting lsof-4.88.d,8... <span class="k">done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>建议在卸载 ports 之前阅读消息。如果该 ports 有任何依赖于它的应用程序，这些信息将被显示，但卸载将继续进行。在这种情况下，重新安装应用程序可能更好，以防止依赖关系破裂。</p>
</div>
</div>
<div class="sect2">
<h3 id="ports-upgrading">4.5.4. 升级 ports<a class="anchor" href="#ports-upgrading"></a></h3>
<div class="paragraph">
<p>随着时间的推移，Ports Collection 中会有更新版本的软件可用。本节介绍了如何确定可以升级的软件以及如何执行升级操作。</p>
</div>
<div class="paragraph">
<p>要确定已安装的 ports 是否有更新版本可用，请确保安装了最新版本的 ports 树，使用在 <a href="#ports-using-git-method">&#34;Git Method&#34;</a> 中描述的更新命令。以下命令将列出已过时的已安装 ports：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pkg version -l &#34;&lt;&#34;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在尝试升级之前，请从文件顶部开始阅读 <code>/usr/ports/UPDATING</code>，直到最接近上次升级 ports 或安装系统的日期。该文件描述了在更新 ports 时用户可能遇到的各种问题和需要执行的额外步骤，包括文件格式更改、配置文件位置更改或与先前版本不兼容的任何问题。请注意任何与需要升级的 ports 匹配的说明，并在执行升级时遵循这些说明。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="ports-upgrading-tools">4.5.4.1. 升级和管理 ports 的工具<a class="anchor" href="#ports-upgrading-tools"></a></h4>
<div class="paragraph">
<p>Ports Collection 包含多个实际执行升级的实用工具。每个工具都有其优点和缺点。</p>
</div>
<div class="paragraph">
<p>从历史上看，大多数安装使用的是 Portmaster 或 Portupgrade 。Synth 是一种较新的替代方案。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>选择哪种工具最适合特定系统是由系统管理员决定的。在使用这些工具之前，建议先备份数据。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="portmaster">4.5.4.2. 使用 Portmaster 升级 Ports<a class="anchor" href="#portmaster"></a></h4>
<div class="paragraph">
<p><a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/portmaster/">ports-mgmt/portmaster</a> 是一个非常小的工具，用于升级已安装的 ports。它旨在使用安装在 FreeBSD 基本系统中的工具，而不依赖其他 ports 或数据库。要将此实用程序安装为一个 ports：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/ports/ports-mgmt/portmaster</span>
<span class="c"># make install clean</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Portmaster 定义了四个 ports 的分类：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Root ports：没有依赖项，也不是任何其他 ports 的依赖项。</p>
</li>
<li>
<p>Trunk ports：没有依赖项，但其他 ports 依赖于它。</p>
</li>
<li>
<p>Branch ports：具有依赖关系，其他 ports 依赖于它。</p>
</li>
<li>
<p>Leaf ports：具有依赖关系，但没有其他 ports 依赖于它。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>要列出这些类别并搜索更新：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portmaster -L</span>
<span class="gp">===&gt;&gt;&gt; </span>Root ports <span class="o">(</span>No dependencies, not depended on<span class="o">)</span>
<span class="gp">===&gt;&gt;&gt; </span>ispell-3.2.06_18
<span class="gp">===&gt;&gt;&gt; </span>screen-4.0.3
        <span class="o">===</span>&gt;&gt;&gt; New version available: screen-4.0.3_1
<span class="gp">===&gt;&gt;&gt; </span>tcpflow-0.21_1
<span class="gp">===&gt;&gt;&gt; </span>7 root ports
...
<span class="gp">===&gt;&gt;&gt; </span>Branch ports <span class="o">(</span>Have dependencies, are depended on<span class="o">)</span>
<span class="gp">===&gt;&gt;&gt; </span>apache22-2.2.3
        <span class="o">===</span>&gt;&gt;&gt; New version available: apache22-2.2.8
...
<span class="gp">===&gt;&gt;&gt; </span>Leaf ports <span class="o">(</span>Have dependencies, not depended on<span class="o">)</span>
<span class="gp">===&gt;&gt;&gt; </span>automake-1.9.6_2
<span class="gp">===&gt;&gt;&gt; </span>bash-3.1.17
        <span class="o">===</span>&gt;&gt;&gt; New version available: bash-3.2.33
...
<span class="gp">===&gt;&gt;&gt; </span>32 leaf ports

<span class="gp">===&gt;&gt;&gt; </span>137 total installed ports
        <span class="o">===</span>&gt;&gt;&gt; 83 have new versions available</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个命令用于升级所有过时的 ports：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portmaster -a</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>默认情况下，Portmaster 在删除现有 ports 之前会创建一个备份包。如果新版本的安装成功，Portmaster 会删除备份。使用 <code>-b</code> 指令可以让 Portmaster 不自动删除备份。添加 <code>-i</code> 可以启动 Portmaster 的交互模式，在升级每个 ports 之前提示确认。还有许多其他选项可用。请阅读 <a href="https://man.freebsd.org/cgi/man.cgi?query=portmaster&amp;sektion=8&amp;format=html">portmaster(8)</a> 的手册页面，了解有关它们使用的详细信息。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>如果在升级过程中遇到错误，请在升级和重建所有 ports 时添加 <code>-f</code>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portmaster -af</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Portmaster 还可以用于在系统上安装新的 ports，在构建和安装新的 ports 之前升级所有依赖项。要使用此功能，请指定 Ports Collection 中 ports 的位置：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portmaster shells/bash</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>有关 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/portmaster/">ports-mgmt/portmaster</a> 的更多信息可以在其 <code>pkg-descr</code> 中找到。</p>
</div>
</div>
<div class="sect3">
<h4 id="portupgrade">4.5.4.3. 使用 Portupgrade 升级 ports<a class="anchor" href="#portupgrade"></a></h4>
<div class="paragraph">
<p><a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/portupgrade/">ports-mgmt/portupgrade</a> 是另一个可以用来升级 ports 的实用工具。它安装了一套可以用来管理 ports 的应用程序。然而，它依赖于 Ruby。要安装该 ports：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/ports/ports-mgmt/portupgrade</span>
<span class="c"># make install clean</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>在使用此工具进行升级之前，建议使用 <code>pkgdb -F</code> 扫描已安装的 ports 列表，并修复它报告的所有不一致性。</p>
</div>
<div class="paragraph">
<p>要升级系统上安装的所有过时 ports，请使用 <code>portupgrade -a</code>。或者，加入 <code>-i</code> 以便在每次单独升级时要求确认：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portupgrade -ai</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>要升级指定的应用程序而不是所有可用的 ports，请使用 <code>portupgrade <em>pkgname</em></code>。非常重要的是要包括 <code>-R</code> 选项，以先升级给定应用程序所需的所有 ports：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portupgrade -R firefox</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果包含了 <code>-P</code> 选项，Portupgrade 会在 <code>PKG_PATH</code> 列出的本地目录中搜索可用的软件包。如果本地没有可用的软件包，它会从远程站点获取软件包。如果无法在本地或远程获取软件包，Portupgrade 将使用 ports。为了完全避免使用 ports，可以指定 <code>-PP</code> 选项。最后一组选项告诉 Portupgrade 如果没有可用的软件包则中止操作。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portupgrade -PP gnome3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果指定了 <code>-P</code>，只需获取 ports distfiles 或软件包，而不需要构建或安装任何内容，请使用 <code>-F 。有关所有可用开关的更多信息，请参阅 `portupgrade</code> 的手册页。</p>
</div>
<div class="paragraph">
<p>有关 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/portupgrade/">ports-mgmt/portupgrade</a> 的更多信息可以在其 <code>pkg-descr</code> 中找到。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ports-disk-space">4.5.5. ports 和磁盘空间<a class="anchor" href="#ports-disk-space"></a></h3>
<div class="paragraph">
<p>使用 Ports Collection 会随着时间的推移占用磁盘空间。在构建和安装 ports 之后，在 ports 骨架中运行 <code>make clean</code> 将清理临时的 <code>work</code> 目录。如果使用 Portmaster 安装 ports，它会自动删除此目录，除非指定了 <code>-K</code> 选项。如果安装了 Portupgrade，此命令将删除在本地 Ports Collection 副本中找到的所有 <code>work</code> 目录：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portsclean -C</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>此外，随着时间的推移，过时的源代码分发文件会在 <code>/usr/ports/distfiles</code> 中累积。要使用 Portupgrade 删除所有不再被任何 ports 引用的分发文件：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portsclean -D</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Portupgrade 可以删除系统上当前未安装任何 ports 引用的所有 distfiles 文件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portsclean -DD</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果已安装 Portmaster，请使用：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># portmaster --clean-distfiles</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>默认情况下，该命令是交互式的，并提示用户确认是否删除 distfile。</p>
</div>
<div class="paragraph">
<p>除了这些命令之外，<a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/pkg_cutleaves/">ports-mgmt/pkg_cutleaves</a> 还可以自动化删除不再需要的已安装 ports 的任务。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ports-poudriere">4.6. 使用 poudriere 构建软件包<a class="anchor" href="#ports-poudriere"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>poudriere 是一个使用 BSD 许可证的实用工具，用于创建和测试 FreeBSD 软件包。它使用 FreeBSD jails 来设置隔离的编译环境。这些 jails 可以用于为与安装它的系统不同的 FreeBSD 版本构建软件包，也可以用于在主机是 amd64 系统的情况下构建 i386 的软件包。一旦软件包构建完成，它们的布局与官方镜像完全相同。这些软件包可以被 <a href="https://man.freebsd.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;format=html">pkg(8)</a> 和其他软件包管理工具使用。</p>
</div>
<div class="paragraph">
<p>poudriere 是使用 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/">ports-mgmt/poudriere</a> 包或 ports 进行安装的。安装过程中包含一个示例配置文件 <code>/usr/local/etc/poudriere.conf.sample</code>。将此文件复制到 <code>/usr/local/etc/poudriere.conf</code>。编辑复制的文件以适应本地配置。</p>
</div>
<div class="paragraph">
<p>虽然在运行 poudriere 的系统上不需要 <code>ZFS</code>，但它是有益的。当使用 <code>ZFS</code> 时，必须在 <code>/usr/local/etc/poudriere.conf</code> 中指定 <code>ZPOOL</code>，并将 <code>FREEBSD_HOST</code> 设置为附近的镜像。定义 <code>CCACHE_DIR</code> 可以启用 <code><a class="package" href="https://cgit.freebsd.org/ports/tree/devel/ccache/">devel/ccache</a></code> 来缓存编译并减少频繁编译代码的构建时间。将 poudriere 数据集放在挂载在 <code>/poudriere</code> 的隔离树中可能很方便。其他配置值的默认设置是足够的。</p>
</div>
<div class="paragraph">
<p>检测到的处理器核心数量用于定义并行运行的构建数量。请提供足够的虚拟内存，可以是 RAM 或者交换空间。如果虚拟内存耗尽，编译环境将停止并被销毁，导致出现奇怪的错误信息。</p>
</div>
<div class="sect2">
<h3 id="poudriere-initialization">4.6.1. 初始化 Jails 和 Port Trees<a class="anchor" href="#poudriere-initialization"></a></h3>
<div class="paragraph">
<p>配置完成后，初始化 poudriere，以便安装一个包含所需 FreeBSD 树和 ports 树的 jail。使用 <code>-j</code> 指定 jail 的名称，并使用 <code>-v</code> 指定 FreeBSD 版本。在运行 FreeBSD/amd64 的系统上，可以使用 <code>-a</code> 将架构设置为 <code>i386</code> 或 <code>amd64</code>。默认架构为 <code>uname</code> 显示的架构。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># poudriere jail -c -j 13amd64 -v 13.1-RELEASE</span>
<span class="o">[</span>00:00:00] Creating 13amd64 fs at /poudriere/jails/13amd64... <span class="k">done</span>
<span class="o">[</span>00:00:00] Using pre-distributed MANIFEST <span class="k">for </span>FreeBSD 13.1-RELEASE amd64
<span class="o">[</span>00:00:00] Fetching base <span class="k">for </span>FreeBSD 13.1-RELEASE amd64
/poudriere/jails/13amd64/fromftp/base.txz              125 MB 4110 kBps    31s
<span class="o">[</span>00:00:33] Extracting base... <span class="k">done</span>
<span class="o">[</span>00:00:54] Fetching src <span class="k">for </span>FreeBSD 13.1-RELEASE amd64
/poudriere/jails/13amd64/fromftp/src.txz               154 MB 4178 kBps    38s
<span class="o">[</span>00:01:33] Extracting src... <span class="k">done</span>
<span class="o">[</span>00:02:31] Fetching lib32 <span class="k">for </span>FreeBSD 13.1-RELEASE amd64
/poudriere/jails/13amd64/fromftp/lib32.txz              24 MB 3969 kBps    06s
<span class="o">[</span>00:02:38] Extracting lib32... <span class="k">done</span>
<span class="o">[</span>00:02:42] Cleaning up... <span class="k">done</span>
<span class="o">[</span>00:02:42] Recording filesystem state <span class="k">for </span>clean... <span class="k">done</span>
<span class="o">[</span>00:02:42] Upgrading using ftp
/etc/resolv.conf -&gt; /poudriere/jails/13amd64/etc/resolv.conf
Looking up update.FreeBSD.org mirrors... 3 mirrors found.
Fetching public key from update4.freebsd.org... <span class="k">done</span>.
Fetching metadata signature <span class="k">for </span>13.1-RELEASE from update4.freebsd.org... <span class="k">done</span>.
Fetching metadata index... <span class="k">done</span>.
Fetching 2 metadata files... <span class="k">done</span>.
Inspecting system... <span class="k">done</span>.
Preparing to download files... <span class="k">done</span>.
Fetching 124 patches.....10....20....30....40....50....60....70....80....90....100....110....120.. <span class="k">done</span>.
Applying patches... <span class="k">done</span>.
Fetching 6 files... <span class="k">done</span>.
The following files will be added as part of updating to
13.1-RELEASE-p1:
/usr/src/contrib/unbound/.github
/usr/src/contrib/unbound/.github/FUNDING.yml
/usr/src/contrib/unbound/contrib/drop2rpz
/usr/src/contrib/unbound/contrib/unbound_portable.service.in
/usr/src/contrib/unbound/services/rpz.c
/usr/src/contrib/unbound/services/rpz.h
/usr/src/lib/libc/tests/gen/spawnp_enoexec.sh
The following files will be updated as part of updating to
13.1-RELEASE-p1:
<span class="o">[</span>…]
Installing updates...Scanning //usr/share/certs/blacklisted <span class="k">for </span>certificates...
Scanning //usr/share/certs/trusted <span class="k">for </span>certificates...
 <span class="k">done</span>.
13.1-RELEASE-p1
<span class="o">[</span>00:04:06] Recording filesystem state <span class="k">for </span>clean... <span class="k">done</span>
<span class="o">[</span>00:04:07] Jail 13amd64 13.1-RELEASE-p1 amd64 is ready to be used</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># poudriere ports -c -p local -m git+https</span>
<span class="o">[</span>00:00:00] Creating <span class="nb">local </span>fs at /poudriere/ports/local... <span class="k">done</span>
<span class="o">[</span>00:00:00] Checking out the ports tree... <span class="k">done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>在一台计算机上，poudriere 可以使用多个配置，在多个 jail 中，从不同的 ports 树构建 ports。这些组合的自定义配置被称为 <em>集合</em>。在安装了 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere/">ports-mgmt/poudriere</a> 或 <a class="package" href="https://cgit.freebsd.org/ports/tree/ports-mgmt/poudriere-devel/">ports-mgmt/poudriere-devel</a> 之后，可以查看 <a href="https://man.freebsd.org/cgi/man.cgi?query=poudriere&amp;sektion=8&amp;format=html">poudriere(8)</a> 的 CUSTOMIZATION 部分获取详细信息。</p>
</div>
<div class="paragraph">
<p>这里显示的基本配置将一个单独的 jail、 port 和 set 特定的 <code>make.conf</code> 放置在 <code>/usr/local/etc/poudriere.d</code> 目录下。在这个示例中，文件名是通过组合 jail 名称、 port 名称和 set 名称创建的：<code>13amd64-local-workstation-make.conf</code>。系统的 <code>make.conf</code> 和这个新文件在构建时会合并，以创建构建 jail 使用的 <code>make.conf</code> 文件。</p>
</div>
<div class="paragraph">
<p>要构建的软件包应该在 <code>13amd64-local-workstation-pkglist</code> 文件中输入（具有 @FLAVOR 的 <a href="{porters-handbook}flavors">FLAVORS</a> 的 ports 可以定义）。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>editors/emacs
devel/git
devel/php-composer2@php82
ports-mgmt/pkg
...</pre>
</div>
</div>
<div class="paragraph">
<p>已配置指定 ports 的选项和依赖项：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># poudriere options -j 13amd64 -p local -z workstation -f 13amd64-local-workstation-pkglist</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>最后，构建软件包并创建软件包仓库：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># poudriere bulk -j 13amd64 -p local -z workstation -f 13amd64-local-workstation-pkglist</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>在运行过程中，按下 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>t</kbd></span> 键可以显示构建的当前状态。poudriere 还会在 <code>/poudriere/logs/bulk/jailname</code> 目录中构建文件，可以与 Web 服务器一起使用以显示构建信息。</p>
</div>
<div class="paragraph">
<p>完成后，新的软件包现在可以从 poudriere 仓库进行安装。</p>
</div>
<div class="paragraph">
<p>有关使用 poudriere 的更多信息，请参阅 <a href="https://man.freebsd.org/cgi/man.cgi?query=poudriere&amp;sektion=8&amp;format=html">poudriere(8)</a> 和主要网站 <a href="https://github.com/freebsd/poudriere/wiki" class="bare">https://github.com/freebsd/poudriere/wiki</a>。</p>
</div>
</div>
<div class="sect2">
<h3 id="_配置_pkg_客户端以使用_poudriere_仓库">4.6.2. 配置 pkg 客户端以使用 poudriere 仓库<a class="anchor" href="#_配置_pkg_客户端以使用_poudriere_仓库"></a></h3>
<div class="paragraph">
<p>虽然可以同时使用自定义仓库和官方仓库，但有时禁用官方仓库是有用的。这可以通过创建一个配置文件来覆盖和禁用官方配置文件来实现。创建 <code>/usr/local/etc/pkg/repos/FreeBSD.conf</code> 文件，其中包含以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>FreeBSD: {
	enabled: no
}</pre>
</div>
</div>
<div class="paragraph">
<p>通常，通过 HTTP 将 poudriere 仓库提供给客户机最为简单。设置一个 web 服务器来提供软件包目录，例如： <code>/usr/local/poudriere/data/packages/13amd64</code>，其中 <code>13amd64</code> 是构建的名称。</p>
</div>
<div class="paragraph">
<p>如果软件包仓库的 URL 是：<code><a href="http://pkg.example.com/13amd64" class="bare">http://pkg.example.com/13amd64</a></code>，那么位于 <code>/usr/local/etc/pkg/repos/custom.conf</code> 的仓库配置文件将如下所示：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>custom: {
	url: &#34;http://pkg.example.com/13amd64&#34;,
	enabled: yes,
}</pre>
</div>
</div>
<div class="paragraph">
<p>如果不希望将软件包仓库暴露在互联网上，可以使用 <code>file://</code> 协议直接指向仓库：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>custom: {
	url: &#34;file:///usr/local/poudriere/data/packages/11amd64&#34;,
	enabled: yes,
}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ports-nextsteps">4.7. 安装后的考虑事项<a class="anchor" href="#ports-nextsteps"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>无论软件是从二进制包还是 ports 安装的，大多数第三方应用程序在安装后都需要进行一定程度的配置。以下命令和位置可用于帮助确定应用程序安装了什么。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>大多数应用程序都会在 <code>/usr/local/etc</code> 目录下安装至少一个默认配置文件。在应用程序有大量配置文件的情况下，会创建一个子目录来存放它们。通常，会安装一些以 <code>.sample</code> 后缀结尾的示例配置文件。应该审查并可能编辑这些配置文件以满足系统的需求。要编辑示例文件，首先将其复制并去掉 <code>.sample</code> 扩展名。</p>
</li>
<li>
<p>提供文档的应用程序会将文档安装到 <code>/usr/local/share/doc</code> 目录下，许多应用程序还会安装手册页。在继续之前，应该先查阅这些文档。</p>
</li>
<li>
<p>一些应用程序运行的服务在启动应用程序之前必须添加到 <code>/etc/rc.conf</code> 中。这些应用程序通常会在 <code>/usr/local/etc/rc.d</code> 中安装一个启动脚本。有关更多信息，请参阅 <a href="../config/#configtuning-starting-services">启动服务</a>。</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>根据设计，应用程序在安装时不会运行启动脚本，也不会在卸载或升级时运行停止脚本。这个决定留给了个别系统管理员来决定。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>使用 <a href="https://man.freebsd.org/cgi/man.cgi?query=csh&amp;sektion=1&amp;format=html">csh(1)</a> 的用户应该运行 <code>rehash</code> 命令来重新构建 shell 的 <code>PATH</code> 中已知的二进制文件列表。</p>
</li>
<li>
<p>使用 <code>pkg info</code> 命令来确定应用程序安装了哪些文件、man 页面和二进制文件。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ports-broken">4.8. 处理损坏的 ports<a class="anchor" href="#ports-broken"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>当 ports 无法构建或安装时，请尝试以下操作：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>搜索一下 <a href="https://www.FreeBSD.org/support/">Problem Report database</a> 中的 ports 是否有待修复的问题报告。如果有的话，实施建议的修复可能会解决这个问题。</p>
</li>
<li>
<p>向 ports 的维护者寻求帮助。在 ports 骨架中键入 <code>make maintainer</code>，或者阅读 ports 的 <code>Makefile</code> 以找到维护者的电子邮件地址。记得在发送给维护者的电子邮件中包含错误之前的输出。</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>一些 ports 不是由个人维护，而是由一个由邮件列表表示的团队维护者维护。其中许多（但不是全部）地址看起来像 <a href="mailto:freebsd-listname@FreeBSD.org">freebsd-listname@FreeBSD.org</a>。在发送电子邮件时，请考虑这一点。</p>
</div>
<div class="paragraph">
<p>特别是，由 <a href="mailto:ports@FreeBSD.org">ports@FreeBSD.org</a> 维护的 ports 不由特定个人维护。相反，任何修复和支持都来自订阅该邮件列表的广大社区。我们始终需要更多的志愿者！</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>如果没有收到邮件回复，请按照 <a href="{problem-reports}#编写 FreeBSD 问题报告">Writing FreeBSD Problem Reports</a> 中的说明，使用 Bugzilla 提交错误报告。</p>
</div>
</li>
<li>
<p>修复它！ <a href="{porters-handbook}">Porter’s Handbook</a> 包含了有关 ports 基础设施的详细信息，以便您可以修复偶尔出现的损坏 ports，甚至提交您自己的 ports！</p>
</li>
<li>
<p>按照 <a href="#pkgng-intro">使用 pkg 进行二进制包管理</a> 中的说明安装软件包，而不是使用 ports。</p>
</li>
</ol>
</div>
</div>
</div>

    </div>
    
    <hr />
    <div class="last-modified">
      <p><strong>Last modified on</strong>: January 3, 2024 by <a href="https://cgit.freebsd.org/doc/commit/?id=c3e03a8" target="_blank">fiercex</a></p>
    </div>
    
    <div class="buttons">
      
      <div class="prev">
        <i class="fa fa-angle-left" aria-hidden="true" title="Prev"></i>
        <div class="container">
          
            <a href=https://free.bsd-doc.org/zh-cn-auto/books/handbook/basics class="direction">Prev</a>
          
        </div>
      </div>
      
      <div class="home">
        <i class="fa fa-home" aria-hidden="true" title="Home"></i>
        <div class="container">
          
            <a href="../" class="direction">Home</a>
          
        </div>
      </div>
      
      <div class="next">
        <div class="container">
          
            <a href=https://free.bsd-doc.org/zh-cn-auto/books/handbook/x11  class="direction">Next</a>
          
        </div>
        <i class="fa fa-angle-right" aria-hidden="true" title="Next"></i>
      </div>
      
    </div>
    <label class="hidden book-menu-overlay" for="menu-control"></label>
  </div>
  <aside class="toc">
    <div class="toc-content">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#ports-synopsis">4.1. 简介</a></li>
    <li><a href="#ports-overview">4.2. 软件安装概述</a></li>
    <li><a href="#ports-finding-applications">4.3. 寻找软件</a></li>
    <li><a href="#pkgng-intro">4.4. 使用 pkg 进行二进制包管理</a></li>
    <li><a href="#ports-using">4.5. 使用 Ports 集合</a></li>
    <li><a href="#ports-poudriere">4.6. 使用 poudriere 构建软件包</a></li>
    <li><a href="#ports-nextsteps">4.7. 安装后的考虑事项</a></li>
    <li><a href="#ports-broken">4.8. 处理损坏的 ports</a></li>
  </ul>
</nav>
      <hr />
      
    </div>
  </aside>
  <a class="to-top" href="#top">
    <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
  </a>
</main>

    <footer>
  <div class="footer-container">
    <section class="logo-column">
          <img src="https://free.bsd-doc.org/images/FreeBSD-colors.svg" width="160" height="50" alt="FreeBSD logo" />
        <div class="options-container">
          
            <div class="language-container">
              <a id="languages" href="https://free.bsd-doc.org/zh-cn-auto/languages">
                
                <img src="https://free.bsd-doc.org/images/language.png" class="language-image" alt="Choose language">
                <span>简体中文-自动翻译</span>
              </a>
            </div>
          
          <div class="theme-container">
            <select id="theme-chooser">
	      <option value="theme-system">System</option>
              <option value="theme-light">Light</option>
              <option value="theme-dark">Dark</option>
              <option value="theme-high-contrast">High contrast</option>
            </select>
          </div>
        </div>
      </section>
      
      <section class="copyright-column">
        <p>&copy; 1994-2024 The FreeBSD Project. All rights reserved</p>
        <span>Made with <span class="heart">♥</span> by the FreeBSD Community</span>
      </section>
  </div>
</footer>

  </body>
</html>
