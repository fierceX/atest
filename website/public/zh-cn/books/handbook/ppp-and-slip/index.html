<!DOCTYPE html>
<html class="theme-light" lang="zh-cn">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=""/>
  <meta name="keywords" content=""/>
  <meta name="copyright" content="1995-2023 The FreeBSD Foundation" />
  <link rel="canonical" href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/" />

  <title>第 28 章 PPP 和 SLIP |  FreeBSD Documentation Portal</title>

  <meta name="theme-color" content="#790000">
  <meta name="color-scheme" content="system light dark high-contrast">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles/main.min.css">
    <link rel="stylesheet" href="/css/font-awesome-min.css">
    <script defer src="/js/theme-chooser.min.js"></script>
    <script defer src="/js/copy-clipboard.min.js"></script>
    <script defer src="/js/search.min.js"></script>

  
  
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:domain" content="docs.FreeBSD.org"/>
    <meta name="twitter:site" content="@freebsd"/>
    <meta name="twitter:url" content="https://twitter.com/freebsd"/>
    <meta property="og:title" content="第 28 章 PPP 和 SLIP" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="http://127.0.0.1:5500favicon.ico"/>
    <meta property="og:image:alt" content="FreeBSD Logo">
    <meta property="og:locale" content="zh-cn" />
    <meta property="og:url" content="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/" />
    <meta property="og:site_name" content="FreeBSD Documentation Portal" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Article",
        "url": "http:\/\/127.0.0.1:5500\/zh-cn\/books\/handbook\/ppp-and-slip\/",
        "name": "FreeBSD Documentation Portal",
        "headline": "FreeBSD Documentation Portal",
        "description": "FreeBSD Documentation Portal"
      }
    </script>
    

  
</head>


  <body>
    <header>
  <div class="header-container">
    <div class="logo-menu-bars-container">
      <a href="http://127.0.0.1:5500" class="logo">
        <img src="/images/FreeBSD-monochromatic.svg" width="160" height="50" alt="FreeBSD logo" />
      </a>
      <label class="menu-bars" for="menu-bars">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </label>
    </div>
    <input id="menu-bars" type="checkbox" />
    
    <div class="search-donate-container">
      
      
    </div>
  </div>
</header>

    
<input type="checkbox" class="hidden toggle" id="menu-control">
<main class="main-wrapper-book">
  <a id="top"></a>
  
  <aside class="book-menu">
    <div class="book-menu-content">
      <input id="search-book" type="text" placeholder="Search" aria-label="Search" maxlength="128" />
      <nav id="MenuContents">
        
  <ul>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ada319c45e780947f82b569049480cc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-8ada319c45e780947f82b569049480cc"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/">
              前言
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-audience">预期的读者</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes-from3">相对于第三版的改动</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes-from2">相对于第二版的改动 (2004)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes">相对于第一版的改变 (2001)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-overview">本手册的组织</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-conv">本书中使用的一些约定</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-acknowledgements">致谢</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-32a83d18a326852a8d9ae2582360bbc8" class="toggle"  />
          <label  for="chapter-32a83d18a326852a8d9ae2582360bbc8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/parti/">
              部分 I. 起步
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a4909db05d872d16d5be86a57cbc2dc7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a4909db05d872d16d5be86a57cbc2dc7"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/">
              第 1 章 介绍
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#introduction-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#nutshell">2. 欢迎来到 FreeBSD 的世界!</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#history">3. 关于 FreeBSD 项目</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6655173739803bf0920b92a7fe8a363d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-6655173739803bf0920b92a7fe8a363d"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/">
              第 2 章 安装 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-hardware">2. 硬件需求</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-pre">3. 安装前的准备工作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-start">4. 开始安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#using-sysinstall">5. 介绍 Sysinstall</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-steps">6. 分配磁盘空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-choosing">7. 选择要安装的软件包</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-media">8. 选择您要使用的安装介质</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-final-warning">9. 安装确认</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-post">10. 安装后的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-trouble">11. 常见问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-advanced">12. 高级安装指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-diff-media">13. 准备您自己的安装介质</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3c2455cadf89eadd3f6e77461085d5e9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3c2455cadf89eadd3f6e77461085d5e9"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/">
              第 3 章 安装 FreeBSD（适用于 9.x 及以后版本）
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-hardware">2. 硬件需求</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-pre">3. 安装前的准备工作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-start">4. 开始安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#using-bsdinstall">5. 介绍 bsdinstall</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-netinstall">6. 通过网络安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-partitioning">7. 分配磁盘空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-final-warning">8. 安装确认</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-post">9. 安装后的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-install-trouble">10. 故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-709481b75d22ad36960f7ac166b3306c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-709481b75d22ad36960f7ac166b3306c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/">
              第 4 章 UNIX 基础
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#consoles">2. 虚拟控制台和终端</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#permissions">3. 权限</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#dirstructure">4. 目录架构</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#disk-organization">5. 磁盘组织</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#mount-unmount">6. 文件系统的挂接和卸下</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-processes">7. 进程</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-daemons">8. 守护进程，信号和杀死进程</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#shells">9. Shells</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#editors">10. 文本编辑器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-devices">11. 设备和设备节点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#binary-formats">12. 二进制文件格式</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-more-information">13. 取得更多的资讯</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-58c050d31a1fbecd859248dacefeb567" class="toggle"  />
          <label  class="icon cursor"  for="chapter-58c050d31a1fbecd859248dacefeb567"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/">
              第 5 章 安装应用程序: Packages 和 Ports
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-overview">2. 软件安装预览</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-finding-applications">3. 寻找您要的应用程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#packages-using">4. 使用 Package 系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-using">5. 使用Ports Collection</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-nextsteps">6. 安装之后还要做点什么？</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-broken">7. 如何处理坏掉的 Ports</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e5a000ce7f50680a180e2c1b83c121bc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e5a000ce7f50680a180e2c1b83c121bc"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/">
              第 6 章 X Window 系统
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x11-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-understanding">2. 理解 X</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-install">3. 安装 X11</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-config">4. 配置 X11</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-fonts">5. 在 X11 中使用字体</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-xdm">6. X 显示管理器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x11-wm">7. 桌面环境</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-5eb30759c3a2873e716dc31d7760054c" class="toggle"  />
          <label  for="chapter-5eb30759c3a2873e716dc31d7760054c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partii/">
              部分 II. 常见的任务
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-c96504f017c56f4bc7f71548cccf5382" class="toggle"  />
          <label  class="icon cursor"  for="chapter-c96504f017c56f4bc7f71548cccf5382"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/">
              第 7 章 桌面应用
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-browsers">2. 浏览器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-productivity">3. 办公、图象处理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-viewers">4. 文档查看器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-finance">5. 财务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-summary">6. 总结</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e1898af36aaacc168e13b673d25b908f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e1898af36aaacc168e13b673d25b908f"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/">
              第 8 章 多媒体
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#multimedia-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#sound-setup">2. 安装声卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#sound-mp3">3. MP3音频</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#video-playback">4. 视频回放</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#tvcard">5. 安装电视卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#scanners">6. 图象扫描仪</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6926664836e63c5cae4b2fa60855f91d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-6926664836e63c5cae4b2fa60855f91d"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/">
              第 9 章 配置FreeBSD的内核
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-custom-kernel">2. 为什么需要建立定制的内核?</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-devices">3. 发现系统硬件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-modules">4. 内核驱动，子系统和模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-building">5. 建立并安装一个定制的内核</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-config">6. 配置文件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-trouble">7. 如果出现问题怎么办</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-19d36bd70a320268f0ea1f66e4f3e224" class="toggle"  />
          <label  class="icon cursor"  for="chapter-19d36bd70a320268f0ea1f66e4f3e224"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/">
              第 10 章 打印
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-intro-spooler">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-intro-setup">3. 基本设置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-advanced">4. 高级设置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-using">5. 使用打印机</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-lpd-alternatives">6. 替换标准后台打印</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-troubleshooting">7. 疑难问题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/">
              第 11 章 Linux® 二进制兼容模式
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-lbc-install">2. 配置 Linux® 二进制兼容模式</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-advanced">3. 高级主题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-51416fdea9d5a1dfa1c2718cd825213a" class="toggle"  />
          <label  for="chapter-51416fdea9d5a1dfa1c2718cd825213a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partiii/">
              部分 III. 系统管理
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-532d0380ba66d66e033765a0b6930ee7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-532d0380ba66d66e033765a0b6930ee7"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/">
              第 12 章 设置和调整
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#config-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-initial">2. 初步配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-core-configuration">3. 核心配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-appconfig">4. 应用程序配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-starting-services">5. 启动服务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-cron">6. 配置 <code>cron</code></a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-rcd">7. 在 FreeBSD 中使用 rc</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#config-network-setup">8. 设置网卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-virtual-hosts">9. 虚拟主机</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-configfiles">10. 配置文件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-sysctl">11. 用 sysctl 进行调整</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-disk">12. 调整磁盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-kernel-limits">13. 调整内核限制</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#adding-swap-space">14. 添加交换空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#acpi-overview">15. 电源和资源管理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#ACPI-debug">16. 使用和调试 FreeBSD ACPI</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-d05f41680fb7e3d68b354ae03de368b1" class="toggle"  />
          <label  class="icon cursor"  for="chapter-d05f41680fb7e3d68b354ae03de368b1"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/">
              第 13 章 FreeBSD 引导过程
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-introduction">2. 引导问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-blocks">3. 引导管理器和各引导阶段</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-kernel">4. 内核在引导时的交互</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#device-hints">5. Device Hints</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-init">6. Init：进程控制及初始化</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-shutdown">7. 关机 (shutdown) 过程</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-17a53b356b407d9ed656b7babd2efa34" class="toggle"  />
          <label  class="icon cursor"  for="chapter-17a53b356b407d9ed656b7babd2efa34"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/">
              第 14 章 用户和基本的帐户管理
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-introduction">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-superuser">3. 超级用户帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-system">4. 系统帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-user">5. 用户帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-modifying">6. 修改帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-limiting">7. 限制用户使用系统资源</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-groups">8. 组</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-513e8e407c57354df334059688e9b60a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-513e8e407c57354df334059688e9b60a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/">
              第 15 章 安全
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-intro">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#securing-freebsd">3. 确保 FreeBSD 的安全</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#crypt">4. DES、 Blowfish、 MD5， 以及 Crypt</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#one-time-passwords">5. 一次性口令</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#tcpwrappers">6. TCP Wrappers</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#kerberos5">7. Kerberos5</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#openssl">8. OpenSSL</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#ipsec">9. IPsec 上的 VPN</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#openssh">10. OpenSSH</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#fs-acl">11. 文件系统访问控制表</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-portaudit">12. 监视第三方安全问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-advisories">13. FreeBSD 安全公告</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-accounting">14. 进程记帐</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0f7d2858504c83a029928c048d394e2a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0f7d2858504c83a029928c048d394e2a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/">
              第 16 章 Jails
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-terms">2. 与 Jail 相关的一些术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-intro">3. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-build">4. 建立和控制 jail</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-tuning">5. 微调和管理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-application">6. Jail 的应用</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-15be125ce5997f51c5499e3a0dee6c2c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-15be125ce5997f51c5499e3a0dee6c2c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/">
              第 17 章 强制访问控制
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-synopsis">1. 概要</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-inline-glossary">2. 本章出现的重要术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-initial">3. 关于 MAC 的说明</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-understandlabel">4. 理解 MAC 标签</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-planning">5. 规划安全配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-modules">6. 模块配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-seeotheruids">7. MAC seeotheruids 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-bsdextended">8. MAC bsdextended 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-ifoff">9. MAC ifoff 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-portacl">10. MAC portacl 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-partition">11. MAC partition (分区) 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-mls">12. MAC 多级 (Multi-Level) 安全模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-biba">13. MAC Biba 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-lomac">14. MAC LOMAC 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-implementing">15. MAC Jail 中的 Nagios</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-userlocked">16. User Lock Down</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-troubleshoot">17. MAC 框架的故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3f7e8d763b17c7d0c44c60505cf0feea" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3f7e8d763b17c7d0c44c60505cf0feea"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/">
              第 18 章 安全事件审计
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-inline-glossary">2. 本章中的一些关键术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-install">3. 安装审计支持</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-config">4. 对审计进行配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-administration">5. 管理审计子系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7bb1cb2287cd08a3672cc878e604f0d0" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7bb1cb2287cd08a3672cc878e604f0d0"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/">
              第 19 章 存储
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-naming">2. 设备命名</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-adding">3. 添加磁盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#raid">4. RAID</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#usb-disks">5. USB 存储设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#creating-cds">6. 创建和使用光学介质(CD)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#creating-dvds">7. 创建和使用光学介质(DVD)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#floppies">8. 创建和使用软盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backups-tapebackups">9. 用磁带机备份</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backups-floppybackups">10. 用软盘备份</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backup-strategies">11. 备份策略</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backup-basics">12. 备份程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-virtual">13. 网络、内存和 和以及映像文件为介质的虚拟文件系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#snapshots">14. 文件系统快照</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#quotas">15. 文件系统配额</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-encrypting">16. 加密磁盘分区</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#swap-encrypting">17. 对交换区进行加密</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-hast">18. 高可用性存储 (HAST)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-dec5fc4f0100e5030db0fb188d8d4b2f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-dec5fc4f0100e5030db0fb188d8d4b2f"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/">
              第 20 章 GEOM: 模块化磁盘变换框架
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-intro">2. GEOM 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-striping">3. RAID0 - 条带</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-mirror">4. RAID1 - 镜像</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-raid3">5. RAID3 - 使用专用校验设备的字节级条带</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-ggate">6. GEOM Gate 网络设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-glabel">7. 为磁盘设备添加卷标</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-gjournal">8. 通过 GEOM 实现 UFS 日志</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-4c6bf6828e601b79edb2813329ac6604" class="toggle"  />
          <label  class="icon cursor"  for="chapter-4c6bf6828e601b79edb2813329ac6604"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/">
              第 21 章 文件系统 Support
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/#filesystems-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/#filesystems-zfs">2. Z 文件系统 (ZFS)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-11d260f2685c0b17137e64887e1b1989" class="toggle"  />
          <label  class="icon cursor"  for="chapter-11d260f2685c0b17137e64887e1b1989"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/">
              第 22 章 Vinum 卷管理程序
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-intro">2. 磁盘容量太小</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-access-bottlenecks">3. 访问瓶颈</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-data-integrity">4. 数据的完整性</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-objects">5. Vinum 目标</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-examples">6. 一些例子</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-object-naming">7. 对象命名</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-config">8. 配置 Vinum</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-root">9. 使用 Vinum 作为根文件系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-ae23289d4b6415f3f878893f9d3ef9b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-ae23289d4b6415f3f878893f9d3ef9b8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/">
              第 23 章 虚拟化
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-guest">2. 作为客户 OS 的 FreeBSD</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-host">3. 作为宿主 OS 的 FreeBSD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-b279d2b738963a45a059268d2fae00d5" class="toggle"  />
          <label  class="icon cursor"  for="chapter-b279d2b738963a45a059268d2fae00d5"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/">
              第 24 章 本地化－I18N/L10N使用和设置
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-basics">2. 基础知识</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#using-localization">3. 使用本地化语言</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-compiling">4. 编译I18N程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#lang-setup">5. 本地化FreeBSD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9e3f99bd76c861ab2e9a5f31ac421842" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9e3f99bd76c861ab2e9a5f31ac421842"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/">
              第 25 章 更新与升级 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate">2. FreeBSD 更新</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-portsnap">3. Portsnap： 一个 Ports Collection 更新工具</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-documentation">4. 更新系统附带的文档</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#current-stable">5. 追踪开发分支</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#synching">6. 同步您的源码</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#makeworld">7. 重新编译 "world"</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#make-delete-old">8. 删除过时的文件、 目录和函数库</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#small-lan">9. 跟踪多台机器</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3ba999091575eb04ae88235cd0fb1afa" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3ba999091575eb04ae88235cd0fb1afa"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/">
              第 26 章 DTrace
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-implementation">2. 实现上的差异</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-enable">3. 启用 DTrace 支持</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-using">4. 使用 DTrace</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-language">5. D 语言</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6d4439926bb106ac084ecc88cfd3cfa4" class="toggle"  />
          <label  for="chapter-6d4439926bb106ac084ecc88cfd3cfa4"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partiv/">
              部分 IV. 网络通讯
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-05a353fcb61d8e035f7c43e14725766e" class="toggle"  />
          <label  class="icon cursor"  for="chapter-05a353fcb61d8e035f7c43e14725766e"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/">
              第 27 章 串口通讯
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serial-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serial">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#term">3. 终端</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#dialup">4. 拨入服务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#dialout">5. 拨出设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serialconsole-setup">6. 设置串口控制台</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8" class="toggle"  checked  />
          <label  class="icon cursor"  for="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/">
              第 28 章 PPP 和 SLIP
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#userppp">2. 使用用户级 PPP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp">3. 使用内核级PPP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp-troubleshoot">4. PPP 连接故障排除</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#pppoe">5. 使用基于以太网的PPP(PPPoE)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#pppoa">6. 使用 ATM 上的 PPP (PPPoA)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#slip">7. 使用SLIP</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9d023b545804f197d195dd9412749943" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9d023b545804f197d195dd9412749943"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/">
              第 29 章 电子邮件
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-using">2. 使用电子邮件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#sendmail">3. sendmail 配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-changingmta">4. 改变您的邮件传输代理程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-trouble">5. 疑难解答</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-advanced">6. 高级主题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-UUCP">7. SMTP 与 UUCP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#outgoing-only">8. 只发送邮件的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-dialup">9. 拨号连接时使用邮件传送</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-Auth">10. SMTP 验证</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-agents">11. 邮件用户代理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-fetchmail">12. 使用 fetchmail</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-procmail">13. 使用 procmail</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-42b19e05d30c4135c74b9878818747a9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-42b19e05d30c4135c74b9878818747a9"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/">
              第 30 章 网络服务器
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-servers-synopsis">1. 概要</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-inetd">2. inetd"超级服务器"</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-nfs">3. 网络文件系统（NFS）</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-nis">4. 网络信息服务 (NIS/YP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-dhcp">5. 网络自动配置 (DHCP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-dns">6. 域名系统 (DNS)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-apache">7. Apache HTTP 服务器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-ftp">8. 文件传输协议 (FTP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-samba">9. 为 Microsoft® Windows® 客户机提供文件和打印服务 (Samba)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-ntp">10. 通过 NTP 进行时钟同步</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-syslogd">11. 使用 <code>syslogd</code> 记录远程主机的日志</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9554a5177d00d0e87ada408809a1fc67" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9554a5177d00d0e87ada408809a1fc67"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/">
              第 31 章 防火墙
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-intro">1. 入门</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-concepts">2. 防火墙的概念</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-apps">3. 防火墙软件包</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-pf">4. OpenBSD Packet Filter (PF) 和 ALTQ</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-ipf">5. IPFILTER (IPF) 防火墙</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-ipfw">6. IPFW</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9903a1d844ed803a436595e93ec33572" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9903a1d844ed803a436595e93ec33572"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/">
              第 32 章 高级网络
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#advanced-networking-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-routing">2. 网关和路由</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-wireless">3. 无线网络</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-bluetooth">4. 蓝牙</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-bridging">5. 桥接</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-aggregation">6. 链路聚合与故障转移</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-diskless">7. 无盘操作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-pxe-nfs">8. 从 PXE 启动一个 NFS 根文件系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-isdn">9. ISDN</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-natd">10. 网络地址转换</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-plip">11. 并口电缆 IP (PLIP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-ipv6">12. IPv6</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-atm">13. 异步传输模式 (ATM)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#carp">14. Common Address Redundancy Protocol (CARP， 共用地址冗余协议)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ca29f99c249993ee9234cb4632af7a5" class="toggle"  />
          <label  for="chapter-8ca29f99c249993ee9234cb4632af7a5"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partv/">
              部分 V. 附录
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0229d553ebf23ffeb945be6f32836221" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0229d553ebf23ffeb945be6f32836221"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/">
              附录 A. 获取 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-cdrom">1. CDROM 和 DVD 发行商</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-ftp">2. FTP 站点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#anoncvs">3. 匿名 CVS</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#ctm">4. 使用 CTM</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#cvsup">5. 使用 CVSup</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#cvs-tags">6. CVS 标签</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-afs">7. AFS 站点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-rsync">8. rsync 站点</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-743c99fa278b8138914ff018e40c9231" class="toggle"  />
          <label  class="icon cursor"  for="chapter-743c99fa278b8138914ff018e40c9231"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/">
              附录 B. 参考文献
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-freebsd">1. 关于 FreeBSD 的专业书籍与杂志</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-userguides">2. 用户指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-adminguides">3. 管理员指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-programmers">4. 开发指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-osinternals">5. 操作系统原理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-security">6. 安全方面的参考文献</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-hardware">7. 硬件参考</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-history">8. UNIX® 历史</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-journals">9. 各种期刊</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-de7eade4b8b64f298c0cbac44c2278da" class="toggle"  />
          <label  class="icon cursor"  for="chapter-de7eade4b8b64f298c0cbac44c2278da"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/">
              附录 C. Internet上的资源
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-mail">1. 邮件列表</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-news">2. Usenet新闻组</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-web">3. World Wide Web服务器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-email">4. Email地址</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26" class="toggle"  />
          <label  class="icon cursor"  for="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/pgpkeys/">
              附录 D. PGP公钥
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/pgpkeys/#pgpkeys-officers">1. Officers</a></li>
  </ul>

          

        
      </li>
    
      <li>
        
      </li>
    
  </ul>


      </nav>
    </div>
  </aside>
  
  <div class="book">
    
    <div class="book-menu-mobile">
      <label for="menu-control">
        <span class="menu-control-button">
          <i class="fa fa-list" aria-hidden="true" title="Book menu"></i>
          Book menu
        </span>
      </label>
    </div>
    
    <h1 class="title">第 28 章 PPP 和 SLIP</h1>
    
    
      <div class="admonitionblock note">
        <p>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          This translation may be out of date. To help with the translations please access the <a href="https://translate-dev.freebsd.org/" target="_blank">FreeBSD translations instance</a>.
        </p>
      </div>
    
    
    
    <div class="toc-mobile">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#ppp-and-slip-synopsis">1. 概述</a></li>
    <li><a href="#userppp">2. 使用用户级 PPP</a></li>
    <li><a href="#ppp">3. 使用内核级PPP</a></li>
    <li><a href="#ppp-troubleshoot">4. PPP 连接故障排除</a></li>
    <li><a href="#pppoe">5. 使用基于以太网的PPP(PPPoE)</a></li>
    <li><a href="#pppoa">6. 使用 ATM 上的 PPP (PPPoA)</a></li>
    <li><a href="#slip">7. 使用SLIP</a></li>
  </ul>
</nav>
    </div>
    
      
      
    
    <div class="book-content">
      <div id="preamble">
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="ppp-and-slip-synopsis">1. 概述<a class="anchor" href="#ppp-and-slip-synopsis"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>FreeBSD 有很多方法可以将计算机与计算机连接起来。 通过使用拨号 modem 来建立网络或 Internet 连接， 或允许其他人通过您的机器来连上网络， 这些都要求使用 PPP 或 SLIP。 这章将详细介绍设置这些基于 modem 的通信服务的方法。</p>
</div>
<div class="paragraph">
<p>读完这一章， 您将了解：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如何设置用户级 PPP。</p>
</li>
<li>
<p>如何设置内核级 PPP。 (仅限 FreeBSD 7.X)。</p>
</li>
<li>
<p>如何设置 PPPoE (PPP over Ethernet)。</p>
</li>
<li>
<p>如何设置 PPPoA (PPP over ATM)。</p>
</li>
<li>
<p>如何配置和安装 SLIP 客户端和服务器。 (仅限 FreeBSD 7.X)。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在阅读这章之前， 您应：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>熟悉基本的网络术语。</p>
</li>
<li>
<p>理解拨号连接和 PPP、 SLIP 的基础知识。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>您可能想知道用户级 PPP 与内核级 PPP 之间的不同之处。 回答很简单： 用户级 PPP 处理用户级的输入和输出数据， 而不是内核级。 在内核与用户区之间复制数据的花费要大一些， 但它能提供具有更多特性的PPP实现。 用户级PPP使用 <span class="filename">tun</span> 设备与外界通信而内核级 PPP 使用 <span class="filename">ppp</span> 设备。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在这章中， 如果没有特殊说明， 则 ppp 指的是用户态 PPP， 除非需要和其它 PPP 软件， 例如 pppd (仅限 FreeBSD 7.X) 加以区分。 另外， 若没有额外的注明， 本章所介绍的所有命令都需要以 <code>root</code> 身份来运行权限。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="userppp">2. 使用用户级 PPP<a class="anchor" href="#userppp"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， man:uart[4] 驱动取代了 man:sio[4] 驱动。 用以表示串口的设备节点由分别 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>， 并从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户在升级时需要因应之对配置文件进行必要的更改。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="_用户级_ppp">2.1. 用户级 PPP<a class="anchor" href="#_用户级_ppp"></a></h3>
<div class="sect3">
<h4 id="_前提条件">2.1.1. 前提条件<a class="anchor" href="#_前提条件"></a></h4>
<div class="paragraph">
<p>本章假定您具备如下条件：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>您有一个 ISP 提供的用于连接使用 PPP 的帐号。</p>
</li>
<li>
<p>您需要有连接在系统上， 并做了正确配置的 modem， 或其他能够连接您 ISP 的设备。</p>
</li>
<li>
<p>ISP 的拨号号码。</p>
</li>
<li>
<p>您的登录名称和密码 (可能是一般的 UNIX 风格的登录名和密码对， 也可能是 PAP 或 CHAP 登录名和密码对)。</p>
</li>
<li>
<p>一个或多个域名服务器 IP 地址。 通常， 您会从ISP处得到两个这样的IP地址。 如果您至少得到了一个， 就可以在文件 <span class="filename">ppp.conf</span> 中加入 <code>enable dns</code> 命令使 ppp 设置域名服务。 这个功能取决于 ISP 对支持 DNS 协商的具体实现。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>下面的信息由您的 ISP 提供， 但不是必需的：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ISP的网关IP地址。 网关是您准备连接， 并设为 <em>默认路由</em> 的主机。 如果您没有这个信息， 您可以虚构一个， 在连接时 ISP 的 PPP 服务器会自动告诉您正确的值。</p>
<div class="paragraph">
<p>这个虚构的 IP 地址在 ppp 中记做 <code>HISADDR</code>。</p>
</div>
</li>
<li>
<p>准备使用的子网掩码。 如果ISP没有提供， 一般使用 <code>255.255.255.255</code> 是没有问题的。</p>
</li>
<li>
<p>如果 ISP 提供了静态的IP地址和主机名， 可以输入它们。 反之， 则应让对方主机指定它认为合适的 IP 地址。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果您不知道这些信息， 请与您的 ISP 联系。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在这节中， 所有作为例子展示的配置文件中都有行号。 这些行号只是为了使解释和讨论变得方便， 在真实的文件中并不存在。 此外， 在必要时应使用 Tab 和空格来进行缩进。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_ppp自动化配置">2.1.2. PPP自动化配置<a class="anchor" href="#_ppp自动化配置"></a></h4>
<div class="paragraph">
<p><code>ppp</code>和<code>pppd</code>(PPP的内核级实现， 仅限 FreeBSD 7.X) 都使用 <span class="filename">/etc/ppp</span> 目录中的配置文件。 用户级 PPP 的例子可以在 <span class="filename">/usr/shared/examples/ppp/</span> 中找到。</p>
</div>
<div class="paragraph">
<p>配置<code>ppp</code>要求根据您的需要编辑几个文件。 编辑哪几个文件取决于您的 IP 是静态分配 (每次都使用同一个地址) 还是动态分配的 (每次连接到 ISP 都会获得不同的 IP 地址)。</p>
</div>
<div class="sect4">
<h5 id="userppp-staticIP">2.1.2.1. PPP和静态IP地址<a class="anchor" href="#userppp-staticIP"></a></h5>
<div class="paragraph">
<p>您需要编辑配置文件<span class="filename">/etc/ppp/ppp.conf</span>， 如下所示。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>以冒号<code>:</code>结尾的行从第一列 (行首)开始， 其它所有的行都要使用空格或制表符 (Tab) 来缩进。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuau0
5       set speed 115200
6       set dial &#34;ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \&#34;\&#34; AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT&#34;
8       set timeout 180
9       enable dns
10
11    provider:
12      set phone &#34;(123) 456 7890&#34;
13      set authname foo
14      set authkey bar
15      set login &#34;TIMEOUT 10 \&#34;\&#34; \&#34;\&#34; gin:--gin: \\U word: \\P col: ppp&#34;
16      set timeout 300
17      set ifaddr x.x.x.x y.y.y.y 255.255.255.255 0.0.0.0
18      add default HISADDR</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">行1：</dt>
<dd>
<p>指定默认的项。 当PPP运行时这个项中的命令将自动执行。</p>
</dd>
<dt class="hdlist1">行2：</dt>
<dd>
<p>启用登录参数。 工作正常后， 为避免产生过多的日志文件， 这行应该简化为：</p>
<div class="literalblock programlisting">
<div class="content">
<pre>set log phase tun</pre>
</div>
</div>
</dd>
<dt class="hdlist1">行 3：</dt>
<dd>
<p>告诉 PPP 怎样向对方标识自己。 如果在建立或使用连接时遇到任何麻烦， PPP就会向对方主机自我标识。 对方主机管理员在处理这个问题时， 这些信息会有用。</p>
</dd>
<dt class="hdlist1">行 4：</dt>
<dd>
<p>标明modem要连接的端口号。 <span class="filename">COM1</span> 对应的设备是 <span class="filename">/dev/cuau0</span> 而 <span class="filename">COM2</span> 对应的则是 <span class="filename">/dev/cuau1</span>。</p>
</dd>
<dt class="hdlist1">行 5：</dt>
<dd>
<p>设置连接的速度。 如果 115200 有问题， 试试 38400。</p>
</dd>
<dt class="hdlist1">行 6 &amp; 7：</dt>
<dd>
<p>拨号字符串。 用户级 PPP 使用一种与 man:chat[8]程序相似的语法。 请参考联机手册了解这种语言的相关信息。</p>
<div class="paragraph">
<p>注意， 为了便于阅读此命令进行了换行。 任何 <span class="filename">ppp.conf</span> 里的命令都可以这样做， 前提是行的最后一个字符必须是 <code>\</code>。</p>
</div>
</dd>
<dt class="hdlist1">行 8：</dt>
<dd>
<p>设置连接的时间间隔。 默认是 180 秒， 所以这一行是多余的。</p>
</dd>
<dt class="hdlist1">行 9：</dt>
<dd>
<p>告诉PPP向对方主机确认本地域名解析设置。 如果您运行了本地的域名服务器， 要注释或删除掉这一行。</p>
</dd>
<dt class="hdlist1">行 10：</dt>
<dd>
<p>为了可读性的需要设置一个空行。 空行会被PPP忽略。</p>
</dd>
<dt class="hdlist1">行 11：</dt>
<dd>
<p>为 &#34;provider&#34;指定一个项。 可以改成 ISP的名字， 这样您以后就可以使用 <code>load <em>ISP</em></code> 来开启连接。</p>
</dd>
<dt class="hdlist1">行 12：</dt>
<dd>
<p>设置提供商的电话号码。 多个电话号码可以使用冒号 (<code>:</code>) 或管道符号 (<code>|</code>) 隔开。 这两个字符的区别在man:ppp[8]的联机手册中有介绍。 总的来讲， 如果您要循环使用这些号码， 可以使用冒号。 如果您想使用第一个号码， 当第一个号码失败了再用第二个号码， 就使用管道符号。 如所示的那样， 要给整个电话号码加上引号(&#34;)。</p>
<div class="paragraph">
<p>如果电话号码里有空格， 必须用引号(<code>&#34;</code>)将其括起来。 否则会造成简单却难以察觉的错误。</p>
</div>
</dd>
<dt class="hdlist1">行 13 &amp; 14：</dt>
<dd>
<p>指定用户名和密码。 当使用 UNIX® 风格的命令提示符登录时， 这些值可以用带有 \U \P 参数的 <code>set login</code> 命令进行修改。 当使用PAP或CHAP进行连接时， 这些值在验证使用。</p>
</dd>
<dt class="hdlist1">行 15：</dt>
<dd>
<p>如果您使用的是PAP或者CHAP， 在这里就不会有登录。 要注释或删除掉这一行。 请参考 <a href="#userppp-PAPnCHAP">PAP 和 CHAP认证</a> 以了解更多细节。</p>
<div class="paragraph">
<p>登录命令是的语法是chat类型的。 在这个例子中是这样的：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">J. Random Provider
login: foo
password: bar
protocol: ppp</code></pre>
</div>
</div>
<div class="paragraph">
<p>您需要改变这个脚本以适合您自己的需要。 当您第一次写这个脚本时， 应当确保已经启用 &#34;chat&#34; 并处于登录状态， 这样您才能确认通信是否正在按计划进行。</p>
</div>
</dd>
<dt class="hdlist1">行16：</dt>
<dd>
<p>设置默认的超时时间。 这里， 连接若在 300 秒内无响应将被断开。如果您不想设置成超时， 将这个值设置成0， 或在命令行使用 <code>-ddial</code> 选项。</p>
</dd>
<dt class="hdlist1">行 17：</dt>
<dd>
<p>设置接口地址。 您需要用 ISP 提供给您的 IP 地址替换字符串 <em>x.x.x.x</em>， 用 ISP 的网关 IP 地址 (即您要连接的主机) 替换字符串 <em>y.y.y.y</em>。 如果ISP没有给您提供网关地址， 可以使用 <code>10.0.0.2/0</code>。 如果您需要使用一个 &#34;猜到&#34;的地址， 请确保在 <span class="filename">/etc/ppp/ppp.linkup</span> 中为每个 <a href="#userppp-dynamicIP">PPP和动态IP地址</a> 指令创建了这一项。 如果没有这一行， <code>ppp</code> 将无法以 <code>-auto</code> 模式运行。</p>
</dd>
<dt class="hdlist1">第18行：</dt>
<dd>
<p>添加一个到ISP网关的默认路由。 <code>HISADDR</code>这个关键字会被第17行所指定的网关地址替换。 这行必须出现在第17行之后，以免在 <code>HISADDR</code> 初始化之前使用它的值。</p>
<div class="paragraph">
<p>如果您不想使用 <code>-auto</code> 的 PPP，则这行应挪到 <span class="filename">ppp.linkup</span> 文件中。</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>若您有一个静态IP地址， 且使用<code>-auto</code> 模式运行ppp(因为在连接之前已经正确设置了路由表项)， 那就不需要再向<span class="filename">ppp.linkup</span> 添加项。 您可能希望在连接以后创建一个项来调用程序。 这在以后的sendmail的例子中会解释。</p>
</div>
<div class="paragraph">
<p>示例配置文件可以在目录 <span class="filename">/usr/shared/examples/ppp/</span> 中找到。</p>
</div>
</div>
<div class="sect4">
<h5 id="userppp-dynamicIP">2.1.2.2. PPP和动态IP地址<a class="anchor" href="#userppp-dynamicIP"></a></h5>
<div class="paragraph">
<p>如果ISP没给您指定静态的IP地址， <code>ppp</code>要被配置成能够与对方协商确定本地和远程地址。 要完成这项工作， 先要&#34;猜&#34;一个IP地址， 然后允许 <code>ppp</code>在连接后使用IP配置协议(IPCP)进行正确配置。 <span class="filename">ppp.conf</span>的配置是与 <a href="#userppp-staticIP">PPP和静态IP地址</a>一样的， 除了以下的改变：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255 0.0.0.0</pre>
</div>
</div>
<div class="paragraph">
<p>再次强调， 不要包括行号， 它只是一个引用标记。 缩排一个空格是必需的。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">行17：</dt>
<dd>
<p><code>/</code> 字符后面是 PPP 所要求的地址掩码。 您可以根据需要使用不同 IP 地址， 但以上的例子永远是可行的。</p>
<div class="paragraph">
<p>最后的参数(<code>0.0.0.0</code>)告诉 PPP从<code>0.0.0.0</code> 而不是 <code>10.0.0.1</code> 开始协商地址， 对于有些ISP， 这是必需的。 不要将 <code>0.0.0.0</code> 作为 <code>set ifaddr</code> 的第一个参数， 因为这使得 PPP 在 <code>-auto</code> 模式时不能设置初始路由。</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>如果您不运行<code>-auto</code>模式， 就需要在<span class="filename">/etc/ppp/ppp.linkup</span>中创建一个项。 连接建立之后， <span class="filename">ppp.linkup</span>被启用。 这时候， <code>ppp</code>将指派接口地址， 接着再添加路由表项：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>1     provider:
2        add default HISADDR</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">行 1：</dt>
<dd>
<p>为了建立连接， <code>ppp</code> 会按照如下规则在 <span class="filename">ppp.linkup</span>寻找项:首先， 试图寻找相同的标签 (如同在<span class="filename">ppp.conf</span>一样）。 如果失败了， 寻找作为网关 IP 地址的项， 此项是四个八位字节的风格。 如果依旧没有找到， 就寻找 <code>MYADDR</code> 项</p>
</dd>
<dt class="hdlist1">行 2：</dt>
<dd>
<p>这行告诉 <code>ppp</code>添加指向 <code>HISADDR</code>的默认路由。 <code>HISADDR</code>由通过IPCP协商得到的IP号替换。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>参考<span class="filename">/usr/shared/examples/ppp/ppp.conf.sample</span> 和<span class="filename">/usr/shared/examples/ppp/ppp.linkup.sample</span> 中的<code>pmdemand</code>项以获取细节化的例子。</p>
</div>
</div>
<div class="sect4">
<h5 id="_接收拨入">2.1.2.3. 接收拨入<a class="anchor" href="#_接收拨入"></a></h5>
<div class="paragraph">
<p>当要配置 ppp接受来自LAN上的 拨入时， 您需要决定是否将包转给LAN。 如果是的话， 您就必须从 LAN 子网中给对方分配一个IP， 需要在文件 <span class="filename">/etc/ppp/ppp.conf</span> 中使用命令 <code>enable proxy</code>。 您还应该确定文件 <span class="filename">/etc/rc.conf</span> 中包含以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>gateway_enable=&#34;YES&#34;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_使用哪个getty">2.1.2.4. 使用哪个getty？<a class="anchor" href="#_使用哪个getty"></a></h5>
<div class="paragraph">
<p>crossref:serialcomms[dialup,配置 FreeBSD 的拨号服务] 描述了如何用 man:getty[8] 来启动拨号服务。</p>
</div>
<div class="paragraph">
<p>除了 <code>getty</code> 之外还有 <a href="http://mgetty.greenie.net/">mgetty</a> (可通过 package:comms/mgetty+sendfax[] port 来安装)， 它是 <code>getty</code> 的智能版本， 是按照拨号线的思想设计的。</p>
</div>
<div class="paragraph">
<p>使用 <code>mgetty</code> 的好处是它能积极地与 modem 进行 <em>会话</em>， 这就意味着如果在<span class="filename">/etc/ttys</span>中的端口被关闭， 您的moderm就不会回应拨入。</p>
</div>
<div class="paragraph">
<p>较新版本的 <code>mgetty</code> (从 0.99beta 起) 也支持自动检测 PPP 数据流， 这样即便客户端不使用脚本也能访问服务器了。</p>
</div>
<div class="paragraph">
<p>参考<a href="#userppp-mgetty">Mgetty 和 AutoPPP</a>的联机手册了解更多信息。</p>
</div>
</div>
<div class="sect4">
<h5 id="_ppp_权限">2.1.2.5. PPP 权限<a class="anchor" href="#_ppp_权限"></a></h5>
<div class="paragraph">
<p><code>ppp</code> 命令通常必须以 <code>root</code> 用户的身份运行。 如果希望以普通用户的身份启动 <code>ppp</code> 服务 (就像下面描述的那样)， 就必须把此用户加入 <code>network</code> 组， 使其获得运行 <code>ppp</code> 的权限。</p>
</div>
<div class="paragraph">
<p>您还需要使用<code>allow</code>命令使用户能访问配置文 件的一个或多个部分：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>allow users fred mary</pre>
</div>
</div>
<div class="paragraph">
<p>如果这个命令被用在 <code>default</code> 部分中， 您可以让指定的用户访问任何东西。</p>
</div>
</div>
<div class="sect4">
<h5 id="_动态ip用户的ppp_shell">2.1.2.6. 动态IP用户的PPP Shell<a class="anchor" href="#_动态ip用户的ppp_shell"></a></h5>
<div class="paragraph">
<p>创建一个名为<span class="filename">/etc/ppp/ppp-shell</span>文件， 加入以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
IDENT=`echo $0 | sed -e &#39;s/^.*-\(.*\)$/\1/&#39;`
CALLEDAS=&#34;$IDENT&#34;
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo &#34;PPP for $CALLEDAS on $TTY&#34;
echo &#34;Starting PPP for $IDENT&#34;

exec /usr/sbin/ppp -direct $IDENT</pre>
</div>
</div>
<div class="paragraph">
<p>这个脚本要有可执行属性。 然后通过如下命令创建一个指向此脚本且名为 <span class="filename">ppp-dialup</span>的符号链接：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ln -s ppp-shell /etc/ppp/ppp-dialup</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>您应该将这个脚本作为所有拨入用户的 <em>shell</em>。 以下是在文件 <span class="filename">/etc/passwd</span> 中关于 PPP 用户 <code>pchilds</code> 的例子 (切记， 不要直接修改这个密码文件， 用 man:vipw[8] 来修改它)。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre>
</div>
</div>
<div class="paragraph">
<p>创建一个名为 <span class="filename">/home/ppp</span> 的目录作为拨入用户的主目录， 其中包含以下这些空文件：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nt">-r--r--r--</span>   1 root     wheel           0 May 27 02:23 .hushlogin
<span class="nt">-r--r--r--</span>   1 root     wheel           0 May 27 02:22 .rhosts</code></pre>
</div>
</div>
<div class="paragraph">
<p>这样就可以防止<span class="filename">/etc/motd</span>被显示出来。</p>
</div>
</div>
<div class="sect4">
<h5 id="_静态ip用户的shell">2.1.2.7. 静态IP用户的Shell<a class="anchor" href="#_静态ip用户的shell"></a></h5>
<div class="paragraph">
<p>像上面那样创建<span class="filename">ppp-shell</span>文件， 为每个静态分配IP用户创建一个到 <span class="filename">ppp-shell</span>的 符号链接。</p>
</div>
<div class="paragraph">
<p>例如， 如果您希望为三个拨号用户， <code>fred</code>， <code>sam</code>， 和 <code>mary</code> 路由 /24 CIDR 的网络， 则需要键入以下内容：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</span>
<span class="c"># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</span>
<span class="c"># ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>每个用户的Shell必须被设成一个符号链接(例如用户 <code>mary</code>的Shell应该是<span class="filename">/etc/ppp/ppp-mary</span>)。</p>
</div>
</div>
<div class="sect4">
<h5 id="_为动态ip用户设置ppp_conf">2.1.2.8. 为动态IP用户设置<span class="filename">ppp.conf</span><a class="anchor" href="#_为动态ip用户设置ppp_conf"></a></h5>
<div class="paragraph">
<p><span class="filename">/etc/ppp/ppp.conf</span>文件应该包含下面 这些行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>default:
  set debug phase lcp chat
  set timeout 0

ttyu0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyu1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>缩进得必须的。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>default:</code>项在每次会话时都会加载。 每个在 <span class="filename">/etc/ttys</span> 中启用的行都必须为其创建一个相似于 <code>ttyu0:</code> 的项。 每一行应该从动态 IP 地址池中取得唯一的IP地址。</p>
</div>
</div>
<div class="sect4">
<h5 id="_为静态_ip_用户配置_ppp_conf">2.1.2.9. 为静态 IP 用户配置 <span class="filename">ppp.conf</span><a class="anchor" href="#_为静态_ip_用户配置_ppp_conf"></a></h5>
<div class="paragraph">
<p>根据上面 <span class="filename">/usr/shared/examples/ppp/ppp.conf</span> 文件的内容， 您必须为每个静态拨号用户添加一个项。 我们继续以 <code>fred</code>、 <code>sam</code> 以及 <code>mary</code>为例。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre>
</div>
</div>
<div class="paragraph">
<p>如果需要， <span class="filename">/etc/ppp/ppp.linkup</span> 也应该包括每个静态IP用户的的路由信息。 下面这一行为客户连接添加了到 <code>203.14.101.0/24</code> 网络的路由。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="userppp-mgetty">2.1.2.10. <code>mgetty</code>和AutoPPP<a class="anchor" href="#userppp-mgetty"></a></h5>
<div class="paragraph">
<p>默认情况下， package:comms/mgetty+sendfax[] port 在编译时启用了 <code>AUTO_PPP</code> 选项， 它使 <code>mgetty</code> 能够检测 PPP 连接的 LCP 状态， 并自动产生 PPP shell。 不过， 由于在默认配置中的 login/password 序列并不出现， 因此， 就必须使用 PAP 或 CHAP 来严重用户身份。</p>
</div>
<div class="paragraph">
<p>这节假定用户已经在系统中成功地编译并安装了 package:comms/mgetty+sendfax[]。</p>
</div>
<div class="paragraph">
<p>确认您的 <span class="filename">/usr/local/etc/mgetty+sendfax/login.config</span> 文件中包含以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</pre>
</div>
</div>
<div class="paragraph">
<p>这行告诉<code>mgetty</code>运行 <span class="filename">ppp-pap-dialup</span>脚本来侦听PPP连接。</p>
</div>
<div class="paragraph">
<p>创建<span class="filename">/etc/ppp/ppp-pap-dialup</span>文件写入以下内容 (此文件应该是可执行的)：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</pre>
</div>
</div>
<div class="paragraph">
<p>对应于每个在<span class="filename">/etc/ttys</span>的启用行， 都要在<span class="filename">/etc/ppp/ppp.conf</span> 中创建相应的项。 这和上面的定义是相同的。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre>
</div>
</div>
<div class="paragraph">
<p>每个以这种方式登录的用户， 都必须在 <span class="filename">/etc/ppp/ppp.secret</span> 文件中给出用户名/口令， 或者使用以下选项， 来通过 PAP 方式以 <span class="filename">/etc/passwd</span> 文件提供的信息来完成身份验证。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>enable passwdauth</pre>
</div>
</div>
<div class="paragraph">
<p>如果您想为某些用户分配静态IP， 可以在 <span class="filename">/etc/ppp/ppp.secret</span> 中将IP号作为第三个参数指定。 请参见 <span class="filename">/usr/shared/examples/ppp/ppp.secret.sample</span> 中的例子。</p>
</div>
</div>
<div class="sect4">
<h5 id="_ms_extensions">2.1.2.11. MS Extensions<a class="anchor" href="#_ms_extensions"></a></h5>
<div class="paragraph">
<p>可以配置PPP以提供DNS和NetBIOS域名服务器地址。</p>
</div>
<div class="paragraph">
<p>要在 PPP 1.x 版本中启用这些扩展， 需要在 <span class="filename">/etc/ppp/ppp.conf</span> 的对应项中加入下列配置：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre>
</div>
</div>
<div class="paragraph">
<p>PPP版本2及以上：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre>
</div>
</div>
<div class="paragraph">
<p>这将告诉客户端首选域名服务器和备用域名服务器。</p>
</div>
<div class="paragraph">
<p>在版本2及以上版本中， 如果省略了 <code>set dns</code>， PPP会使用 <span class="filename">/etc/resolv.conf</span>中的值。</p>
</div>
</div>
<div class="sect4">
<h5 id="userppp-PAPnCHAP">2.1.2.12. PAP 和 CHAP 验证<a class="anchor" href="#userppp-PAPnCHAP"></a></h5>
<div class="paragraph">
<p>一些 ISP 将系统配置为使用 PAP 或 CHAP 机制来完成连接验证。 如果遇到这种情况， 在您连接时 ISP 就不会看到 <code>login:</code> 提示符， 而是立即开始 PPP 对话。</p>
</div>
<div class="paragraph">
<p>PAP 安全性要比 CHAP 差一些， 但在这里安全性并不是问题， 因为密码 (即使用明文传送) 只是通过串行线传送， 攻击者并没有太多机会去 &#34;窃听&#34; 它。</p>
</div>
<div class="paragraph">
<p>参考 <a href="#userppp-staticIP">PPP 与静态 IP 地址</a> 或 <a href="#userppp-dynamicIP">PPP 与动态 IP 地址</a> 小节， 并完成下列改动：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>13      set authname MyUserName
14      set authkey MyPassword
15      set login</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">第 13 行：</dt>
<dd>
<p>这一行指明您的PAP/CHAP用户名。 您需要为_MyUserName_输入正确的值。</p>
</dd>
<dt class="hdlist1">第 14 行：</dt>
<dd>
<p>这一行指明您的 PAP/CHAP password密码。 您需要为 <em>MyPassword</em> 输入正确的值。 另外，您可能希望加入一些额外的选项，例如：</p>
<div class="literalblock programlisting">
<div class="content">
<pre>16      accept PAP</pre>
</div>
</div>
<div class="paragraph">
<p>或</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>16      accept CHAP</pre>
</div>
</div>
<div class="paragraph">
<p>以明确您的意图， 不过， 默认情况下 PAP 和 CHAP 都会被接受。</p>
</div>
</dd>
<dt class="hdlist1">行 15：</dt>
<dd>
<p>如果您使用的是 PAP 或 CHAP， 一般来说 ISP 就不会要求您登录服务器了。 这时， 就必须禁用 &#34;set login&#34; 设置。</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_即时改变您的ppp_配置">2.1.2.13. 即时改变您的<code>ppp</code> 配置<a class="anchor" href="#_即时改变您的ppp_配置"></a></h5>
<div class="paragraph">
<p>与后台运行的<code>ppp</code>程序进行对话是可能的， 前提是设置了一个合适的诊断端口。 做到这一点， 需要把下面的行加入到您的配置中：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>set server /var/run/ppp-tun%d DiagnosticPassword 0177</pre>
</div>
</div>
<div class="paragraph">
<p>这行告诉 PPP在指定的UNIX®域socket中侦听， 当用户连接时需要给出指定的密码。 <code>%d</code>用<span class="filename">tun</span>设备号替换。</p>
</div>
<div class="paragraph">
<p>一旦启用了socket， 就可以在脚本中调用程序man:pppctl[8]来处理正在运行的 的PPP。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="userppp-nat">2.1.3. 使用PPP网络地址翻译<a class="anchor" href="#userppp-nat"></a></h4>
<div class="paragraph">
<p>PPP 可以使用内建的 NAT， 而无需内核支持。 您可以在 <span class="filename">/etc/ppp/ppp.conf</span> 中加入如下配置来启用它：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>nat enable yes</pre>
</div>
</div>
<div class="paragraph">
<p>PPP NAT也可以使用命令行选项 <code>-nat</code>启动。 在 <span class="filename">/etc/rc.conf</span> 文件中也有 <code>ppp_nat</code> 项， 并默认启用。</p>
</div>
<div class="paragraph">
<p>如果您使用了这个特性， 您还会发现在 <span class="filename">/etc/ppp/ppp.conf</span>中以下 选项对于启用incoming connections forwarding是有用的：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>nat port tcp 10.0.0.2:ftp ftp
nat port tcp 10.0.0.2:http http</pre>
</div>
</div>
<div class="paragraph">
<p>或者完全不信任外来的请求</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>nat deny_incoming yes</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="userppp-final">2.1.4. 最后的系统配置<a class="anchor" href="#userppp-final"></a></h4>
<div class="paragraph">
<p>现在您已配置了<code>ppp</code>， 但在真正工作之前还有一些事情要做。 即修改 <span class="filename">/etc/rc.conf</span>。</p>
</div>
<div class="paragraph">
<p>从上依次往下看， 确认已经正确地配置了 <code>hostname=</code>， 例如：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>hostname=&#34;foo.example.com&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的ISP提供给您一个静态的IP和名字， 将这个名字设为hostname是最合适的。</p>
</div>
<div class="paragraph">
<p>寻找 <code>network_interfaces</code> 变量。 如果要配置系统通过拨号连入ISP， 一定要将<span class="filename">tun0</span>设备加入这个列表， 否则就删除它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>network_interfaces=&#34;lo0 tun0&#34;
ifconfig_tun0=</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>ifconfig_tun0</code>变量应该是空的， 且要创建一个名为 <span class="filename">/etc/start_if.tun0</span>的文件。 这个文件应该包含这一行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ppp -auto mysystem</pre>
</div>
</div>
<div class="paragraph">
<p>此脚本在网络配置时被执行， 开启PPP守护进程进入自动模式。 如果这台机子充当一个LAN的网关， 您可能希望使用 <code>-alias</code>。 参考相关联机手册了解更多细节。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>务必在 <span class="filename">/etc/rc.conf</span> 中， 把路由程序设置为 <code>NO</code>：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>router_enable=&#34;NO&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>不启动 <code>routed</code> 服务程序非常重要， 因为 <code>routed</code> 总会删掉由 <code>ppp</code> 所建立的默认路由。</p>
</div>
<div class="paragraph">
<p>此外， 我们建议您确认一下 <code>sendmail_flags</code> 这一行中没有指定 <code>-q</code> 参数， 否则 <code>sendmail</code> 将会不断地尝试查找网络， 而这样做将会导致机器不断地进行拨号。 可以考虑：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>sendmail_flags=&#34;-bd&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>替代的做法是当每次 PPP 连接建立时您必须通过键入以下命令强制 <code>sendmail</code> 重新检查邮件队列：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># /usr/sbin/sendmail -q</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>您也可以在<span class="filename">ppp.linkup</span>使用<code>!bg</code>命令自动完成这些工作：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre>
</div>
</div>
<div class="paragraph">
<p>如果您不喜欢这样做， 可以设立一个 &#34;dfilter&#34; 以阻止 SMTP 传输。 参考相关文件了解更多细节。</p>
</div>
<div class="paragraph">
<p>现在您唯一要做的事是重新启动计算机。 重启之后，可以输入：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ppp</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>然后是<code>dial provider</code>以开启 PPP会话。 或者如果您想让<code>ppp</code>自动建立会话， 因为您有一条广域网连接 (且没有创建 <span class="filename">start_if.tun0</span> 脚本)， 键入：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ppp -auto provider</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_总结">2.1.5. 总结<a class="anchor" href="#_总结"></a></h4>
<div class="paragraph">
<p>当第一次设置PPP时， 下面几步是必须的：</p>
</div>
<div class="paragraph">
<p>客户端：</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>确保 <span class="filename">tun</span>编译进了进核。</p>
</li>
<li>
<p>确保 <span class="filename">/dev</span> 目录中名为 <span class="filename">tunN</span> 的设备文件是可用的。</p>
</li>
<li>
<p>在 <span class="filename">/etc/ppp/ppp.conf</span>中创建一个项。 <span class="filename">pmdemand</span>示例应该适合于绝大多数ISP。</p>
</li>
<li>
<p>如果您使用动态IP地址， 在<span class="filename">/etc/ppp/ppp.linkup</span>创建一个项。</p>
</li>
<li>
<p>更新<span class="filename">/etc/rc.conf</span> 文件。</p>
</li>
<li>
<p>如果您要求按需拨号， 创建一个<span class="filename">start_if.tun0</span>脚本。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>服务器端：</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>确保<span class="filename">tun</span>设备已编译入内核。</p>
</li>
<li>
<p>确保 <span class="filename">/dev</span> 目录中名为 <span class="filename">tunN</span> 的设备文件是可用的。</p>
</li>
<li>
<p>在<span class="filename">/etc/passwd</span>中创建一个项 (使用man:vipw[8]程序)。</p>
</li>
<li>
<p>在用户的home目录创建一个运行 <code>ppp -direct direct-server</code>或相似命令的profile。</p>
</li>
<li>
<p>在<span class="filename">/etc/ppp/ppp.conf</span>中创建一个项。 <span class="filename">direct-server</span>示例应该能满足要求。</p>
</li>
<li>
<p>在 <span class="filename">/etc/ppp/ppp.linkup</span>中创建一个项。</p>
</li>
<li>
<p>更新 <span class="filename">/etc/rc.conf</span> 文件。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ppp">3. 使用内核级PPP<a class="anchor" href="#ppp"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>这节内容只在 FreeBSD 7.X 上可用。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="_设立内核级ppp">3.1. 设立内核级PPP<a class="anchor" href="#_设立内核级ppp"></a></h3>
<div class="paragraph">
<p>在开始配置 PPP 之前， 请确认 <code>pppd</code> 已经存放在 <span class="filename">/usr/sbin</span> 中， 并且 <span class="filename">/etc/ppp</span> 目录是存在的。</p>
</div>
<div class="paragraph">
<p><code>pppd</code>能在两种模式下工作：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>作为一个 &#34;客户&#34; - 您要通过PPP串行线或modem线把您的机器连接到互联网上。</p>
</li>
<li>
<p>作为&#34;服务器&#34; -计算机已经位于网络上， 且被用于通过PPP与其它计算机连接。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>两种情况您都需要设立一个选项文件， (<span class="filename">/etc/ppp/options</span> 或者是 <span class="filename">~/.ppprc</span> 如果您的计算机有多个用户使用PPP)。</p>
</div>
<div class="paragraph">
<p>您还需要一些modem/serial软件(package:comms/kermit[]就很适合)， 使您能够拨号并与远程主机建立连接。</p>
</div>
</div>
<div class="sect2">
<h3 id="_使用pppd作为客户端">3.2. 使用<code>pppd</code>作为客户端<a class="anchor" href="#_使用pppd作为客户端"></a></h3>
<div class="paragraph">
<p>下面这个 <span class="filename">/etc/ppp/options</span>选项文件能够被用来与CISCO终端服务器的 PPP线连接。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>crtscts         # enable hardware flow control
modem           # modem control line
noipdefault     # remote PPP server must supply your IP address
                # if the remote host does not send your IP during IPCP
                # negotiation, remove this option
passive         # wait for LCP packets
domain ppp.foo.com      # put your domain name here

:remote_ip    # put the IP of remote PPP host here
                # it will be used to route packets via PPP link
                # if you didn&#39;t specified the noipdefault option
                # change this line to local_ip:remote_ip

defaultroute    # put this if you want that PPP server will be your
                # default router</pre>
</div>
</div>
<div class="paragraph">
<p>连接：</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>使用 Kermit (或其他 modem 程序来拨号)， 然后输入您的用户名和口令 (或在远程主机上启用 PPP 所需的其他信息)。</p>
</li>
<li>
<p>退出 Kermit (并不挂断连接)。</p>
</li>
<li>
<p>键入下面这行：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># /usr/sbin/pppd /dev/tty01 19200</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>一定要使用正确的速度和设备名。</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>现在您的计算机已经用PPP连接。 如果连接失败， 您可在文件 <span class="filename">/etc/ppp/options</span> 中添加 <code>debug</code> 选项， 并查看控制台信息以跟踪问题。</p>
</div>
<div class="paragraph">
<p>下面这个<span class="filename">/etc/ppp/pppup</span>脚本能自动完成这三个步骤：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre>
</div>
</div>
<div class="paragraph">
<p><span class="filename">/etc/ppp/kermit.dial</span> 是一个 Kermit 脚本， 它会完成拨号， 并在远程主机上完成所有需要的身份验证过程 (这份文档的最后有一个脚本实例)。</p>
</div>
<div class="paragraph">
<p>使用下面这个脚本<span class="filename">/etc/ppp/pppdown</span>断开PPP连线：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill -TERM ${pid}
fi

pgrep -l kermit
pid=`pgrep kermit`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre>
</div>
</div>
<div class="paragraph">
<p>通过执行<span class="filename">/usr/etc/ppp/ppptest</span>， 看看<code>pppd</code> 是否仍在运行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != &#34;X&#34; ] ; then
        echo &#39;pppd running: PID=&#39; ${pid-NONE}
else
        echo &#39;No pppd running.&#39;
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre>
</div>
</div>
<div class="paragraph">
<p>执行脚本 <span class="filename">/etc/ppp/kermit.hup</span>以挂起moderm， 这个文件包含：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>set line /dev/tty01	; put your modem device here
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre>
</div>
</div>
<div class="paragraph">
<p>也可以用<code>chat</code> 代替<code>kermit</code>：</p>
</div>
<div class="paragraph">
<p>以下两个文件用以建立<code>pppd</code>连接。</p>
</div>
<div class="paragraph">
<p><span class="filename">/etc/ppp/options</span>：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>/dev/cuad1 115200

crtscts		# enable hardware flow control
modem		# modem control line
connect &#34;/usr/bin/chat -f /etc/ppp/login.chat.script&#34;
noipdefault	# remote PPP serve must supply your IP address
	        # if the remote host doesn&#39;t send your IP during
                # IPCP negotiation, remove this option
passive         # wait for LCP packets
domain your.domain	# put your domain name here

:		# put the IP of remote PPP host here
	        # it will be used to route packets via PPP link
                # if you didn&#39;t specified the noipdefault option
                # change this line to local_ip:remote_ip

defaultroute	# put this if you want that PPP server will be
	        # your default router</pre>
</div>
</div>
<div class="paragraph">
<p><span class="filename">/etc/ppp/login.chat.script</span>：</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>以下的内容应该放在一行内。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ABORT BUSY ABORT &#39;NO CARRIER&#39; &#34;&#34; AT OK ATDTphone.number
  CONNECT &#34;&#34; TIMEOUT 10 ogin:-\\r-ogin: login-id
  TIMEOUT 5 sword: password</pre>
</div>
</div>
<div class="paragraph">
<p>一旦这些被安装且修改正确， 您所要做的就是运行<code>pppd</code>， 就像这样：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pppd</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_使用pppd作为服务器">3.3. 使用<code>pppd</code>作为服务器<a class="anchor" href="#_使用pppd作为服务器"></a></h3>
<div class="paragraph">
<p><span class="filename">/etc/ppp/options</span>要包括下面这些内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>crtscts                         # Hardware flow control
netmask 255.255.255.0           # netmask (not required)
192.114.208.20:192.114.208.165  # IP&#39;s of local and remote hosts
                                # local ip must be different from one
                                # you assigned to the Ethernet (or other)
                                # interface on your machine.
                                # remote IP is IP address that will be
                                # assigned to the remote machine
domain ppp.foo.com              # your domain
passive                         # wait for LCP
modem                           # modem line</pre>
</div>
</div>
<div class="paragraph">
<p>下面这个脚本<span class="filename">/etc/ppp/pppserv</span> 使pppd以服务器方式启动：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</pre>
</div>
</div>
<div class="paragraph">
<p>使用脚本<span class="filename">/etc/ppp/pppservdown</span>停止服务器：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing pppd, PID=&#39; ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ &#34;X${pid}&#34; != &#34;X&#34; ] ; then
        echo &#39;killing kermit, PID=&#39; ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre>
</div>
</div>
<div class="paragraph">
<p>下面的 Kermit 脚本 (<span class="filename">/etc/ppp/kermit.ans</span>) 能够启用/禁用您 modem 的自动应答模式。 其内容类似下面这样：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; change this to out ATS0=0\13 if you want to disable
                ; autoanswer mode
inp 5 OK
echo \13
exit</pre>
</div>
</div>
<div class="paragraph">
<p>一个名为<span class="filename">/etc/ppp/kermit.dial</span>的脚本用于向远程主机 进行拨号和验证。 您要根据需要定制它。 要加入您的登寻名和密码， 您还要根据 modem 和远程主机的反应修改输入语句。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>;
; put the com line attached to the modem here:
;
set line /dev/tty01
;
; put the modem speed here:
;
set speed 19200
set file type binary            ; full 8 bit file xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Then SET CARRIER if necessary,
set dial display on             ; Then SET DIAL if necessary,
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; login prompt counter
goto slhup

:slcmd                          ; put the modem in command mode
echo Put the modem in command mode.
clear                           ; Clear unread characters from input buffer
pause 1
output +++                      ; hayes escape sequence
input 1 OK\13\10                ; wait for OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; if modem doesn&#39;t answer OK, try again

:slhup                          ; hang up the phone
clear                           ; Clear unread characters from input buffer
pause 1
echo Hanging up the phone.
output ath0\13                  ; hayes command for on hook
input 2 OK\13\10
if fail goto slcmd              ; if no OK answer, put modem in command mode

:sldial                         ; dial the number
pause 1
echo Dialing.
output atdt9,550311\13\10               ; put phone number here
assign \%x 0                    ; zero the time counter

:look
clear                           ; Clear unread characters from input buffer
increment \%x                   ; Count the seconds
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; zero the time counter
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; Count the seconds
clear                           ; Clear unread characters from input buffer
output \13
;
; put your expected login prompt here:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; try 10 times to get a login prompt
else goto slhup                 ; hang up and start again if 10 failures

:sluid
;
; put your userid here:
;
output ppp-login\13
input 1 {Password: }
;
; put your password here:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7No dialtone.  Check the telephone line!\7
exit 1

; local variables:
; mode: csh
; comment-start: &#34;; &#34;
; comment-start-skip: &#34;; &#34;
; end:</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ppp-troubleshoot">4. PPP 连接故障排除<a class="anchor" href="#ppp-troubleshoot"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， man:uart[4] 驱动取代了 man:sio[4] 驱动。 用以表示串口的设备节点由分别 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>， 并从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户在升级时需要因应之对配置文件进行必要的更改。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>本节将讲述通过modem连接使用PPP时可能出现的问题。 例如， 您可能需要确切地知道您拨入的系统会出现一个怎样的命令行提示符。 有些 ISP 会提供 <code>ssword</code>提示符， 而其它的可能会出现 <code>password</code>； 如果没有根据情况的不同相应地编写 <code>ppp</code> 脚本， 登录就会失败。 诊断 <code>ppp</code> 最常用的方法是手动进行连接。 以下的信息会一步一步地带您完成手动连接。</p>
</div>
<div class="sect2">
<h3 id="_检查设备节点">4.1. 检查设备节点<a class="anchor" href="#_检查设备节点"></a></h3>
<div class="paragraph">
<p>如果使用的是定制内核， 确认在其编译配置中包含下列配置：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   uart</pre>
</div>
</div>
<div class="paragraph">
<p>默认的 <code>GENERIC</code> 内核中包含了 <span class="filename">uart</span> 设备， 因此如果您使用的是它的话， 就不需要担心了。 只要查看 <code>dmesg</code> 输出中是否有 modem 设备：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># dmesg | grep uart</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>您应该找到与 <span class="filename">uart</span> 设备有关的输出。 这些就是我们需要的 COM 端口。 如果您的 modem 按照标准串行端口工作， 您就会在 <span class="filename">uart1</span> 或 <span class="filename">COM2</span> 上找到它。 如果 modem 设备连接在 <span class="filename">uart1</span> 接口 (在 DOS 中称为<span class="filename">COM2</span>)， 那么您的 modem 将会是 <span class="filename">/dev/cuau1</span>。</p>
</div>
</div>
<div class="sect2">
<h3 id="_手动连接">4.2. 手动连接<a class="anchor" href="#_手动连接"></a></h3>
<div class="paragraph">
<p>通过手动控制<code>ppp</code>来连接Internet 是诊断连接及获知ISP处理PPP客户端方式的一个快速， 简单的方法。 让我们从PPP 命令行开始， 在所有的例子中我们使用 <em>example</em> 表示运行 PPP 服务的主机名。 键入<code>ppp</code> 命令打开 <code>ppp</code>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ppp</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>现在我们已经打开了<code>ppp</code>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ppp ON example&gt; <span class="nb">set </span>device /dev/cuau1</code></pre>
</div>
</div>
<div class="paragraph">
<p>设置modem设备， 在本例子中是 <span class="filename">cuau1</span>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ppp ON example&gt; <span class="nb">set </span>speed 115200</code></pre>
</div>
</div>
<div class="paragraph">
<p>设置连接速度， 在本例中我们使用15,200 kbps。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ppp ON example&gt; <span class="nb">enable </span>dns</code></pre>
</div>
</div>
<div class="paragraph">
<p>使<code>ppp</code>配置域名服务， 在文件<span class="filename">/etc/resolv.conf</span>中添加域名服务器行。 如果 <code>ppp</code>不能确定我们的主机名， 可以在稍后设置。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ppp ON example&gt; term</code></pre>
</div>
</div>
<div class="paragraph">
<p>切换到 &#34;终端&#34;样我们就能手动地控制这台 modem 的模式。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>deflink: Entering terminal mode on /dev/cuau1
type &#39;~h&#39; for help</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">at
OK
atdt123456789</code></pre>
</div>
</div>
<div class="paragraph">
<p>使用命令<code>at</code>初始化modem， 然后使用<code>atdt</code>和ISP给您的号码进行拨号。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">CONNECT</code></pre>
</div>
</div>
<div class="paragraph">
<p>连接配置， 如果我们遇到了与硬件无关的连接问题， 可以在这里尝试解决。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ISP Login:myusername</code></pre>
</div>
</div>
<div class="paragraph">
<p>这里提示您输入用户名， 输入ISP提供的用户名然后按回车。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ISP Pass:mypassword</code></pre>
</div>
</div>
<div class="paragraph">
<p>这时提示我们输入密码， 输入 ISP提供的密码。 如同登录入FreeBSD， 密码不会显示。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">Shell or PPP:ppp</code></pre>
</div>
</div>
<div class="paragraph">
<p>由于ISP的不同， 这个提示符可能不会出现。 这里我们需要考虑： 是使用运行于提供商端的 Shell， 还是启动 <code>ppp</code>？ 这本例中， 我们选择使用 <code>ppp</code>， 因为我们希望得到 Internet 连接。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">Ppp ON example&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>注意在这个例子中， 第一个 <code>p</code>已经大写。 这表示我们已经成功地连接上了 ISP。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">PPp ON example&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>我们已经成功通过了 ISP的验证， 正在等待分配IP地址。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">PPP ON example&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>我们得到了一个 IP 地址， 成功地完成了连接。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">PPP ON example&gt;add default HISADDR</code></pre>
</div>
</div>
<div class="paragraph">
<p>这样就完成了添加默认路由所需的配置。 这是与外界通信所必需的。 因为之前我们只是与服务器端建立了连接。 如果由于已存在的路由而导致操作失败， 您可以在 <code>add</code> 前加 <code>!</code>号。 除此之外， 您也可以在真正连接之前设置这些 (指 add default HISADDR)， ppp 会根据这项设定协商取得新的路由。</p>
</div>
<div class="paragraph">
<p>如果一切顺利， 现在我们应该能得到一个活动的 Internet 连接， 可以使用 <span class="keyseq"><kbd>CTRL</kbd>+<kbd>z</kbd></span> 使其转入后台。 如果您发现 <code>PPP</code>重新变为 <code>ppp</code>， 则表示连接被断开。 大写的 P 表明建立了到 ISP 的连接， 而小写的 p 则表示连接由于某种原因被断开， 这有助于帮助我们了解连接的状态。 <code>ppp</code> 只有这两个状态。</p>
</div>
<div class="sect3">
<h4 id="_诊断排错">4.2.1. 诊断排错<a class="anchor" href="#_诊断排错"></a></h4>
<div class="paragraph">
<p>如果您有一根直连线且似乎不能建立连接， 要使用<code>set ctsrts off</code>以关闭字节流的CTS/RTS。 这种情况一般发生在连接兼容 PPP 的终端服务器时。 当它向通信连接写入数据时， PPP就会挂起， 一直等待一个CTS， 或者一个不可能出现的 Clear to Send 信号。 如果使用了这个选项， 您还应使用 <code>set accmap</code>选项， 某些存在缺陷的硬件在完成端对端发送特定字符， 特别是 XON/XOFF 时可能会遇到困难。 请参见 man:ppp[8] 联机手册以了解关于可用选项的更多细节， 以及如何使用它们。</p>
</div>
<div class="paragraph">
<p>如果您的 modem 比较旧， 就需要使用 <code>set parity even</code> 了。 奇偶校验的默认设置是 none， 但在旧式的 (当流量大量增加时) 调制解调器和某些 ISP 被用来纠错。 您需要使用这个选项才能使用 Compuserve ISP。</p>
</div>
<div class="paragraph">
<p>PPP 可能并不返回命令模式， 这通常是 ISP 等待您这一端发起协商时发生了错误。 此时， 使用 <code>~p</code> 命令将强制 ppp 开始发送配置信息。</p>
</div>
<div class="paragraph">
<p>如果您没有看到登录提示， 则很可能需要使用 PAP 或 CHAP 验证来代替前面例子中的 UNIX® 风格验证。 要使用 PAP 或 CHAP 只需在进入终端模式之前把下面的选项加入 PPP：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ppp ON example&gt; <span class="nb">set </span>authname myusername</code></pre>
</div>
</div>
<div class="paragraph">
<p>此处 <em>myusername</em> 应改为您的 ISP 分配给您的用户名。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ppp ON example&gt; <span class="nb">set </span>authkey mypassword</code></pre>
</div>
</div>
<div class="paragraph">
<p>此处 <em>mypassword</em> 应该为您的 ISP 分配给您的口令。</p>
</div>
<div class="paragraph">
<p>如果连接正常， 但无法查找域名， 请尝试 man:ping[8] 某个 IP 地址来看看是否返回了信息。 如果您发现百分之百 (100%) 丢包， 那么您很可能没有分配默认路由。 请仔细检查选项 <code>add default HISADDR</code> 是否在连接时被设置了。 如果您能连接到远程的 IP 地址则有可能域名解析服务器的地址没有被加入到 <span class="filename">/etc/resolv.conf</span>。 这个文件应该是下面的样子：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>domain example.com
nameserver x.x.x.x
nameserver y.y.y.y</pre>
</div>
</div>
<div class="paragraph">
<p>此处 <em>x.x.x.x</em> 和 <em>y.y.y.y</em> 应该改为您的 ISP 的 DNS 服务器的 IP 地址。 这一信息在您注册时可能会提供给您， 不过通常只需给 ISP 打个电话就能知道了。</p>
</div>
<div class="paragraph">
<p>您还可以让 man:syslog[3] 为您的 PPP 连接提供日志。 只需增加：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>!ppp
*.*     /var/log/ppp.log</pre>
</div>
</div>
<div class="paragraph">
<p>到 <span class="filename">/etc/syslog.conf</span> 中。 绝大多数情况下， 这个功能默认已经打开了。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pppoe">5. 使用基于以太网的PPP(PPPoE)<a class="anchor" href="#pppoe"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>本节将介绍如何建立基于以太网的PPP (PPPoE)。</p>
</div>
<div class="sect2">
<h3 id="_配置内核">5.1. 配置内核<a class="anchor" href="#_配置内核"></a></h3>
<div class="paragraph">
<p>对于PPPOE， 并没有必须的内核配置。 如果必需的 netgraph 支持没有编译入内核， 它可以由 ppp 动态加载。</p>
</div>
</div>
<div class="sect2">
<h3 id="_设置ppp_conf">5.2. 设置<span class="filename">ppp.conf</span><a class="anchor" href="#_设置ppp_conf"></a></h3>
<div class="paragraph">
<p>以下是一个<span class="filename">ppp.conf</span>的例子：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>default:
  set log Phase tun command # you can add more detailed logging if you wish
  set ifaddr 10.0.0.1/0 10.0.0.2/0

name_of_service_provider:
  set device PPPoE:xl1 # replace xl1 with your Ethernet device
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD
  set dial
  set login
  add default HISADDR</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_运行ppp">5.3. 运行ppp<a class="anchor" href="#_运行ppp"></a></h3>
<div class="paragraph">
<p>以 <code>root</code> 身份执行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ppp -ddial name_of_service_provider</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_启动时运行ppp">5.4. 启动时运行ppp<a class="anchor" href="#_启动时运行ppp"></a></h3>
<div class="paragraph">
<p>在 <span class="filename">/etc/rc.conf</span> 中加入以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ppp_enable=&#34;YES&#34;
ppp_mode=&#34;ddial&#34;
ppp_nat=&#34;YES&#34;	# if you want to enable nat for your local network, otherwise NO
ppp_profile=&#34;name_of_service_provider&#34;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_使用_pppoe_服务标签">5.5. 使用 PPPoE 服务标签<a class="anchor" href="#_使用_pppoe_服务标签"></a></h3>
<div class="paragraph">
<p>在某些时候， 有必要使用一个服务标签来建立您的连接。 服务标签用于区分同一网络中的不同服务器。</p>
</div>
<div class="paragraph">
<p>您可以在ISP提供的文档中找到必要的服务标签信息。 若不能找到， 则应向您的 ISP 寻求技术支持。</p>
</div>
<div class="paragraph">
<p>作为最后的方法， 您可以试试 <a href="http://www.roaringpenguin.com/pppoe/">Roaring Penguin PPPoE</a>， 它可以在 crossref:ports[ports,Ports Collection] 中找到。 然而需要注意的是， 它可能会清楚 modem 的固件， 并使其无法正常工作， 因此一定要仔细考虑之后再做这个操作。 简单地安装由服务提供商随 modem 提供的程序。 随后， 选择 <b class="menuref">System</b> 菜单。 您的配置文件应该会在这里列出。 一般来说它的名字应该是 <em>ISP</em>。</p>
</div>
<div class="paragraph">
<p>配置文件名 (service tag， 服务标签) 将被用于 PPPoE 在 <span class="filename">ppp.conf</span> 中的配置项， 作为服务商 <code>set device</code> 命令的一部分 (参见 man:ppp[8] 联机手册以了解更多细节)。 它应该类似下面的样子：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>set device PPPoE:xl1:ISP</pre>
</div>
</div>
<div class="paragraph">
<p>记住将_xl1_换成实际的以太网设备。</p>
</div>
<div class="paragraph">
<p>记住将 <em>ISP</em> 换成您刚刚找到的profile名。</p>
</div>
<div class="paragraph">
<p>获得更多的信息， 请参考：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://renaud.waldura.com/doc/freebsd/pppoe/">Cheaper Broadband with FreeBSD on DSL</a> by Renaud Waldura.</p>
</li>
<li>
<p><a href="http://www.ruhr.de/home/nathan/FreeBSD/tdsl-freebsd.html"> Nutzung von T-DSL und T-Online mit FreeBSD</a> by Udo Erdelhoff (in German).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ppp-3com">5.6. 带有一个3Com® HomeConnect™ ADSL Modem的PPPOE双重连接<a class="anchor" href="#ppp-3com"></a></h3>
<div class="paragraph">
<p>这个 modem 不遵循 <a href="http://www.faqs.org/rfcs/rfc2516.html">RFC 2516</a> (<em>A Method for transmitting PPP over Ethernet (PPPoE)</em>， 其作者为 L. Mamakos、 K. Lidl、 J. Evarts、 D. Carrel、 D. Simone 以及 R. Wheeler)。 而是使用不同的数据包格式作为以太网的框架。 请向 <a href="http://www.3com.com/">3Com</a> 抱怨， 如果您认为它应该遵守 PPPoE 的规范。</p>
</div>
<div class="paragraph">
<p>为了让FreeBSD能够与这个设备通信， 必须设置sysctl。 通过更改<span class="filename">/etc/sysctl.conf</span>， 这一步可以在启动时自动完成：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>net.graph.nonstandard_pppoe=1</pre>
</div>
</div>
<div class="paragraph">
<p>或者， 也可以直接执行下面的命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># sysctl net.graph.nonstandard_pppoe=1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>很不幸，由于这是系统全局设置， 无法同时与正常的PPP客户端(或服务器) 和3Com®HomeConnect™ ADSL Modem通信。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pppoa">6. 使用 ATM 上的 PPP (PPPoA)<a class="anchor" href="#pppoa"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下将介绍如何设置基于ATM的PPP(PPPoA)。 PPPoA是欧洲DSL提供商的普遍选择。</p>
</div>
<div class="sect2">
<h3 id="_使用_alcatel_speedtouchusb_的_pppoa">6.1. 使用 Alcatel SpeedTouch™USB 的 PPPoA<a class="anchor" href="#_使用_alcatel_speedtouchusb_的_pppoa"></a></h3>
<div class="paragraph">
<p>针对这一设备的 PPPoA 支持， 在 FreeBSD 中是作为 port 提供的， 因为其固件使用了 <a href="http://www.speedtouchdsl.com/disclaimer_lx.htm">阿尔卡特许可协议</a>， 因而不能与 FreeBSD 的基本系统一起免费地再发布。</p>
</div>
<div class="paragraph">
<p>使用 crossref:ports[ports,Ports 套件] 可以非常方便地安装 package:net/pppoa[] port， 之后按照它提供的指示操作就可以了。</p>
</div>
<div class="paragraph">
<p>和许多 USB 设备类似， 阿尔卡特的 SpeedTouch™ USB 需要从主机上下载固件才能够正常工作。 在 FreeBSD 中您可以将此操作自动化， 在有设备插到某个 USB 口的时候自动下载固件。 可以在 <span class="filename">/etc/usbd.conf</span> 文件中加入下面的信息来让它自动完成固件的传送。 注意， 必须以 <code>root</code> 用户的身份编辑它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device &#34;Alcatel SpeedTouch USB&#34;
    devname &#34;ugen[0-9]+&#34;
    vendor 0x06b9
    product 0x4061
    attach &#34;/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>要启动USB守护进程usbd， 在<span class="filename">/etc/rc.conf</span>加入以下行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>usbd_enable=&#34;YES&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>也可以将ppp设置成启动时拨号。 向 <span class="filename">/etc/rc.conf</span>加入以下这几行。 同样地您需要以<code>root</code>用户登录。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ppp_enable=&#34;YES&#34;
ppp_mode=&#34;ddial&#34;
ppp_profile=&#34;adsl&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>为了使其正常工作， 您需要使用package:net/pppoa[] port提供的<span class="filename">ppp.conf</span>样例。</p>
</div>
</div>
<div class="sect2">
<h3 id="_使用mpd">6.2. 使用mpd<a class="anchor" href="#_使用mpd"></a></h3>
<div class="paragraph">
<p>可以使用 mpd 来连接多种类型的服务， 特别是 PPTP 服务。 您可以在 Ports Collection 中找到 mpd， 它的位置是 package:net/mpd[]。 许多 ADSL modem 需要在 modem 和计算机之间建立一条 PPTP 隧道， 而阿尔卡特 SpeedTouch™ Home 正是其中的一种。</p>
</div>
<div class="paragraph">
<p>首先需要从 port 完成安装， 然后才能配置 mpd 来满足您的需要， 并完成服务商的配置。 port 会把一系列包括了详细注解的配置文件实例放到 <span class="filename">PREFIX/etc/mpd/</span>。 注意， 这里的 <em>PREFIX</em> 表示 ports 安装的目录， 默认情况下， 应该是 <span class="filename">/usr/local/</span>。 关于配置 mpd 的完整说明， 会以 HTML 格式随 port 一起安装。 这些文件将放在 <span class="filename">PREFIX/shared/doc/mpd/</span>。 下面是通过 mpd 连接 ADSL 服务的一个简单例子。 配置被分别放到了两个文件中， 第一个是 <span class="filename">mpd.conf</span>：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname username <i class="conum" data-value="1"></i><b>(1)</b>
    set bundle password password <i class="conum" data-value="2"></i><b>(2)</b>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>username用来向您的ISP进行验证。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>password用来向您的ISP进行验证。</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><span class="filename">mpd.links</span>包含连接的信息：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self 10.0.0.1 <i class="conum" data-value="1"></i><b>(1)</b>
    set pptp peer 10.0.0.138 <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>运行mpd的主机的IP地址。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ADSL modem的IP地址。 Alcatel SpeedTouch™ Home 默认的是 <code>10.0.0.138</code>。</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>初始化连接：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># mpd -b adsl</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以通过以下命令查看连接状态：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">% ifconfig ng0
ng0: <span class="nv">flags</span><span class="o">=</span>88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 <span class="nt">--</span><span class="o">&gt;</span> 204.152.186.171 netmask 0xffffffff</code></pre>
</div>
</div>
<div class="paragraph">
<p>使用mpd连接ADSL服务是推荐的方式。</p>
</div>
</div>
<div class="sect2">
<h3 id="_使用pptpclient">6.3. 使用pptpclient<a class="anchor" href="#_使用pptpclient"></a></h3>
<div class="paragraph">
<p>也可以使用package:net/pptpclient[]连接其它的 PPPoA。</p>
</div>
<div class="paragraph">
<p>要使用 package:net/pptpclient[] 连接 DSL 服务， 需要安装 port 或 package 并编辑 <span class="filename">/etc/ppp/ppp.conf</span>。 您需要有 <code>root</code> 权限才能完成这两项操作。 以下是 <span class="filename">ppp.conf</span> 中的一个示例项。 参考 ppp 的联机手册 man:ppp[8]， 以了解更多有关 <span class="filename">ppp.conf</span> 选项的信息。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname username <i class="conum" data-value="1"></i><b>(1)</b>
 set authkey password <i class="conum" data-value="2"></i><b>(2)</b>
 set ifaddr 0 0
 add default HISADDR</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>您在 DSL 服务提供商那里的用户名</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>您帐户的口令。</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>由于您必须将帐号密码以明文的方式放入<span class="filename">ppp.conf</span> 您应该确保没有任何人能看到此文件的内容。 以下一系列命令将会确保此文件只对 <code>root</code>用户可读。 请参见 man:chmod[1] 和 man:chown[8] 的联机手册以了解有关如何操作的进一步信息。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># chown root:wheel /etc/ppp/ppp.conf</span>
<span class="c"># chmod 600 /etc/ppp/ppp.conf</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>以下将为到 DSL 路由器的会话打开一个 tunnel。 以太网DSL modem有一个设置的局域网IP地址。 以 Alcatel SpeedTouch™ Home 为例， 这个地址是 <code>10.0.0.138</code>。 路由器的文档应该会告诉您它使用的地址。 执行以下命令以打开 tunnel 并开始会话：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># pptp address adsl</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>您应该在命令的最后加上(&#34;&amp;&#34;)号， 否则 pptp 无法返回到命令行提示符。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>要创建一个 <span class="filename">tun</span>虚拟设备用于进程pptp 和ppp 之间的交互。 一旦您回到了命令行， 或者 pptp 进程确认了一个连接， 您可以这样检查tunnel设备：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">% ifconfig tun0
tun0: <span class="nv">flags</span><span class="o">=</span>8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 <span class="nt">--</span><span class="o">&gt;</span> 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您无法连接， 一般可以通过telnet或者web浏览器检查路由器(modem)的配置。 如果依旧无法连接， 您应该检查<code>pptp</code>的输出及ppp的日志文件 <span class="filename">/var/log/ppp.log</span> 以获得线索。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="slip">7. 使用SLIP<a class="anchor" href="#slip"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>这节内容只在 FreeBSD 7.X 上可用。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="slipc">7.1. 设置 SLIP 客户端<a class="anchor" href="#slipc"></a></h3>
<div class="paragraph">
<p>下面是在静态主机网络上配置 FreeBSD 机器使用 SLIP 的方法。 对于动态主机名分配 (您的地址会随每次拨号而不同)， 您可能需要稍复杂一些的设置。</p>
</div>
<div class="paragraph">
<p>首先， 您需要确认调制解调器所连接的串口。 许多人会设置一个符号连接， 例如 <span class="filename">/dev/modem</span>， 用以指向实际的设备名， 如 <span class="filename">/dev/cuadN</span>。 这样您就可以对实际的设备名进行抽象， 以备调制解调器换到其他串口时方便调整之用。 不然， 修改 <span class="filename">/etc</span> 和遍布于系统中的 <span class="filename">.kermrc</span> 文件将是一件很麻烦的事情！</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="filename">/dev/cuad0</span> 对应 <span class="filename">COM1</span>， 而 <span class="filename">/dev/cuad1</span> 则对应 <span class="filename">COM2</span>， 等等。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>确保您的内核文件包含以下内容：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   sl</pre>
</div>
</div>
<div class="paragraph">
<p>这包含在<span class="filename">GENERIC</span>内核， 所以这应该不会是个问题， 除非您 已经删除了它。</p>
</div>
<div class="sect3">
<h4 id="_只需做一次的事情">7.1.1. 只需做一次的事情<a class="anchor" href="#_只需做一次的事情"></a></h4>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>把您本地网络上的机器、 网关以及域名服务器， 都加入到 <span class="filename">/etc/hosts</span> 文件中。 我们的是下面这个样子：</p>
<div class="literalblock programlisting">
<div class="content">
<pre>127.0.0.1               localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</pre>
</div>
</div>
</li>
<li>
<p>请确保在您的 <span class="filename">/etc/nsswitch.conf</span> 中的 <code>hosts:</code> 小节里面， <code>files</code> 先于 <code>dns</code> 出现。 如果不是这样的话， 可能会产生一些不希望的现象。</p>
</li>
<li>
<p>编辑<span class="filename">/etc/rc.conf</span>。</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>编辑以下这行设置主机名(hostname)：</p>
<div class="literalblock programlisting">
<div class="content">
<pre>hostname=&#34;myname.my.domain&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>应该用您主机的Internet全名代替。
..</p>
</div>
<div class="paragraph">
<p>改变这一行以指明默认的路由：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>defaultrouter=&#34;NO&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>改为：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>defaultrouter=&#34;slip-gateway&#34;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>创建文件<span class="filename">/etc/resolv.conf</span>， 写入以下内容：</p>
<div class="literalblock programlisting">
<div class="content">
<pre>domain CS.Example.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre>
</div>
</div>
<div class="paragraph">
<p>正如您看到的， 这些行设置了域名服务器。 当然， 实际的域名和IP地址取决于您的环境。</p>
</div>
</li>
<li>
<p>设置<code>root</code>和 <code>toor</code>的密码(其它任何没有密码的帐号)。</p>
</li>
<li>
<p>重启计算机， 然后确认使用了正确的主机名。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_创建一个slip连接">7.1.2. 创建一个SLIP连接<a class="anchor" href="#_创建一个slip连接"></a></h4>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在命令提示符之后输入 <code>slip</code> 进行拨号， 输入您的机器名和口令。 具体需要输入什么， 与您的环境密切相关。 如果使用 Kermit， 则可以使用类似下面的脚本：</p>
<div class="literalblock programlisting">
<div class="content">
<pre># kermit setup
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# The next macro will dial up and login
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre>
</div>
</div>
<div class="paragraph">
<p>当然， 您还需要修改用户名和口令来满足实际需要。 完成这些操作之后， 只需在 Kermit 提示符之后输入 <code>slip</code> 就可以连接了。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>将密码以纯文本的形式存放在文件系统无论如何都是个 <em>坏</em> 主意。 请考虑这样做的风险。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>在这里退出 Kermit (也可以用 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>z</kbd></span> 将其挂起)， 以 <code>root</code> 用户键入：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># slattach -h -c -s 115200 /dev/modem</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您能<code>ping</code>通路由器另一端的主机， 就是连接好了! 如果不行， 您可以使用<code>-a</code>选项代替 <code>-c</code>作为<code>slattach</code>的参数。</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_关闭连接">7.1.3. 关闭连接<a class="anchor" href="#_关闭连接"></a></h4>
<div class="paragraph">
<p>按下面的步骤做：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># kill -INT `cat /var/run/slattach.modem.pid`</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>来杀掉 <code>slattach</code>。 切记上述操作只有以 <code>root</code> 身份才能完成。 接下来回到 <code>kermit</code> (如果之前是将它挂起了， 则使用 <code>fg</code>) 并退出 (<kbd>q</kbd>)。</p>
</div>
<div class="paragraph">
<p>在 man:slattach[8] 联机手册中提到， 必须使用 <code>ifconfig sl0 down</code> 才能将接口标记为关闭， 但和这样做似乎没有什么区别。 (<code>ifconfig sl0</code> 仍然报告同样的东西。)</p>
</div>
<div class="paragraph">
<p>有时， 您的 modem 可能会拒绝挂断。 这种情况下， 只需重新启动 <code>kermit</code> 并再次退出它就可以了。 一般来说试二次就可以了。</p>
</div>
</div>
<div class="sect3">
<h4 id="_问题解答">7.1.4. 问题解答<a class="anchor" href="#_问题解答"></a></h4>
<div class="paragraph">
<p>如果还不行， 尽管发邮件到 <a href="https://lists.FreeBSD.org/subscription/freebsd-net">freebsd-net</a> 邮件列表来提问。 常见的问题包括：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>执行 <code>slattach</code> 时不使用 <code>-c</code>和<code>-a</code>选项 (这应该不是关键的， 但有些用户报告这样做解决了问题)。</p>
</li>
<li>
<p>使用<code>s10</code>替换 <code>sl0</code> (在一些字体下很难看出不同)。</p>
</li>
<li>
<p>试试<code>ifconfig sl0</code>来查看您的接口状态。 例如， 您可以这样做：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ifconfig sl0</span>
sl0: <span class="nv">flags</span><span class="o">=</span>10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 <span class="nt">--</span><span class="o">&gt;</span> 136.152.64.1 netmask ffffff00</code></pre>
</div>
</div>
</li>
<li>
<p>如果在使用 man:ping[8] 时得到了 <code>no route to host</code> 这样的提示， 则说明您的路由表可能有问题。 可以用 <code>netstat -r</code> 命令来显示当前的路由：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># netstat -r</span>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

<span class="o">(</span>root node<span class="o">)</span>
<span class="o">(</span>root node<span class="o">)</span>

Route Tree <span class="k">for </span>Protocol Family inet:
<span class="o">(</span>root node<span class="o">)</span> <span class="o">=&gt;</span>
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
<span class="o">(</span>root node<span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>前述的例子来自于一个非常繁忙的系统。 您系统上的这些数字会因网络活动的不同而改变。</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="slips">7.2. 设置SLIP服务器<a class="anchor" href="#slips"></a></h3>
<div class="paragraph">
<p>本文提供了在 FreeBSD 上设置 SLIP 服务， 也就是如何配置您的系统， 使其能在远程 SLIP 客户端登录时自动地开启连接的建议。</p>
</div>
<div class="sect3">
<h4 id="slips-prereqs">7.2.1. 前提条件<a class="anchor" href="#slips-prereqs"></a></h4>
<div class="paragraph">
<p>这一节技术性很强， 所以要求您有一定的背景知识。 本节假定您熟悉 TCP/IP 网络协议， 特别是网络和节点寻址、 子网掩码、 子网划分、 路由、 路由协议 (如RIP) 等知识。 在拨号服务器上配置 SLIP 需要这些概念性的知识。 如果您不熟悉它们， 请先阅读 Craig Hunt 的 <em>TCP/IP 网络管理</em> 由O’Reilly &amp; Associates, Inc. 出版 (ISBN 0-937175-82-X)， 或 Douglas Comer 有关 TCP/IP 协议的书籍。</p>
</div>
<div class="paragraph">
<p>此外还假定您已经配置好了您的调制解调器以及相应的系统文件， 以允许通过调制解调器进行登录。 如果您还没有为此配置好系统， 请参见 crossref:serialcomms:[dialup,拨入服务] 以了解关于如何进行拨号服务的配置。 您可能也会想看一看 man:sio[4] 的联机手册， 以了解关于串口设备驱动的进一步信息， 以及 man:ttys[5]、 man:gettytab[5]、 man:getty[8] &amp; man:init[8] 上关于怎样配置系统来接受来自调制解调器的登录请求的具体情况， 还有 man:stty[1] 以了解关于设置串口参数 (例如 <code>clocal</code> 表示串口直联) 等。</p>
</div>
</div>
<div class="sect3">
<h4 id="_快速浏览">7.2.2. 快速浏览<a class="anchor" href="#_快速浏览"></a></h4>
<div class="paragraph">
<p>使用FreeBSD作为SLIP服务器， 在典型配置时， 它是这样工作的： 一个SLIP客户拨号并以专用的login ID登录到FreeBSD SLIP服务器系统。 这个用户使用 <span class="filename">/usr/sbin/sliplogin</span> 作为 shell。 <code>sliplogin</code> 程序会在文件 <span class="filename">/etc/sliphome/slip.hosts</span> 中查找这个用户的项， 如果找到了匹配项， 就将串行线连接到一个可用的 SLIP 接口， 然后运行 shell 脚本 <span class="filename">/etc/sliphome/slip.login</span> 以配置 SLIP 接口。</p>
</div>
<div class="sect4">
<h5 id="_一个slip服务器登录的例子">7.2.2.1. 一个SLIP服务器登录的例子<a class="anchor" href="#_一个slip服务器登录的例子"></a></h5>
<div class="paragraph">
<p>例如， 如果一个SLIP用户的ID是<code>Shelmerg</code>， 在<span class="filename">/etc/master.passwd</span>中<code>Shelmerg</code>的项如下的所示：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre>
</div>
</div>
<div class="paragraph">
<p><code>Shelmerg</code>登录时， <code>sliplogin</code>在文件 <span class="filename">/etc/sliphome/slip.hosts</span>中搜索与用户ID匹配的行;如下所示：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Shelmerg        dc-slip sl-helmer       0xfffffc00		  autocomp</pre>
</div>
</div>
<div class="paragraph">
<p><code>sliplogin</code>找到这条区配行， 并将串行线与另一个可用的SLIP接口连起来， 然后执行<span class="filename">/etc/sliphome/slip.login</span>脚本：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre>
</div>
</div>
<div class="paragraph">
<p>如果一切顺利 <span class="filename">/etc/sliphome/slip.login</span> 将在 <code>sliplogin</code> 绑定的 SLIP 接口上发出 <code>ifconfig</code> (前述的例子中是 SLIP 接口 0， 这是 <span class="filename">slip.login</span> 的第一个参数)， 以设置本地 IP 地址 (<code>dc-slip</code>)、 远程 IP 地址 (<code>sl-helmer</code>)、 这一 SLIP 接口的子网掩码 (<code>0xfffffc00</code>)， 以及任何其他标志 (<code>autocomp</code>)。 如果发生错误， <code>sliplogin</code> 通常会通过 syslogd 的 daemon facility 记下有用的信息， 前者会把这些信息保存到 <span class="filename">/var/log/messages</span> (参见 man:syslogd[8] 和 man:syslog.conf[5] 以及 <span class="filename">/etc/syslog.conf</span> 的联机手册， 以了解 syslogd 在记录什么， 以及这些内容将被记在哪里)。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_内核配置">7.2.3. 内核配置<a class="anchor" href="#_内核配置"></a></h4>
<div class="paragraph">
<p>FreeBSD 的默认内核 (<span class="filename">GENERIC</span>) 提供了 SLIP (man:sl[4]) 支持； 使用定制的内核时， 您必须把下面的设置加入到配置文件：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   sl</pre>
</div>
</div>
<div class="paragraph">
<p>默认情况下， 您的 FreeBSD 计算机不会转发包。 如果您希望将 FreeBSD SLIP 服务器作为路由器使用， 就需要修改 <span class="filename">/etc/rc.conf</span> 文件， 将 <code>gateway_enable</code> 变量设为 <code>YES</code>。 这样下次系统引导时就能够保持这一配置了。</p>
</div>
<div class="paragraph">
<p>要立即应用这些配置， 可以 <code>root</code> 的身份运行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># /etc/rc.d/routing start</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>请参阅 crossref:kernelconfig[kernelconfig,配置FreeBSD的内核] 以了解如何配置 FreeBSD 内核， 并获得在重新配置内核方面的指导。</p>
</div>
</div>
<div class="sect3">
<h4 id="_sliplogin配置">7.2.4. Sliplogin配置<a class="anchor" href="#_sliplogin配置"></a></h4>
<div class="paragraph">
<p>正如先前所提到的， <span class="filename">/etc/sliphome</span> 目录中有三个文件， 它们共同构成 <span class="filename">/usr/sbin/sliplogin</span> 的配置 (参考 <code>sliplogin</code> 的联机手册 man:sliplogin[8])： 用于定义 SLIP 用户和相关的 IP 地址的 <span class="filename">slip.hosts</span>、 通常仅用于配置 SLIP 接口的 <span class="filename">slip.login</span>， 以及 (可选的) <span class="filename">slip.logout</span>， 用以撤销由 <span class="filename">slip.login</span> 所执行的动作。</p>
</div>
<div class="sect4">
<h5 id="_配置_slip_hosts">7.2.4.1. 配置 <span class="filename">slip.hosts</span><a class="anchor" href="#_配置_slip_hosts"></a></h5>
<div class="paragraph">
<p><span class="filename">/etc/sliphome/slip.hosts</span>里的每行包含至少四个元素， 元素之间由空格隔开：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SLIP用户的登录ID</p>
</li>
<li>
<p>SLIP连接的本地地址(指SLIP服务器)</p>
</li>
<li>
<p>SLIP连接的远程地址</p>
</li>
<li>
<p>网络掩网</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>本地和远程地址可以是主机名 (通过文件<span class="filename">/etc/hosts</span>或者域名服务解析为IP地址， 这取决于文件<span class="filename">/etc/nsswitch.conf</span> 中的设置)， 网络掩网可以是一个 能通过文件<span class="filename">/etc/networks</span>解析的名字。 在一个样例系统中， <span class="filename">/etc/sliphome/slip.hosts</span>是这样的：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre>
</div>
</div>
<div class="paragraph">
<p>在这行末尾是一或多个选项：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>normal</code> -不压缩报头</p>
</li>
<li>
<p><code>compress</code> - 压缩报头</p>
</li>
<li>
<p><code>autocomp</code> -如果远程端允许， 压缩报头</p>
</li>
<li>
<p><code>noicmp</code> -禁用ICMP数据包 (这样就会丢弃所有的&#34;ping&#34;数据包， 不占用您的带宽)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>对SLIP连接的本地及远程地址的选择取决是您是准备在SLIP服务器上使用 TCP/IP 子网还是使用&#34;ARP代理&#34; (它并不是&#34;真正的&#34;ARP代理， 而是我们在本节用于介绍的术语)。 如果您不能确定选择何种方式或者如何分配地址， 请参考&#34;前提条件&#34;(<a href="#slips-prereqs">前提条件</a>)里列出的TCP/IP书籍 或者向您的IP网络管理员请教。</p>
</div>
<div class="paragraph">
<p>如果打算为您的 SLIP 客户使用一个独立的子网， 就需要先从分配得到的网络号中取出一个子网号， 然后再在这个子网里给每个 SLIP 客户分配 IP 地址。 接下来， 您还需要通过 SLIP 服务器在最近的 IP 路由器上配置一个指向 SLIP 子网的静态路由。</p>
</div>
<div class="paragraph">
<p>如果要使用 &#34;代理 ARP&#34; 的方式， 您还需要从 SLIP 服务器的以太子网中为每个 SLIP 客户分配IP地址， 还必须修改<span class="filename">/etc/sliphome/slip.login</span> 和 <span class="filename">/etc/sliphome/slip.logout</span>脚本以使用 man:arp[8]来管理在 SLIP 服务器 ARP 表中的 &#34;代理 ARP&#34; 项。</p>
</div>
</div>
<div class="sect4">
<h5 id="_slip_login_configuration">7.2.4.2. <span class="filename">slip.login</span> Configuration<a class="anchor" href="#_slip_login_configuration"></a></h5>
<div class="paragraph">
<p>典型的<span class="filename">/etc/sliphome/slip.login</span> 如下所示：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre>
</div>
</div>
<div class="paragraph">
<p>这个<span class="filename">slip.login</span>脚本仅仅为带有相应本地及远程地址和掩码的SLIP接口执行 <code>ifconfig</code>。</p>
</div>
<div class="paragraph">
<p>如果您决定使用&#34;ARP代理&#34; 方式(而非为您的SLIP客户使用独立的子网)， 您的<span class="filename">/etc/sliphome/slip.login</span> 应该是这样：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# Answer ARP requests for the SLIP client with our Ethernet addr
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre>
</div>
</div>
<div class="paragraph">
<p><span class="filename">slip.login</span>新加的行<code>arp -s $5 00:11:22:33:44:55 pub</code> 在 SLIP 服务器的 ARP 表中加入了一个表项。 这个ARP项使得每当这个以太网上的其它 IP 节点对 SLIP 客户端 IP 地址进行 ARP 请求时， SLIP 服务器会以自已的以太网MAC地址作为回应。</p>
</div>
<div class="paragraph">
<p>当使用以上的例子时， 一定要将 以太网MAC地址 （<code>00:11:22:33:44:55</code>） 替换成您系统网卡的MAC地址， 否则&#34;ARP代理&#34; 将完全无法工作！ 您可以查看 <code>netstat -i</code> 输出结果以取得以太网 MAC 地址; 输出的第二行应该是这样：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</code></pre>
</div>
</div>
<div class="paragraph">
<p>这行表明这个系统的以太网MAC地址是<code>00:02:c1:28:5f:4a</code> -<code>netstat -i</code>输出的以太网MAC地址必须改成用冒号隔开， 并且要单个十六进数前加上。 这是man:arp[8]要求的格式; 参考man:arp[8] 的联机手册以获取完整的使用方法。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在编写 <span class="filename">/etc/sliphome/slip.login</span> 和 <span class="filename">/etc/sliphome/slip.logout</span> 时， 一定要设置 &#34;可执行&#34; (execute) 位 (换言之， <code>chmod 755 /etc/sliphome/slip.login /etc/sliphome/slip.logout</code>)， 否则 <code>sliplogin</code>将无法执行它。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_slip_logout配置">7.2.4.3. <span class="filename">slip.logout</span>配置<a class="anchor" href="#_slip_logout配置"></a></h5>
<div class="paragraph">
<p><span class="filename">/etc/sliphome/slip.logout</span>并不是必需的 (除非您使用了&#34;ARP代理&#34;)， 如果您准备创建它， 这里有一个基本的 <span class="filename">slip.logout</span> 脚本的例子：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh -
#
#       slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down</pre>
</div>
</div>
<div class="paragraph">
<p>如果使用了 &#34;代理 ARP&#34;， 则可能希望 <span class="filename">/etc/sliphome/slip.logout</span> 在用户注销时自动为 SLIP 客户端删除 ARP 项：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#!/bin/sh -
#
#       @(#)slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down
# Quit answering ARP requests for the SLIP client
/usr/sbin/arp -d $5</pre>
</div>
</div>
<div class="paragraph">
<p><code>arp -d $5</code> 将删除由 &#34;代理 ARP&#34;<span class="filename">slip.login</span> 在 SLIP 客户程序登录时所生成的 ARP 项。</p>
</div>
<div class="paragraph">
<p>再次强调： 建立 <span class="filename">/etc/sliphome/slip.logout</span> 之后， 一定要设置可执行位 (也就是说， <code>chmod 755 /etc/sliphome/slip.logout</code>)。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_路由考虑">7.2.5. 路由考虑<a class="anchor" href="#_路由考虑"></a></h4>
<div class="paragraph">
<p>如果没有使用 &#34;代理 ARP&#34; 的方法来在您的 SLIP 客户机和网络的其余部分 (也可能是 Internet) 之间路由数据包， 您可能需要增加离您最近的默认路由器的静态路由， 以便通过 SLIP 服务器来在 SLIP 客户机子网上进行路由。</p>
</div>
<div class="sect4">
<h5 id="_静态路由">7.2.5.1. 静态路由<a class="anchor" href="#_静态路由"></a></h5>
<div class="paragraph">
<p>向您最近的默认路由添加一个静态路由可以说是很麻烦 (或者说是不可能， 如果您没有权限这么做)。 如果在您的组织中使用多路由器网络， 有些路由器 (比如 Cisco 和 Proteon 生产的) 不但要配置指向 SLIP 子网的路由， 而且还需要配置将哪些静态路由传给其它的路由器。 所以一些专家意见和问题解答对于使基于静态路由表的路由正常工作很有必要。</p>
</div>
</div>
</div>
</div>
</div>
</div>

    </div>
    
    <div class="buttons">
      
      <div class="prev">
        <i class="fa fa-angle-left" aria-hidden="true" title="Prev"></i>
        <div class="container">
          
            <a href=http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms class="direction">Prev</a>
          
        </div>
      </div>
      
      <div class="home">
        <i class="fa fa-home" aria-hidden="true" title="Home"></i>
        <div class="container">
          
            <a href="../" class="direction">Home</a>
          
        </div>
      </div>
      
      <div class="next">
        <div class="container">
          
            <a href=http://127.0.0.1:5500/zh-cn/books/handbook/mail  class="direction">Next</a>
          
        </div>
        <i class="fa fa-angle-right" aria-hidden="true" title="Next"></i>
      </div>
      
    </div>
    <label class="hidden book-menu-overlay" for="menu-control"></label>
  </div>
  <aside class="toc">
    <div class="toc-content">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#ppp-and-slip-synopsis">1. 概述</a></li>
    <li><a href="#userppp">2. 使用用户级 PPP</a></li>
    <li><a href="#ppp">3. 使用内核级PPP</a></li>
    <li><a href="#ppp-troubleshoot">4. PPP 连接故障排除</a></li>
    <li><a href="#pppoe">5. 使用基于以太网的PPP(PPPoE)</a></li>
    <li><a href="#pppoa">6. 使用 ATM 上的 PPP (PPPoA)</a></li>
    <li><a href="#slip">7. 使用SLIP</a></li>
  </ul>
</nav>
      <hr />
      
    </div>
  </aside>
  <a class="to-top" href="#top">
    <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
  </a>
</main>

    <footer>
  <div class="footer-container">
    <section class="logo-column">
          <img src="/images/FreeBSD-colors.svg" width="160" height="50" alt="FreeBSD logo" />
        <div class="options-container">
          
            <div class="language-container">
              <a id="languages" href="http://127.0.0.1:5500/zh-cn/languages">
                
                <img src="/images/language.png" class="language-image" alt="Choose language">
                <span>简体中文</span>
              </a>
            </div>
          
          <div class="theme-container">
            <select id="theme-chooser">
	      <option value="theme-system">System</option>
              <option value="theme-light">Light</option>
              <option value="theme-dark">Dark</option>
              <option value="theme-high-contrast">High contrast</option>
            </select>
          </div>
        </div>
      </section>
      
      <section class="copyright-column">
        <p>&copy; 1994-2023 The FreeBSD Project. All rights reserved</p>
        <span>Made with <span class="heart">♥</span> by the FreeBSD Community</span>
      </section>
  </div>
</footer>

  </body>
</html>
