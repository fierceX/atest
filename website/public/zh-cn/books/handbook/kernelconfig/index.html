<!DOCTYPE html>
<html class="theme-light" lang="zh-cn">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=""/>
  <meta name="keywords" content=""/>
  <meta name="copyright" content="1995-2023 The FreeBSD Foundation" />
  <link rel="canonical" href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/" />

  <title>第 9 章 配置FreeBSD的内核 |  FreeBSD Documentation Portal</title>

  <meta name="theme-color" content="#790000">
  <meta name="color-scheme" content="system light dark high-contrast">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles/main.min.css">
    <link rel="stylesheet" href="/css/font-awesome-min.css">
    <script defer src="/js/theme-chooser.min.js"></script>
    <script defer src="/js/copy-clipboard.min.js"></script>
    <script defer src="/js/search.min.js"></script>

  
  
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:domain" content="docs.FreeBSD.org"/>
    <meta name="twitter:site" content="@freebsd"/>
    <meta name="twitter:url" content="https://twitter.com/freebsd"/>
    <meta property="og:title" content="第 9 章 配置FreeBSD的内核" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="http://127.0.0.1:5500favicon.ico"/>
    <meta property="og:image:alt" content="FreeBSD Logo">
    <meta property="og:locale" content="zh-cn" />
    <meta property="og:url" content="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/" />
    <meta property="og:site_name" content="FreeBSD Documentation Portal" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Article",
        "url": "http:\/\/127.0.0.1:5500\/zh-cn\/books\/handbook\/kernelconfig\/",
        "name": "FreeBSD Documentation Portal",
        "headline": "FreeBSD Documentation Portal",
        "description": "FreeBSD Documentation Portal"
      }
    </script>
    

  
</head>


  <body>
    <header>
  <div class="header-container">
    <div class="logo-menu-bars-container">
      <a href="http://127.0.0.1:5500" class="logo">
        <img src="/images/FreeBSD-monochromatic.svg" width="160" height="50" alt="FreeBSD logo" />
      </a>
      <label class="menu-bars" for="menu-bars">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </label>
    </div>
    <input id="menu-bars" type="checkbox" />
    
    <div class="search-donate-container">
      
      
    </div>
  </div>
</header>

    
<input type="checkbox" class="hidden toggle" id="menu-control">
<main class="main-wrapper-book">
  <a id="top"></a>
  
  <aside class="book-menu">
    <div class="book-menu-content">
      <input id="search-book" type="text" placeholder="Search" aria-label="Search" maxlength="128" />
      <nav id="MenuContents">
        
  <ul>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ada319c45e780947f82b569049480cc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-8ada319c45e780947f82b569049480cc"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/">
              前言
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-audience">预期的读者</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes-from3">相对于第三版的改动</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes-from2">相对于第二版的改动 (2004)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes">相对于第一版的改变 (2001)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-overview">本手册的组织</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-conv">本书中使用的一些约定</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-acknowledgements">致谢</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-32a83d18a326852a8d9ae2582360bbc8" class="toggle"  />
          <label  for="chapter-32a83d18a326852a8d9ae2582360bbc8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/parti/">
              部分 I. 起步
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a4909db05d872d16d5be86a57cbc2dc7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a4909db05d872d16d5be86a57cbc2dc7"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/">
              第 1 章 介绍
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#introduction-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#nutshell">2. 欢迎来到 FreeBSD 的世界!</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#history">3. 关于 FreeBSD 项目</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6655173739803bf0920b92a7fe8a363d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-6655173739803bf0920b92a7fe8a363d"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/">
              第 2 章 安装 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-hardware">2. 硬件需求</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-pre">3. 安装前的准备工作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-start">4. 开始安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#using-sysinstall">5. 介绍 Sysinstall</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-steps">6. 分配磁盘空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-choosing">7. 选择要安装的软件包</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-media">8. 选择您要使用的安装介质</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-final-warning">9. 安装确认</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-post">10. 安装后的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-trouble">11. 常见问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-advanced">12. 高级安装指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-diff-media">13. 准备您自己的安装介质</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3c2455cadf89eadd3f6e77461085d5e9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3c2455cadf89eadd3f6e77461085d5e9"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/">
              第 3 章 安装 FreeBSD（适用于 9.x 及以后版本）
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-hardware">2. 硬件需求</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-pre">3. 安装前的准备工作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-start">4. 开始安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#using-bsdinstall">5. 介绍 bsdinstall</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-netinstall">6. 通过网络安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-partitioning">7. 分配磁盘空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-final-warning">8. 安装确认</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-post">9. 安装后的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-install-trouble">10. 故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-709481b75d22ad36960f7ac166b3306c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-709481b75d22ad36960f7ac166b3306c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/">
              第 4 章 UNIX 基础
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#consoles">2. 虚拟控制台和终端</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#permissions">3. 权限</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#dirstructure">4. 目录架构</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#disk-organization">5. 磁盘组织</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#mount-unmount">6. 文件系统的挂接和卸下</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-processes">7. 进程</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-daemons">8. 守护进程，信号和杀死进程</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#shells">9. Shells</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#editors">10. 文本编辑器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-devices">11. 设备和设备节点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#binary-formats">12. 二进制文件格式</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-more-information">13. 取得更多的资讯</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-58c050d31a1fbecd859248dacefeb567" class="toggle"  />
          <label  class="icon cursor"  for="chapter-58c050d31a1fbecd859248dacefeb567"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/">
              第 5 章 安装应用程序: Packages 和 Ports
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-overview">2. 软件安装预览</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-finding-applications">3. 寻找您要的应用程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#packages-using">4. 使用 Package 系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-using">5. 使用Ports Collection</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-nextsteps">6. 安装之后还要做点什么？</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-broken">7. 如何处理坏掉的 Ports</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e5a000ce7f50680a180e2c1b83c121bc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e5a000ce7f50680a180e2c1b83c121bc"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/">
              第 6 章 X Window 系统
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x11-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-understanding">2. 理解 X</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-install">3. 安装 X11</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-config">4. 配置 X11</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-fonts">5. 在 X11 中使用字体</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-xdm">6. X 显示管理器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x11-wm">7. 桌面环境</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-5eb30759c3a2873e716dc31d7760054c" class="toggle"  />
          <label  for="chapter-5eb30759c3a2873e716dc31d7760054c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partii/">
              部分 II. 常见的任务
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-c96504f017c56f4bc7f71548cccf5382" class="toggle"  />
          <label  class="icon cursor"  for="chapter-c96504f017c56f4bc7f71548cccf5382"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/">
              第 7 章 桌面应用
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-browsers">2. 浏览器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-productivity">3. 办公、图象处理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-viewers">4. 文档查看器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-finance">5. 财务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-summary">6. 总结</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e1898af36aaacc168e13b673d25b908f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e1898af36aaacc168e13b673d25b908f"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/">
              第 8 章 多媒体
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#multimedia-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#sound-setup">2. 安装声卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#sound-mp3">3. MP3音频</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#video-playback">4. 视频回放</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#tvcard">5. 安装电视卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#scanners">6. 图象扫描仪</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6926664836e63c5cae4b2fa60855f91d" class="toggle"  checked  />
          <label  class="icon cursor"  for="chapter-6926664836e63c5cae4b2fa60855f91d"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/">
              第 9 章 配置FreeBSD的内核
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-custom-kernel">2. 为什么需要建立定制的内核?</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-devices">3. 发现系统硬件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-modules">4. 内核驱动，子系统和模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-building">5. 建立并安装一个定制的内核</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-config">6. 配置文件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-trouble">7. 如果出现问题怎么办</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-19d36bd70a320268f0ea1f66e4f3e224" class="toggle"  />
          <label  class="icon cursor"  for="chapter-19d36bd70a320268f0ea1f66e4f3e224"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/">
              第 10 章 打印
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-intro-spooler">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-intro-setup">3. 基本设置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-advanced">4. 高级设置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-using">5. 使用打印机</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-lpd-alternatives">6. 替换标准后台打印</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-troubleshooting">7. 疑难问题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/">
              第 11 章 Linux® 二进制兼容模式
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-lbc-install">2. 配置 Linux® 二进制兼容模式</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-advanced">3. 高级主题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-51416fdea9d5a1dfa1c2718cd825213a" class="toggle"  />
          <label  for="chapter-51416fdea9d5a1dfa1c2718cd825213a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partiii/">
              部分 III. 系统管理
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-532d0380ba66d66e033765a0b6930ee7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-532d0380ba66d66e033765a0b6930ee7"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/">
              第 12 章 设置和调整
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#config-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-initial">2. 初步配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-core-configuration">3. 核心配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-appconfig">4. 应用程序配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-starting-services">5. 启动服务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-cron">6. 配置 <code>cron</code></a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-rcd">7. 在 FreeBSD 中使用 rc</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#config-network-setup">8. 设置网卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-virtual-hosts">9. 虚拟主机</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-configfiles">10. 配置文件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-sysctl">11. 用 sysctl 进行调整</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-disk">12. 调整磁盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-kernel-limits">13. 调整内核限制</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#adding-swap-space">14. 添加交换空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#acpi-overview">15. 电源和资源管理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#ACPI-debug">16. 使用和调试 FreeBSD ACPI</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-d05f41680fb7e3d68b354ae03de368b1" class="toggle"  />
          <label  class="icon cursor"  for="chapter-d05f41680fb7e3d68b354ae03de368b1"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/">
              第 13 章 FreeBSD 引导过程
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-introduction">2. 引导问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-blocks">3. 引导管理器和各引导阶段</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-kernel">4. 内核在引导时的交互</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#device-hints">5. Device Hints</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-init">6. Init：进程控制及初始化</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-shutdown">7. 关机 (shutdown) 过程</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-17a53b356b407d9ed656b7babd2efa34" class="toggle"  />
          <label  class="icon cursor"  for="chapter-17a53b356b407d9ed656b7babd2efa34"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/">
              第 14 章 用户和基本的帐户管理
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-introduction">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-superuser">3. 超级用户帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-system">4. 系统帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-user">5. 用户帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-modifying">6. 修改帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-limiting">7. 限制用户使用系统资源</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-groups">8. 组</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-513e8e407c57354df334059688e9b60a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-513e8e407c57354df334059688e9b60a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/">
              第 15 章 安全
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-intro">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#securing-freebsd">3. 确保 FreeBSD 的安全</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#crypt">4. DES、 Blowfish、 MD5， 以及 Crypt</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#one-time-passwords">5. 一次性口令</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#tcpwrappers">6. TCP Wrappers</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#kerberos5">7. Kerberos5</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#openssl">8. OpenSSL</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#ipsec">9. IPsec 上的 VPN</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#openssh">10. OpenSSH</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#fs-acl">11. 文件系统访问控制表</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-portaudit">12. 监视第三方安全问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-advisories">13. FreeBSD 安全公告</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-accounting">14. 进程记帐</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0f7d2858504c83a029928c048d394e2a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0f7d2858504c83a029928c048d394e2a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/">
              第 16 章 Jails
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-terms">2. 与 Jail 相关的一些术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-intro">3. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-build">4. 建立和控制 jail</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-tuning">5. 微调和管理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-application">6. Jail 的应用</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-15be125ce5997f51c5499e3a0dee6c2c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-15be125ce5997f51c5499e3a0dee6c2c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/">
              第 17 章 强制访问控制
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-synopsis">1. 概要</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-inline-glossary">2. 本章出现的重要术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-initial">3. 关于 MAC 的说明</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-understandlabel">4. 理解 MAC 标签</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-planning">5. 规划安全配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-modules">6. 模块配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-seeotheruids">7. MAC seeotheruids 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-bsdextended">8. MAC bsdextended 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-ifoff">9. MAC ifoff 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-portacl">10. MAC portacl 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-partition">11. MAC partition (分区) 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-mls">12. MAC 多级 (Multi-Level) 安全模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-biba">13. MAC Biba 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-lomac">14. MAC LOMAC 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-implementing">15. MAC Jail 中的 Nagios</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-userlocked">16. User Lock Down</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-troubleshoot">17. MAC 框架的故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3f7e8d763b17c7d0c44c60505cf0feea" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3f7e8d763b17c7d0c44c60505cf0feea"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/">
              第 18 章 安全事件审计
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-inline-glossary">2. 本章中的一些关键术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-install">3. 安装审计支持</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-config">4. 对审计进行配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-administration">5. 管理审计子系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7bb1cb2287cd08a3672cc878e604f0d0" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7bb1cb2287cd08a3672cc878e604f0d0"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/">
              第 19 章 存储
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-naming">2. 设备命名</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-adding">3. 添加磁盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#raid">4. RAID</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#usb-disks">5. USB 存储设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#creating-cds">6. 创建和使用光学介质(CD)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#creating-dvds">7. 创建和使用光学介质(DVD)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#floppies">8. 创建和使用软盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backups-tapebackups">9. 用磁带机备份</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backups-floppybackups">10. 用软盘备份</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backup-strategies">11. 备份策略</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backup-basics">12. 备份程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-virtual">13. 网络、内存和 和以及映像文件为介质的虚拟文件系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#snapshots">14. 文件系统快照</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#quotas">15. 文件系统配额</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-encrypting">16. 加密磁盘分区</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#swap-encrypting">17. 对交换区进行加密</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-hast">18. 高可用性存储 (HAST)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-dec5fc4f0100e5030db0fb188d8d4b2f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-dec5fc4f0100e5030db0fb188d8d4b2f"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/">
              第 20 章 GEOM: 模块化磁盘变换框架
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-intro">2. GEOM 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-striping">3. RAID0 - 条带</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-mirror">4. RAID1 - 镜像</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-raid3">5. RAID3 - 使用专用校验设备的字节级条带</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-ggate">6. GEOM Gate 网络设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-glabel">7. 为磁盘设备添加卷标</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-gjournal">8. 通过 GEOM 实现 UFS 日志</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-4c6bf6828e601b79edb2813329ac6604" class="toggle"  />
          <label  class="icon cursor"  for="chapter-4c6bf6828e601b79edb2813329ac6604"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/">
              第 21 章 文件系统 Support
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/#filesystems-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/#filesystems-zfs">2. Z 文件系统 (ZFS)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-11d260f2685c0b17137e64887e1b1989" class="toggle"  />
          <label  class="icon cursor"  for="chapter-11d260f2685c0b17137e64887e1b1989"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/">
              第 22 章 Vinum 卷管理程序
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-intro">2. 磁盘容量太小</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-access-bottlenecks">3. 访问瓶颈</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-data-integrity">4. 数据的完整性</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-objects">5. Vinum 目标</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-examples">6. 一些例子</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-object-naming">7. 对象命名</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-config">8. 配置 Vinum</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-root">9. 使用 Vinum 作为根文件系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-ae23289d4b6415f3f878893f9d3ef9b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-ae23289d4b6415f3f878893f9d3ef9b8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/">
              第 23 章 虚拟化
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-guest">2. 作为客户 OS 的 FreeBSD</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-host">3. 作为宿主 OS 的 FreeBSD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-b279d2b738963a45a059268d2fae00d5" class="toggle"  />
          <label  class="icon cursor"  for="chapter-b279d2b738963a45a059268d2fae00d5"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/">
              第 24 章 本地化－I18N/L10N使用和设置
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-basics">2. 基础知识</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#using-localization">3. 使用本地化语言</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-compiling">4. 编译I18N程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#lang-setup">5. 本地化FreeBSD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9e3f99bd76c861ab2e9a5f31ac421842" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9e3f99bd76c861ab2e9a5f31ac421842"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/">
              第 25 章 更新与升级 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate">2. FreeBSD 更新</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-portsnap">3. Portsnap： 一个 Ports Collection 更新工具</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-documentation">4. 更新系统附带的文档</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#current-stable">5. 追踪开发分支</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#synching">6. 同步您的源码</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#makeworld">7. 重新编译 "world"</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#make-delete-old">8. 删除过时的文件、 目录和函数库</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#small-lan">9. 跟踪多台机器</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3ba999091575eb04ae88235cd0fb1afa" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3ba999091575eb04ae88235cd0fb1afa"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/">
              第 26 章 DTrace
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-implementation">2. 实现上的差异</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-enable">3. 启用 DTrace 支持</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-using">4. 使用 DTrace</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-language">5. D 语言</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6d4439926bb106ac084ecc88cfd3cfa4" class="toggle"  />
          <label  for="chapter-6d4439926bb106ac084ecc88cfd3cfa4"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partiv/">
              部分 IV. 网络通讯
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-05a353fcb61d8e035f7c43e14725766e" class="toggle"  />
          <label  class="icon cursor"  for="chapter-05a353fcb61d8e035f7c43e14725766e"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/">
              第 27 章 串口通讯
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serial-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serial">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#term">3. 终端</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#dialup">4. 拨入服务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#dialout">5. 拨出设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serialconsole-setup">6. 设置串口控制台</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/">
              第 28 章 PPP 和 SLIP
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#userppp">2. 使用用户级 PPP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp">3. 使用内核级PPP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp-troubleshoot">4. PPP 连接故障排除</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#pppoe">5. 使用基于以太网的PPP(PPPoE)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#pppoa">6. 使用 ATM 上的 PPP (PPPoA)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#slip">7. 使用SLIP</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9d023b545804f197d195dd9412749943" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9d023b545804f197d195dd9412749943"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/">
              第 29 章 电子邮件
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-using">2. 使用电子邮件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#sendmail">3. sendmail 配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-changingmta">4. 改变您的邮件传输代理程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-trouble">5. 疑难解答</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-advanced">6. 高级主题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-UUCP">7. SMTP 与 UUCP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#outgoing-only">8. 只发送邮件的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-dialup">9. 拨号连接时使用邮件传送</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-Auth">10. SMTP 验证</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-agents">11. 邮件用户代理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-fetchmail">12. 使用 fetchmail</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-procmail">13. 使用 procmail</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-42b19e05d30c4135c74b9878818747a9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-42b19e05d30c4135c74b9878818747a9"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/">
              第 30 章 网络服务器
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-servers-synopsis">1. 概要</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-inetd">2. inetd"超级服务器"</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-nfs">3. 网络文件系统（NFS）</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-nis">4. 网络信息服务 (NIS/YP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-dhcp">5. 网络自动配置 (DHCP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-dns">6. 域名系统 (DNS)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-apache">7. Apache HTTP 服务器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-ftp">8. 文件传输协议 (FTP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-samba">9. 为 Microsoft® Windows® 客户机提供文件和打印服务 (Samba)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-ntp">10. 通过 NTP 进行时钟同步</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-syslogd">11. 使用 <code>syslogd</code> 记录远程主机的日志</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9554a5177d00d0e87ada408809a1fc67" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9554a5177d00d0e87ada408809a1fc67"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/">
              第 31 章 防火墙
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-intro">1. 入门</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-concepts">2. 防火墙的概念</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-apps">3. 防火墙软件包</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-pf">4. OpenBSD Packet Filter (PF) 和 ALTQ</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-ipf">5. IPFILTER (IPF) 防火墙</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-ipfw">6. IPFW</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9903a1d844ed803a436595e93ec33572" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9903a1d844ed803a436595e93ec33572"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/">
              第 32 章 高级网络
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#advanced-networking-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-routing">2. 网关和路由</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-wireless">3. 无线网络</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-bluetooth">4. 蓝牙</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-bridging">5. 桥接</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-aggregation">6. 链路聚合与故障转移</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-diskless">7. 无盘操作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-pxe-nfs">8. 从 PXE 启动一个 NFS 根文件系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-isdn">9. ISDN</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-natd">10. 网络地址转换</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-plip">11. 并口电缆 IP (PLIP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-ipv6">12. IPv6</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-atm">13. 异步传输模式 (ATM)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#carp">14. Common Address Redundancy Protocol (CARP， 共用地址冗余协议)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ca29f99c249993ee9234cb4632af7a5" class="toggle"  />
          <label  for="chapter-8ca29f99c249993ee9234cb4632af7a5"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partv/">
              部分 V. 附录
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0229d553ebf23ffeb945be6f32836221" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0229d553ebf23ffeb945be6f32836221"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/">
              附录 A. 获取 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-cdrom">1. CDROM 和 DVD 发行商</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-ftp">2. FTP 站点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#anoncvs">3. 匿名 CVS</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#ctm">4. 使用 CTM</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#cvsup">5. 使用 CVSup</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#cvs-tags">6. CVS 标签</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-afs">7. AFS 站点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-rsync">8. rsync 站点</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-743c99fa278b8138914ff018e40c9231" class="toggle"  />
          <label  class="icon cursor"  for="chapter-743c99fa278b8138914ff018e40c9231"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/">
              附录 B. 参考文献
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-freebsd">1. 关于 FreeBSD 的专业书籍与杂志</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-userguides">2. 用户指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-adminguides">3. 管理员指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-programmers">4. 开发指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-osinternals">5. 操作系统原理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-security">6. 安全方面的参考文献</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-hardware">7. 硬件参考</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-history">8. UNIX® 历史</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-journals">9. 各种期刊</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-de7eade4b8b64f298c0cbac44c2278da" class="toggle"  />
          <label  class="icon cursor"  for="chapter-de7eade4b8b64f298c0cbac44c2278da"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/">
              附录 C. Internet上的资源
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-mail">1. 邮件列表</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-news">2. Usenet新闻组</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-web">3. World Wide Web服务器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-email">4. Email地址</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26" class="toggle"  />
          <label  class="icon cursor"  for="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/pgpkeys/">
              附录 D. PGP公钥
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/pgpkeys/#pgpkeys-officers">1. Officers</a></li>
  </ul>

          

        
      </li>
    
      <li>
        
      </li>
    
  </ul>


      </nav>
    </div>
  </aside>
  
  <div class="book">
    
    <div class="book-menu-mobile">
      <label for="menu-control">
        <span class="menu-control-button">
          <i class="fa fa-list" aria-hidden="true" title="Book menu"></i>
          Book menu
        </span>
      </label>
    </div>
    
    <h1 class="title">第 9 章 配置FreeBSD的内核</h1>
    
    
      <div class="admonitionblock note">
        <p>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          This translation may be out of date. To help with the translations please access the <a href="https://translate-dev.freebsd.org/" target="_blank">FreeBSD translations instance</a>.
        </p>
      </div>
    
    
    
    <div class="toc-mobile">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#kernelconfig-synopsis">1. 概述</a></li>
    <li><a href="#kernelconfig-custom-kernel">2. 为什么需要建立定制的内核?</a></li>
    <li><a href="#kernelconfig-devices">3. 发现系统硬件</a></li>
    <li><a href="#kernelconfig-modules">4. 内核驱动，子系统和模块</a></li>
    <li><a href="#kernelconfig-building">5. 建立并安装一个定制的内核</a></li>
    <li><a href="#kernelconfig-config">6. 配置文件</a></li>
    <li><a href="#kernelconfig-trouble">7. 如果出现问题怎么办</a></li>
  </ul>
</nav>
    </div>
    
      
      
    
    <div class="book-content">
      <div id="preamble">
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-synopsis">1. 概述<a class="anchor" href="#kernelconfig-synopsis"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>内核是 FreeBSD 操作系统的核心。 它负责管理内存、 执行安全控制、 网络、 磁盘访问等等。 尽管 FreeBSD 可以动态修改的现在已经越来越多， 但有时您还是需要重新配置和编译您的内核。</p>
</div>
<div class="paragraph">
<p>读完这章，您将了解：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>为什么需要建立定制的内核。</p>
</li>
<li>
<p>如何编写内核配置文件，或修改已存在的配置文件。</p>
</li>
<li>
<p>如何使用内核配置文件创建和联编新的内核。</p>
</li>
<li>
<p>如何安装新内核。</p>
</li>
<li>
<p>如何处理出现的问题。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这一章给出的命令应该以 <code>root</code> 身份执行， 否则可能会不成功。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-custom-kernel">2. 为什么需要建立定制的内核?<a class="anchor" href="#kernelconfig-custom-kernel"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>过去， FreeBSD 采用的是被人们称作 &#34;单片式&#34; 的内核。 这种内核本身是一个大的程序， 它支持的设备不能够动态地加以改变， 而当希望改变内核的行为时， 就必须编译一个新的内核， 并重新启动计算机才可以使用它。</p>
</div>
<div class="paragraph">
<p>如今， FreeBSD 正在迅速地迁移到一种新的模型， 其特点是将大量内核功能放进可以动态加载和卸载的内核模块来提供。 这使得内核能够适应硬件的调整 (例如笔记本计算机中的 PCMCIA 卡)， 以及为内核引入新的功能， 而无需在编译内核时就将其添加进去。 这种做法称为模块化内核。</p>
</div>
<div class="paragraph">
<p>尽管如此， 仍然有一些功能需要静态地联编进内核。 有时， 这是由于这些功能与内核的结合非常紧密而无法实现动态加载， 还有一些情况是暂时没有人将这些功能改写为可动态加载的模块。</p>
</div>
<div class="paragraph">
<p>联编定制的内核是成为高级 BSD 用户所必须经历的一关。 尽管这一过程需要花费一些时间， 但它能够为您的 FreeBSD 系统带来一些好处。 与必须支持大量硬件的 <span class="filename">GENERIC</span> 内核不同， 定制的内核可以只包含对于 <em>您</em> PC 硬件的支持。 这样做有很多好处， 例如：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>更快地启动。 因为内核只需要检测您系统上的硬件， 启动时所花费的时间将大大缩短。</p>
</li>
<li>
<p>使用更少的内存。 由于可以删去不需要的功能和设备驱动， 通常定制的内核会比 <span class="filename">GENERIC</span> 使用的内存更少。 节省内核使用的内存之所以重要是因为内核必须常驻于物理内存中， 从而使应用程序能够用到更多的内存。 正因为这样， 对 RAM 较小的系统来说定制内核就更为重要了。</p>
</li>
<li>
<p>支持更多的硬件。 定制的内核允许您增加类似声卡这样的 <span class="filename">GENERIC</span> 内核没有提供内建支持的硬件。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-devices">3. 发现系统硬件<a class="anchor" href="#kernelconfig-devices"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>在尝试配置内核以前，比较明智的做法是先获得一份机器硬件的清单。 当 FreeBSD 并不是主操作系统时，通过查看当前操作系统的配置可以很容易的 创建一份机器硬件的配置清单。举例来说， Microsoft® 的 设备管理器 里通常含有关于已安装硬件的重要信息。 设备管理器 位于控制面板。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>某些版本的 Microsoft® Windows® 有一个 系统 图标会指明 设备管理器 的位置。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>如果机器上并不存在其他的操作系统， 系统管理员只能手动寻找这些信息了。其中的一个方法是使用 man:dmesg[8] 工具以及 man:man[1] 命令。FreeBSD 上大多数的驱动程序都有一份手册页（manual page）列出了所支持的硬件， 在系统启动的时候，被发现的硬件也会被列出。举例来说， 下面的这几行表示 <span class="filename">psm</span> 驱动找到了一个鼠标：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: [ITHREAD]
psm0: model Generic PS/2 mouse, device ID 0</pre>
</div>
</div>
<div class="paragraph">
<p>这个驱动需要被包含在客户制定的内核配置文件里， 或着使用 man:loader.conf[5] 加载。</p>
</div>
<div class="paragraph">
<p>有时，<code>dmesg</code> 里只会显示来自系统消息的数据， 而不是系统启动时的检测信息。在这样的情况下，你可以查看文件 <span class="filename">/var/run/dmesg.boot</span>。</p>
</div>
<div class="paragraph">
<p>另一个查找硬件信息的方法是使用 man:pciconf[8] 工具， 它能提供更详细的输出，比如：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ath0@pci0:3:0:0:        class=0x020000 card=0x058a1014 chip=0x1014168c rev=0x01 hdr=0x00
    vendor     = &#39;Atheros Communications Inc.&#39;
    device     = &#39;AR5212 Atheros AR5212 802.11abg wireless&#39;
    class      = network
    subclass   = ethernet</pre>
</div>
</div>
<div class="paragraph">
<p>这个片断取自于 <code>pciconf -lv</code> 命令的输出，显示 <span class="filename">ath</span> 驱动找到了一个无线以太网设备。输入命令 <code>man ath</code> 就能查阅有关 man:ath[4] 的手册页（manual page）了。</p>
</div>
<div class="paragraph">
<p>还可以传给 man:man[1] 命令 <code>-k</code> 选项， 同样能获得有用的信息。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># man -k Atheros</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>能得到一份包含特定词语的手册页（manual page）:</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ath(4)                   - Atheros IEEE 802.11 wireless network driver
ath_hal(4)               - Atheros Hardware Access Layer (HAL)</pre>
</div>
</div>
<div class="paragraph">
<p>手头备有一份硬件的配置清单， 那么编译制定内核的过程就显得不那么困难了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-modules">4. 内核驱动，子系统和模块<a class="anchor" href="#kernelconfig-modules"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>在编译一个制定的内核之前请三思一下这么做的理由， 如果仅是需要某个特定的硬件支持的话， 那么很可能已经存在一个现成的模块了。</p>
</div>
<div class="paragraph">
<p>内核模块存放在目录 <span class="filename">/boot/kernel</span> 中，并能由 man:kldload[8] 命令加载入正在运行的内核。 基本上所有的内核驱动都有特定的模块和手册页。比如， 下面提到的 <span class="filename">ath</span> 无线以太网驱动。 在这个设备的联机手册中有以下信息：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>Alternatively, to load the driver as a module at boot time, place the
following line in man:loader.conf[5]:

    if_ath_load=&#34;YES&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>遵照示例，在 <span class="filename">/boot/loader.conf</span> 中加入 <code>if_ath_load=&#34;YES&#34;</code> 则能在机器启动的时候动态加载这个模块。</p>
</div>
<div class="paragraph">
<p>某些情况下，则没有相关的模块。通常是一些子系统和非常重要的驱动， 比如，快速文件系统 (FFS) 就是一个内核必需的选项。 同样的还有网络支持 (INET)。不幸的是， 分辨一个驱动是否必需的唯一方法就是检查测试以下那个模块本身。</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>去除某个驱动的支持或某个选项会非常容易得到一个坏掉的内核。 举例来说，如果把 man:ata[4] 驱动从内核配置文件中去掉， 那么一个使用 ATA 磁盘设备的系统可能就变得无法引导，除非有在 <span class="filename">loader.conf</span> 中加载。当你无法确定的时候， 请检查一下那个模块并把它留在你的内核配置中。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-building">5. 建立并安装一个定制的内核<a class="anchor" href="#kernelconfig-building"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>首先对内核构建目录做一个快速的浏览。 这里所提到的所有目录都在 <span class="filename">/usr/src/sys</span> 目录中； 也可以通过 <span class="filename">/sys</span> 来访问它。 这里的众多子目录包含了内核的不同部分， 但对我们所要完成的任务最重要的目录是 <span class="filename">arch/conf</span>， 您将在这里编辑定制的内核配置； 以及 <span class="filename">compile</span>， 编译过程中的文件将放置在这里。 <em>arch</em> 表示 <span class="filename">i386</span>、 <span class="filename">amd64</span>、 <span class="filename">ia64</span>、 <span class="filename">powerpc</span>、 <span class="filename">sparc64</span>， 或 <span class="filename">pc98</span> (在日本比较流行的另一种 PC 硬件开发分支)。 在特定硬件架构目录中的文件只和特定的硬件有关； 而其余代码则是与机器无关的， 则所有已经或将要移植并运行 FreeBSD 的平台上都共享这些代码。 文件目录是按照逻辑组织的， 所支持的硬件设备、 文件系统， 以及可选的组件通常都在它们自己的目录中。</p>
</div>
<div class="paragraph">
<p>这一章提供的例子假定您使用 i386 架构的计算机。 如果您的情况不是这样， 只需对目录名作相应的调整即可。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果您的系统中 <em>没有</em><span class="filename">/usr/src/sys</span> 这样一个目录， 则说明没有安装内核源代码。 安装它最简单的方法是通过以 root 身份运行 <code>sysinstall</code>， 选择 <span class="guimenuitem">Configure</span>， 然后是 <span class="guimenuitem">Distributions</span>、 <span class="guimenuitem">src</span>， 选中其中的 <span class="guimenuitem">base</span> 和 <span class="guimenuitem">sys</span>。 如果您不喜欢 sysinstall 并且有一张 &#34;官方的&#34; FreeBSD CDROM， 也可以使用下列命令， 从命令行来安装源代码：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># mount /cdrom</span>
<span class="c"># mkdir -p /usr/src/sys</span>
<span class="c"># ln -s /usr/src/sys /sys</span>
<span class="c"># cat /cdrom/src/ssys.[a-d]* | tar -xzvf -</span>
<span class="c"># cat /cdrom/src/sbase.[a-d]* | tar -xzvf -</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>接下来， 进入 <span class="filename">arch/conf</span> 目录下面， 复制 <span class="filename">GENERIC</span> 配置文件， 并给这个文件起一个容易辨认的名称， 它就是您的内核名称。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/src/sys/i386/conf</span>
<span class="c"># cp GENERIC MYKERNEL</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>通常，这个名称是大写的，如果您正维护着多台不同硬件的FreeBSD机器， 以您机器的域名来命名是非常好的主意。我们把它命名为 <span class="filename">MYKERNEL</span>就是这个原因。</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>将您的内核配置文件直接保存在 <span class="filename">/usr/src</span> 可能不是一个好主意。 如果您遇到问题， 删掉 <span class="filename">/usr/src</span> 并重新开始很可能是一个诱人的选择。 一旦开始做这件事， 您可能几秒钟之后才会意识到您同时会删除定制的内核配置文件。 另外， 也不要直接编辑 <span class="filename">GENERIC</span>， 因为下次您 crossref:cutting-edge[updating-upgrading,更新代码] 时它会被覆盖， 而您的修改也就随之丢失了。</p>
</div>
<div class="paragraph">
<p>您也可以考虑把内核配置文件放到别的地方， 然后再到 <span class="filename">i386</span> 目录中创建一个指向它的符号链接。</p>
</div>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/src/sys/i386/conf</span>
<span class="c"># mkdir /root/kernels</span>
<span class="c"># cp GENERIC /root/kernels/MYKERNEL</span>
<span class="c"># ln -s /root/kernels/MYKERNEL</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>必须以 <code>root</code> 身份执行这些和接下来命令， 否则就会得到  的错误提示。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>现在就可以用您喜欢的文本编辑器来编辑 <span class="filename">MYKERNEL</span> 了。 如果您刚刚开始使用 FreeBSD， 唯一可用的编辑器很可能是 vi， 它的使用比较复杂， 限于篇幅， 这里不予介绍， 您可以在 crossref:bibliography[bibliography,参考书目] 一章中找到很多相关书籍。 不过， FreeBSD 也提供了一个更好用的编辑器， 它叫做 ee， 对于新手来说， 这很可能是一个不错的选择。 您可以修改配置文件中的注释以反映您的配置， 或其他与 <span class="filename">GENERIC</span> 不同的地方。</p>
</div>
<div class="paragraph">
<p>如果您在SunOS™或者其他BSD系统下定制过内核，那这个文件中的绝大部分将对您非常熟悉。 如果您使用的是诸如DOS这样的系统，那<span class="filename">GENERIC</span>配置文件看起来就非常困难， 所以在下面的 <a href="#kernelconfig-config">配置文件</a>章节将慢慢地、仔细地进行介绍。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果您和 FreeBSD project 进行了 crossref:cutting-edge[updating-upgrading,代码同步]， 则一定要在进行任何更新之前查看 <span class="filename">/usr/src/UPDATING</span>。 这个文件中描述了更新过的代码中出现的重大问题或需要注意的地方。 <span class="filename">/usr/src/UPDATING</span> 总是和您的 FreeBSD 源代码对应， 因此能够提供比手册更具时效性的新内容。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>现在应该编译内核的源代码了。</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="paragraph">
<p><strong>Procedure: 联编内核</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>进入 <span class="filename">/usr/src</span> 目录：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/src</span></code></pre>
</div>
</div>
</li>
<li>
<p>编译内核：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># make buildkernel KERNCONF=MYKERNEL</span></code></pre>
</div>
</div>
</li>
<li>
<p>安装新内核：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># make installkernel KERNCONF=MYKERNEL</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>使用这种方法联编内核时， 需要安装完整的 FreeBSD 源代码。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>默认情况下， 在联编您所定制的内核时， <em>全部</em> 内核模块也会同时参与构建。 如果您希望更快地升级内核， 或者只希望联编您所需要的模块， 则应在联编之前编辑 <span class="filename">/etc/make.conf</span>：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>MODULES_OVERRIDE = linux acpi sound/sound sound/driver/ds1 ntfs</pre>
</div>
</div>
<div class="paragraph">
<p>这个变量的内容是所希望构建的模块列表。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>WITHOUT_MODULES = linux acpi sound ntfs</pre>
</div>
</div>
<div class="paragraph">
<p>这个变量的内容是将不在联编过程中编译的顶级模块列表。 如果希望了解更多与构建内核有关的变量， 请参见 man:make.conf[5] 联机手册。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>新内核将会被复制到 <span class="filename">/boot/kernel</span> 目录中成为 <span class="filename">/boot/kernel/kernel</span> 而旧的则被移到 <span class="filename">/boot/kernel.old/kernel</span>。 现在关闭系统， 然后用新的内核启动计算机。 如果出现问题， 后面的一些 <a href="#kernelconfig-trouble">故障排除方法</a> 将帮您摆脱困境。 如果您的内核 <a href="#kernelconfig-noboot">无法启动</a>， 请参考那一节。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>其他与启动过程相关的文件， 如 man:loader[8] 及其配置， 则放在 <span class="filename">/boot</span>。 第三方或定制的模块也可以放在 <span class="filename">/boot/kernel</span>， 不过应该注意保持模块和内核的同步时很重要的， 否则会导致不稳定和错误。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-config">6. 配置文件<a class="anchor" href="#kernelconfig-config"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>配置文件的格式是非常简单的。 每一行都包括一个关键词， 以及一个或多个参数。 实际上， 绝大多数行都只包括一个参数。 在 <code>\#</code> 之后的内容会被认为是注释而忽略掉。 接下来几节, 将以 <span class="filename">GENERIC</span> 中的顺序介绍所有关键字。 <a id="kernelconfig-options"></a> 如果需要与平台有关的选项和设备的详细列表， 请参考与 <span class="filename">GENERIC</span> 文件在同一个目录中的那个 <span class="filename">NOTES</span>， 而平台无关的选项， 则可以在 <span class="filename">/usr/src/sys/conf/NOTES</span> 找到。</p>
</div>
<div class="paragraph">
<p>配置文件中还可以使用 <code>include</code> 语句。 这个语句能够在内核配置文件中直接引用其他配置文件的内容， 使得您能够使用较小的、 仅包含相对于现存配置的变动而减少维护所需的工作。 例如， 如果您只需对 <span class="filename">GENERIC</span> 内核进行少量定制， 在其中添加几个驱动程序和附加选项， 则只要维护相对于 GENERIC 的变化就可以了：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>include GENERIC
ident MYKERNEL

options         IPFIREWALL
options         DUMMYNET
options         IPFIREWALL_DEFAULT_TO_ACCEPT
options         IPDIVERT</pre>
</div>
</div>
<div class="paragraph">
<p>许多系统管理员会发现， 这种方法与先前从头开始写配置文件的方法相比， 可以带开相当多的好处： 本地采用的配置文件只表达与 <span class="filename">GENERIC</span> 内核的差异， 这样， 在升级的时候往往就不需要做任何改动， 而新加入 <span class="filename">GENERIC</span> 的功能就会自动加入到本地的内核， 除非使用 <code>nooptions</code> 或 <code>nodevice</code> 语句将其排除。 这一章余下的部分将着重介绍典型的配置文件， 以及内核选项和设备的作用。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果您需要一份包含所有选项的文件， 例如用于测试目的， 则应以 <code>root</code> 身份执行下列命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /usr/src/sys/i386/conf &amp;&amp; make LINT</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>下面是一个 <span class="filename">GENERIC</span> 内核配置文件的例子， 它包括了一些需要解释的注释。 这个例子应该和您复制的 <span class="filename">/usr/src/sys/i386/conf/GENERIC</span> 非常接近。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>machine		i386</pre>
</div>
</div>
<div class="paragraph">
<p>这是机器的架构， 它只能是 <code>amd64</code>, <code>i386</code>, <code>ia64</code>, <code>pc98</code>, <code>powerpc</code>, 或 <code>sparc64</code> 中的一种。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>cpu          I486_CPU
cpu          I586_CPU
cpu          I686_CPU</pre>
</div>
</div>
<div class="paragraph">
<p>上面的选项指定了您系统中所使用的 CPU 类型。 您可以使用多个 CPU 类型 (例如， 您不确定是应该指定 <code>I586_CPU</code> 或 <code>I686_CPU</code>)。 然而对于定制的内核， 最好能够只指定您使用的那种 CPU。 如果您对于自己使用的 CPU 类型没有把握， 可以通过查看 <span class="filename">/var/run/dmesg.boot</span> 中的启动信息来了解。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ident          GENERIC</pre>
</div>
</div>
<div class="paragraph">
<p>这是内核的名字。 您应该取一个自己的名字， 例如取名叫 <code>MYKERNEL</code>， 如果您一直在按照前面的说明做的话。 您放在 <code>ident</code> 后面的字符串在启动内核时会显示出来， 因此如果希望能够容易区分常用的内核和刚刚定制的内核， 就应该采取不同的名字 (例如， 您想定制一个试验性的内核)。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#To statically compile in device wiring instead of /boot/device.hints
#hints          &#34;GENERIC.hints&#34;         # Default places to look for devices.</pre>
</div>
</div>
<div class="paragraph">
<p>man:device.hints[5] 可以用来配置设备驱动选项。 在启动的时候 man:loader[8] 将会检查缺省位置 <span class="filename">/boot/devicehints</span>。 使用 <code>hints</code> 选项您就可以把这些 hints 静态编译进内核。 这样就没有必要在 <span class="filename">/boot</span>下创建<span class="filename">devicehints</span>。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>makeoptions     DEBUG=-g          # Build kernel with gdb(1) debug symbols</pre>
</div>
</div>
<div class="paragraph">
<p>一般的 FreeBSD 联编过程， 在所联编的内核指定了 <code>-g</code> 选项时， 由于此选项将传递给 man:gcc[1] 表示加入调试信息， 因此会将调试符号也包含进来。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          SCHED_ULE         # ULE scheduler</pre>
</div>
</div>
<div class="paragraph">
<p>这是 FreeBSD 上使用的默认系统调度器。 请保留此选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          PREEMPTION         # Enable kernel thread preemption</pre>
</div>
</div>
<div class="paragraph">
<p>允许内核线程根据优先级的抢占调度。 这有助于改善交互性， 并可以让中断线程更早地执行， 而无须等待。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          INET              # InterNETworking</pre>
</div>
</div>
<div class="paragraph">
<p>网络支持，即使您不打算连网，也请保留它，大部分的程序至少需要回环网络（就是和本机进行网络连接），所以强烈要求保留它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          INET6             # IPv6 communications protocols</pre>
</div>
</div>
<div class="paragraph">
<p>这将打开IPv6连接协议。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          FFS               # Berkeley Fast Filesystem</pre>
</div>
</div>
<div class="paragraph">
<p>这是最基本的硬盘文件系统，如果打算从本地硬盘启动，请保留它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          SOFTUPDATES       # Enable FFS Soft Updates support</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项会启用内核中的 Soft Updates 支持， 它会显著地提高磁盘的写入速度。 尽管这项功能是由内核直接提供的， 但仍然需要在每个磁盘上启用它。 请检查 man:mount[8] 的输出， 以了解您系统中的磁盘上是否已经启用了 Soft Updates。 如果没有看到 <code>soft-updates</code> 选项， 则需要使用 man:tunefs[8] (对于暨存系统) 或 man:newfs[8] (对于新系统) 命令来激活它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          UFS_ACL           # Support for access control lists</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项将启用内核中的访问控制表的支持。 这依赖于扩展属性以及 UFS2， 以及在 crossref:security[fs-acl,文件系统访问控制表] 中所介绍的那些特性。 ACL 默认是启用的， 并且如果已经在文件系统上使用了这一特性， 就不应再关掉它， 因为这会去掉文件的访问控制表， 并以不可预期的方式改变受保护的文件的访问方式。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          UFS_DIRHASH       # Improve performance on big directories</pre>
</div>
</div>
<div class="paragraph">
<p>通过使用额外的内存，这个选项可以加速在大目录上的磁盘操作。 您应该在大型服务器和频繁使用的工作站上打开这个选项，而在磁盘操作不是很重要的 小型系统上关闭它，比如防火墙。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          MD_ROOT           # MD is a potential root device</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项将打开以基于内存的虚拟磁盘作为根设备的支持。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          NFSCLIENT         # Network Filesystem Client
options          NFSSERVER         # Network Filesystem Server
options          NFS_ROOT          # NFS usable as /, requires NFSCLIENT</pre>
</div>
</div>
<div class="paragraph">
<p>网络文件系统。 如果您不打算通过 TCP/IP 挂接 UNIX® 文件服务器的分区， 就可以注释掉它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          MSDOSFS           # MSDOS Filesystem</pre>
</div>
</div>
<div class="paragraph">
<p>MS-DOS® 文件系统。 只要您不打算在启动时挂接由 DOS 格式化的硬盘分区， 就可以把它注释掉。 如前面所介绍的那样， 在您第一次挂接 DOS 分区时， 内核会自动加载需要的模块。 此外， package:emulators/mtools[] 软件提供了一个很方便的功能， 通过它您可以直接访问 DOS 软盘而无需挂接或卸下它们 (而且也完全不需要 <code>MSDOSFS</code>)。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          CD9660            # ISO 9660 Filesystem</pre>
</div>
</div>
<div class="paragraph">
<p>用于 CDROM 的 ISO 9660 文件系统。 如果没有 CDROM 驱动器或很少挂接光盘数据 (因为在首次使用数据 CD 时会自动加载)， 就可以把它注释掉。 音乐 CD 并不需要这个选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          PROCFS            # Process filesystem (requires PSEUDOFS)</pre>
</div>
</div>
<div class="paragraph">
<p>进程文件系统。 这是一个挂接在 <span class="filename">/proc</span> 的一个 &#34;假扮的&#34; 文件系统， 其作用是允许类似 man:ps[1] 这样的程序给出正在运行的进程的进一步信息。 多数情况下， 并不需要使用 <code>PROCFS</code>， 因为绝大多数调试和监控工具， 已经进行了一系列修改， 使之不再依赖 <code>PROCFS</code>： 默认安装的系统中并不会挂接这一文件系统。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          PSEUDOFS          # Pseudo-filesystem framework</pre>
</div>
</div>
<div class="paragraph">
<p>如果希望使用 <code>PROCFS</code>， 就必须加入 <code>PSEUDOFS</code> 的支持。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          GEOM_GPT          # GUID Partition Tables.</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项提供了在磁盘上使用大量的分区的能力。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          COMPAT_43         # Compatible with BSD 4.3 [KEEP THIS!]</pre>
</div>
</div>
<div class="paragraph">
<p>使系统兼容4.3BSD。不要去掉这一行，不然有些程序将无法正常运行。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          COMPAT_FREEBSD4   # Compatible with FreeBSD4</pre>
</div>
</div>
<div class="paragraph">
<p>如果希望支持在旧版 FreeBSD 上编译的使用旧式接口的应用程序， 就需要加入这一选项。 一般来说， 推荐在所有的 i386™ 系统上启用这个选项， 因为难免可能会用到一些旧的应用； 到 5.X 才开始支持的平台， 如 ia64 和 sparc64， 则不需要这个选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          COMPAT_FREEBSD5   # Compatible with FreeBSD5</pre>
</div>
</div>
<div class="paragraph">
<p>如果希望支持在 FreeBSD 5.X 版本上编译， 且使用 FreeBSD 5.X 系统调用接口的应用程序， 则应加上这个选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          COMPAT_FREEBSD6   # Compatible with FreeBSD6</pre>
</div>
</div>
<div class="paragraph">
<p>如果希望支持在 FreeBSD 6.X 版本上编译， 且使用 FreeBSD 6.X 系统调用接口的应用程序， 则应加上这个选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          COMPAT_FREEBSD7   # Compatible with FreeBSD7</pre>
</div>
</div>
<div class="paragraph">
<p>如果希望支持在 FreeBSD 8 以上版本的操作系统中运行在 FreeBSD 7.X 版本上编译， 且使用 FreeBSD 7.X 系统调用接口的应用程序， 则应加上这个选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          SCSI_DELAY=5000  # Delay (in ms) before probing SCSI</pre>
</div>
</div>
<div class="paragraph">
<p>这将让内核在探测每个 SCSI 设备之前等待 5 秒。 如果您只有 IDE 硬盘驱动器， 就可以不管它， 反之您可能会希望尝试降低这个数值以加速启动过程。 当然， 如果您这么做之后 FreeBSD 在识别您的 SCSI 设备时遇到问题， 则您还需要再把它改回去。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          KTRACE            # ktrace(1) support</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项打开内核进程跟踪，在调试时很有用。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          SYSVSHM           # SYSV-style shared memory</pre>
</div>
</div>
<div class="paragraph">
<p>提供System V共享内存(SHM)的支持，最常用到SHM的应该是X Window的XSHM延伸， 不少绘图相关程序会自动使用SHM来提供额外的速度。如果您要使用X Window，您最好加入这个选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          SYSVMSG           # SYSV-style message queues</pre>
</div>
</div>
<div class="paragraph">
<p>支持 System V 消息。 这只会在内核中增加数百字节的空间占用。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          SYSVSEM           # SYSV-style semaphores</pre>
</div>
</div>
<div class="paragraph">
<p>支持System V 信号量， 不常用到， 但只在kernel中占用几百个字节的空间。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>man:ipcs[1] 命令的 <code>-p</code> 选项可以显示出任何用到这些 System V 机制的进程。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options 	     _KPOSIX_PRIORITY_SCHEDULING # POSIX P1003_1B real-time extensions</pre>
</div>
</div>
<div class="paragraph">
<p>在 1993 年 POSIX® 添加的实时扩展。 在 Ports Collection 中某些应用程序会用到这些 （比如StarOffice™）。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          KBD_INSTALL_CDEV  # install a CDEV entry in /dev</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项是在 <span class="filename">/dev</span>下建立键盘设备节点必需的。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options          ADAPTIVE_GIANT    # Giant mutex is adaptive.</pre>
</div>
</div>
<div class="paragraph">
<p>内核全局锁 (Giant) 是一种互斥机制 (休眠互斥体) 的名字， 它用于保护许多内核资源。 现在， 这已经成为了一种无法接受的性能瓶颈， 它已经被越来越多地使用保护单个资源的锁代替。 <code>ADAPTIVE_GIANT</code> 选项将使得内核全局锁作为一种自适应自旋锁。 这意味着， 当有线程希望锁住内核全局锁互斥体， 但互斥体已经被另一个 CPU 上的线程锁住的时候， 它将继续运行， 直到那个线程释放锁为止。 一般情况下， 另一个线程将进入休眠状态并等待下一次调度。 如果您不确定是否应该这样做的话， 一般应该打开它。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>请注意在 FreeBSD 8.0-RELEASE 及以后的版本，所有的互斥体默认都是自适应的， 除非在编译时使用 <code>NO_ADAPTIVE_MUTEXES</code> 选项， 明确的指定为非自适应。因此，内核全局锁（Giant）目前默认也是自适应的, 而且 <code>ADAPTIVE_GIANT</code> 选项已经从内核配置文件中移出。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          apic               # I/O APIC</pre>
</div>
</div>
<div class="paragraph">
<p>apic 设备将启用使用 I/O APIC 作为中断发送设备的能力。 apic 设备可以被 UP 和 SMP 内核使用， 但 SMP 内核必须使用它。 要支持多处理器， 还需要加上 <code>options SMP</code>。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>只有在 i386 和 amd64 平台上才存在 apic 设备， 在其他硬件平台上不应使用它。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          eisa</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的主机板上有EISA总线，加入这个设置。使用这个选项可以自动扫描并设置所有连接在EISA总线上的设备。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          pci</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的主板有PCI总线，就加入这个选项。使用这个选项可以自动扫描PCI卡，并在PCI到ISA之间建立通路。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Floppy drives
device          fdc</pre>
</div>
</div>
<div class="paragraph">
<p>这是软驱控制器。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># ATA and ATAPI devices
device          ata</pre>
</div>
</div>
<div class="paragraph">
<p>这个驱动器支持所有ATA和ATAPI设备。您只要在内核中加入<code>device ata</code>选项， 就可以让内核支持现代计算机上的所有PCI ATA/ATAPI设备。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          atadisk                 # ATA disk drives</pre>
</div>
</div>
<div class="paragraph">
<p>这个是使用 ATAPI 硬盘驱动器时必须加入的选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          ataraid                 # ATA RAID drives</pre>
</div>
</div>
<div class="paragraph">
<p>这个选项需要 <code>device ata</code>， 它用于 ATA RAID 驱动。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          atapicd                 # ATAPI CDROM drives</pre>
</div>
</div>
<div class="paragraph">
<p>这个是ATAPI CDROM驱动器所必须的。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          atapifd                 # ATAPI floppy drives</pre>
</div>
</div>
<div class="paragraph">
<p>这个是ATAPI 软盘驱动器所必须的。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          atapist                 # ATAPI tape drives</pre>
</div>
</div>
<div class="paragraph">
<p>这个是ATAPI 磁带机驱动器所必须的.</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options         ATA_STATIC_ID           # Static device numbering</pre>
</div>
</div>
<div class="paragraph">
<p>这指定对控制器使用其静态的编号； 如果没有这个选项， 则会动态地分配设备的编号。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># SCSI Controllers
device          ahb        # EISA AHA1742 family
device          ahc        # AHA2940 and onboard AIC7xxx devices
options         AHC_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~128k to driver.
device          ahd        # AHA39320/29320 and onboard AIC79xx devices
options         AHD_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~215k to driver.
device          amd        # AMD 53C974 (Teckram DC-390(T))
device          isp        # Qlogic family
#device         ispfw      # Firmware for QLogic HBAs- normally a module
device          mpt        # LSI-Logic MPT-Fusion
#device         ncr        # NCR/Symbios Logic
device          sym        # NCR/Symbios Logic (newer chipsets + those of `ncr&#39;)
device          trm        # Tekram DC395U/UW/F DC315U adapters

device          adv        # Advansys SCSI adapters
device          adw        # Advansys wide SCSI adapters
device          aha        # Adaptec 154x SCSI adapters
device          aic        # Adaptec 15[012]x SCSI adapters, AIC-6[23]60.
device          bt         # Buslogic/Mylex MultiMaster SCSI adapters

device          ncv        # NCR 53C500
device          nsp        # Workbit Ninja SCSI-3
device          stg        # TMC 18C30/18C50</pre>
</div>
</div>
<div class="paragraph">
<p>SCSI控制器。可以注释掉您系统中没有的设备。 如果您只有IDE设备，您可以把这些一起删掉。 <code>*_REG_PRETTY_PRINT</code> 这样的配置， 则是对应驱动程序的调试选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># SCSI peripherals
device          scbus      # SCSI bus (required for SCSI)
device          ch         # SCSI media changers
device          da         # Direct Access (disks)
device          sa         # Sequential Access (tape etc)
device          cd         # CD
device          pass       # Passthrough device (direct SCSI access)
device          ses        # SCSI Environmental Services (and SAF-TE)</pre>
</div>
</div>
<div class="paragraph">
<p>SSCSI外围设备。也可以像上面一样操作。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>目前系统提供的 USB man:umass[4] 以及少量其它驱动使用了 SCSI 子系统， 尽管它们并不是真的 SCSI 设备。 因此， 如果在内核配置使用了这类驱动程序， 请务必不要删除 SCSI 支持。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># RAID controllers interfaced to the SCSI subsystem
device          amr        # AMI MegaRAID
device          arcmsr     # Areca SATA II RAID
device          asr        # DPT SmartRAID V, VI and Adaptec SCSI RAID
device          ciss       # Compaq Smart RAID 5*
device          dpt        # DPT Smartcache III, IV - See NOTES for options
device          hptmv      # Highpoint RocketRAID 182x
device          rr232x     # Highpoint RocketRAID 232x
device          iir        # Intel Integrated RAID
device          ips        # IBM (Adaptec) ServeRAID
device          mly        # Mylex AcceleRAID/eXtremeRAID
device          twa        # 3ware 9000 series PATA/SATA RAID

# RAID controllers
device          aac        # Adaptec FSA RAID
device          aacp       # SCSI passthrough for aac (requires CAM)
device          ida        # Compaq Smart RAID
device          mfi        # LSI MegaRAID SAS
device          mlx        # Mylex DAC960 family
device          pst        # Promise Supertrak SX6000
device          twe        # 3ware ATA RAID</pre>
</div>
</div>
<div class="paragraph">
<p>支持RAID控制器。如果您没有这些，可以把它们注释掉或是删掉。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># atkbdc0 controls both the keyboard and the PS/2 mouse
device          atkbdc     # AT keyboard controller</pre>
</div>
</div>
<div class="paragraph">
<p>键盘控制器（<code>atkbdc</code>）提供AT键盘输入以及PS/2指针设备的I/O服务。 键盘驱动程序（<code>atkbd</code>）与PS/2鼠标驱动程序（<code>psm</code>）需要这个控制器，所以不要删除它。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          atkbd      # AT keyboard</pre>
</div>
</div>
<div class="paragraph">
<p><code>atkbd</code>驱动程序，与<code>atkbdc</code>控制器一起使用， 提供连接到AT键盘控制器的AT 84键盘与AT加强型键盘的访问服务。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          psm        # PS/2 mouse</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的鼠标连接到PS/2鼠标端口，就使用这个设备驱动程序。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          kbdmux        # keyboard multiplexer</pre>
</div>
</div>
<div class="paragraph">
<p>针对键盘多路选择器的基本支持。 如果您不打算使用多个键盘， 则可以放心地删除这一行。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          vga        # VGA video card driver</pre>
</div>
</div>
<div class="paragraph">
<p>显卡驱动。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          splash     # Splash screen and screen saver support</pre>
</div>
</div>
<div class="paragraph">
<p>启动时的 splash 画面！ 屏幕保护程序也需要这一选项。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># syscons is the default console driver, resembling an SCO console
device          sc</pre>
</div>
</div>
<div class="paragraph">
<p><code>sc</code> 是默认的控制台驱动程序， 类似 SCO 控制台。 由于绝大部分全屏幕程序都通过类似 <span class="filename">termcap</span> 这样的终端数据库函数库赖访问控制台， 因此无论您使用这个或与 <code>VT220</code> 兼容的 <code>vt</code> 都没有什么关系。 如果您在运行这种控制台时使用全屏幕程序时发生问题， 请在登录之后将 <code>TERM</code> 变量设置为 <code>scoansi</code>。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Enable this for the pcvt (VT220 compatible) console driver
#device          vt
#options         XSERVER          # support for X server on a vt console
#options         FAT_CURSOR       # start with block cursor</pre>
</div>
</div>
<div class="paragraph">
<p>这是一个兼容 VT220 的控制台驱动， 它同时能够向下兼容 VT100/102。 在同 <code>sc</code> 硬件不兼容的一些笔记本上它能够运行的很好。 当然， 登录系统时请把 <code>TERM</code> 变量设置为 <code>vt100</code> 或 <code>vt220</code>。 此驱动在连接网络上大量不同的机器时也被证明非常有用， 因为此时 <span class="filename">termcap</span> 或 <span class="filename">terminfo</span> 通常没有可用的 <code>sc</code> 设备 - 而 <code>vt100</code> 则几乎每种平台都支持。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          agp</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的机器使用 AGP 卡， 请把上面一行加入配置。 这将启用 AGP， 以及某些卡上的 AGP GART 支持。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># 电源管理支持 (参见 NOTES 了解更多选项)
#device          apm</pre>
</div>
</div>
<div class="paragraph">
<p>高级电源管理支持。对笔记本有用，不过在 <span class="filename">GENERIC</span> 里默认禁用。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># 增加 i8254 的 挂起/恢复 支持。
device           pmtimer</pre>
</div>
</div>
<div class="paragraph">
<p>用于电源管理事件， 例如 APM 和 ACPI 的时钟设备驱动。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># PCCARD (PCMCIA) support
# PCMCIA and cardbus bridge support
device          cbb               # cardbus (yenta) bridge
device          pccard            # PC Card (16-bit) bus
device          cardbus           # CardBus (32-bit) bus</pre>
</div>
</div>
<div class="paragraph">
<p>PCMCIA支持。如果您使用膝上型计算机，您需要这个。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Serial (COM) ports
device          sio               # 8250, 16[45]50 based serial ports</pre>
</div>
</div>
<div class="paragraph">
<p>这些串口在 MS-DOS®/Windows® 的世界中称为 <span class="filename">COM</span> 口。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果使用内置式的调制解调器， 并占用 <span class="filename">COM4</span> 而您另有一个串口在 <span class="filename">COM2</span>， 则必须把调制解调器的 IRQ 改为 2 (由于晦涩的技术原因， IRQ2 = IRQ 9) 才能够在 FreeBSD 中访问它。 如果有多口的串口卡， 请参考 man:sio[4] 以了解需要在 <span class="filename">/boot/device.hints</span> 中进行的设置。 某些显卡 (特别是基于 S3 芯片的卡) 使用形如 <code>0x*2e8</code> 的 IO 地址， 而许多廉价的串口卡不能够正确地对 16-位 IO 地址空间进行解码， 因此它们会产生冲突， 并造成 <span class="filename">COM4</span> 实际上无法使用。</p>
</div>
<div class="paragraph">
<p>每一个串口都需要有一个唯一的 IRQ (除非您使用支持中断分享的串口卡)， 因此默认的 <span class="filename">COM3</span> 和 <span class="filename">COM4</span> IRQ 是不能使用的。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Parallel port
device          ppc</pre>
</div>
</div>
<div class="paragraph">
<p>ISA-bus并行接口。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          ppbus      # Parallel port bus (required)</pre>
</div>
</div>
<div class="paragraph">
<p>提供并行总线的支持。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          lpt        # Printer</pre>
</div>
</div>
<div class="paragraph">
<p>提供并口打印机的支持。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>要使用并口打印机，就必须同时加入上面三行设置。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          plip       # TCP/IP over parallel</pre>
</div>
</div>
<div class="paragraph">
<p>这是针对并行网络接口的驱动器。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          ppi        # Parallel port interface device</pre>
</div>
</div>
<div class="paragraph">
<p>普通用途的I/O (&#34;geek port&#34;) + IEEE1284 I/O.</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#device         vpo        # Requires scbus and da</pre>
</div>
</div>
<div class="paragraph">
<p>这是针对Iomega Zip驱动器的。它要求<code>scbus</code>和<code>da</code>的支持。 最好的执行效果是工作在EPP 1.9模式。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#device         puc</pre>
</div>
</div>
<div class="paragraph">
<p>如果您有由 man:puc[4] 支持的 &#34;哑&#34; 串行或并行 PCI 卡， 则应去掉这一行的注释。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># PCI Ethernet NICs.
device          de         # DEC/Intel DC21x4x (Tulip)
device          em         # Intel PRO/1000 adapter Gigabit Ethernet Card
device          ixgb       # Intel PRO/10GbE Ethernet Card
device          txp        # 3Com 3cR990 (Typhoon)
device          vx         # 3Com 3c590, 3c595 (Vortex)</pre>
</div>
</div>
<div class="paragraph">
<p>多种PCI网卡驱动器。注释或删除您系统中没有的设备.</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># PCI Ethernet NICs that use the common MII bus controller code.
# NOTE: Be sure to keep the &#39;device miibus&#39; line in order to use these NICs!
device          miibus     # MII bus support</pre>
</div>
</div>
<div class="paragraph">
<p>MII总线支持对于一些PCI 10/100 Ethernet NIC来说是必需的。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          bce        # Broadcom BCM5706/BCM5708 Gigabit Ethernet
device          bfe        # Broadcom BCM440x 10/100 Ethernet
device          bge        # Broadcom BCM570xx Gigabit Ethernet
device          dc         # DEC/Intel 21143 and various workalikes
device          fxp        # Intel EtherExpress PRO/100B (82557, 82558)
device          lge        # Level 1 LXT1001 gigabit ethernet
device          msk        # Marvell/SysKonnect Yukon II Gigabit Ethernet
device          nge        # NatSemi DP83820 gigabit ethernet
device          nve        # nVidia nForce MCP on-board Ethernet Networking
device          pcn        # AMD Am79C97x PCI 10/100 (precedence over &#39;lnc&#39;)
device          re         # RealTek 8139C+/8169/8169S/8110S
device          rl         # RealTek 8129/8139
device          sf         # Adaptec AIC-6915 (Starfire)
device          sis        # Silicon Integrated Systems SiS 900/SiS 7016
device          sk         # SysKonnect SK-984x &amp; SK-982x gigabit Ethernet
device          ste        # Sundance ST201 (D-Link DFE-550TX)
device          stge       # Sundance/Tamarack TC9021 gigabit Ethernet
device          ti         # Alteon Networks Tigon I/II gigabit Ethernet
device          tl         # Texas Instruments ThunderLAN
device          tx         # SMC EtherPower II (83c170 EPIC)
device          vge        # VIA VT612x gigabit ethernet
device          vr         # VIA Rhine, Rhine II
device          wb         # Winbond W89C840F
device          xl         # 3Com 3c90x (Boomerang, Cyclone)</pre>
</div>
</div>
<div class="paragraph">
<p>使用MII总线控制器代码的驱动器。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># ISA Ethernet NICs.  pccard NICs included.
device          cs         # Crystal Semiconductor CS89x0 NIC
# &#39;device ed&#39; requires &#39;device miibus&#39;
device          ed         # NE[12]000, SMC Ultra, 3c503, DS8390 cards
device          ex         # Intel EtherExpress Pro/10 and Pro/10+
device          ep         # Etherlink III based cards
device          fe         # Fujitsu MB8696x based cards
device          ie         # EtherExpress 8/16, 3C507, StarLAN 10 etc.
device          lnc        # NE2100, NE32-VL Lance Ethernet cards
device          sn         # SMC&#39;s 9000 series of Ethernet chips
device          xe         # Xircom pccard Ethernet

# ISA devices that use the old ISA shims
#device         le</pre>
</div>
</div>
<div class="paragraph">
<p>ISA 以太网卡驱动。 参见 <span class="filename">/usr/src/sys/i386/conf/NOTES</span> 以了解关于哪个驱动程序能够驱动您的网卡的细节。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Wireless NIC cards
device          wlan            # 802.11 support</pre>
</div>
</div>
<div class="paragraph">
<p>通用 802.11 支持。 这行配置是无线网络所必需的。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          wlan_wep        # 802.11 WEP support
device          wlan_ccmp       # 802.11 CCMP support
device          wlan_tkip       # 802.11 TKIP support</pre>
</div>
</div>
<div class="paragraph">
<p>针对 802.11 设备的加密支持。 如果希望使用加密和 802.11i 安全协议， 就需要这些配置行。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device          an         # Aironet 4500/4800 802.11 wireless NICs.
device          ath             # Atheros pci/cardbus NIC&#39;s
device          ath_hal         # Atheros HAL (Hardware Access Layer)
device          ath_rate_sample # SampleRate tx rate control for ath
device          awi        # BayStack 660 and others
device          ral        # Ralink Technology RT2500 wireless NICs.
device          wi         # WaveLAN/Intersil/Symbol 802.11 wireless NICs.
#device         wl         # Older non 802.11 Wavelan wireless NIC.</pre>
</div>
</div>
<div class="paragraph">
<p>用以支持多种无线网卡。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Pseudo devices
device   loop          # Network loopback</pre>
</div>
</div>
<div class="paragraph">
<p>这是 TCP/IP 的通用回环设备。 如果您 telnet 或 FTP 到 <code>localhost</code> (也就是 <code>127.0.0.1</code>) 则将通过这个设备回到本机。 这个设备是 <em>必需的</em>。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   random        # Entropy device</pre>
</div>
</div>
<div class="paragraph">
<p>Cryptographically secure random number generator.</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   ether         # Ethernet support</pre>
</div>
</div>
<div class="paragraph">
<p><code>ether</code> 只有在使用以太网卡时才需要。 它包含了通用的以太网协议代码。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   sl            # Kernel SLIP</pre>
</div>
</div>
<div class="paragraph">
<p><code>sl</code> 用以提供 SLIP 支持。 目前它几乎已经完全被 PPP 取代了， 因为后者更容易配置， 而且更适合调制解调器之间的连接， 并提供了更强大的功能。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   ppp           # Kernel PPP</pre>
</div>
</div>
<div class="paragraph">
<p>这一选项用以提供内核级的 PPP 支持， 用于拨号连接。 也有以用户模式运行的 PPP 实现， 使用 <code>tun</code> 并提供包括按需拨号在内的更为灵活的功能。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   tun           # Packet tunnel.</pre>
</div>
</div>
<div class="paragraph">
<p>它会被用户模式的 PPP 软件用到。 参考本书的 crossref:ppp-and-slip[userppp,PPP] 以了解更多的细节。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   pty           # Pseudo-ttys (telnet etc)</pre>
</div>
</div>
<div class="paragraph">
<p>这是一个 &#34;pseudo-terminal&#34; 或模拟登入端口。 它用来接收连入的 <code>telnet</code> 以及 <code>rlogin</code> 会话、 xterm， 以及一些其它程序如 Emacs 等。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   md            # Memory disks</pre>
</div>
</div>
<div class="paragraph">
<p>内存盘伪设备。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   gif           # IPv6 and IPv4 tunneling</pre>
</div>
</div>
<div class="paragraph">
<p>它实现了在 IPv4 上的 IPv6 隧道、 IPv6 上的 IPv4 隧道、 IPv4 上的 IPv4 隧道、 以及IPv6 上的 IPv6隧道。 <code>gif</code> 设备是 &#34;自动克隆&#34; 的， 它会根据需要自动创建设备节点。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device   faith         # IPv6-to-IPv4 relaying (translation)</pre>
</div>
</div>
<div class="paragraph">
<p>这个伪设备能捕捉发给它的数据包，并把它们转发给 IPv4/IPv6 翻译服务程序。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># The `bpf&#39; device enables the Berkeley Packet Filter.
# Be aware of the administrative consequences of enabling this!
# Note that &#39;bpf&#39; is required for DHCP.
device   bpf           # Berkeley packet filter</pre>
</div>
</div>
<div class="paragraph">
<p>这是 Berkeley 包过滤器。这个伪设备允许网络接口被置于混杂模式， 从而，截获广播网 (例如，以太网) 上的每一个数据包。 截获的数据报可以保存到磁盘上，也可以使用 man:tcpdump[1] 程序来分析。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>man:bpf[4] 设备也被用于 man:dhclient[8] 来获取默认路由器(网关)的 IP 地址。如果使用DHCP，就不要注释掉这行。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># USB support
device          uhci          # UHCI PCI-&gt;USB interface
device          ohci          # OHCI PCI-&gt;USB interface
device          ehci          # EHCI PCI-&gt;USB interface (USB 2.0)
device          usb           # USB Bus (required)
#device         udbp          # USB Double Bulk Pipe devices
device          ugen          # Generic
device          uhid          # Human Interface Devices
device          ukbd          # Keyboard
device          ulpt          # Printer
device          umass         # Disks/Mass storage - Requires scbus and da
device          ums           # Mouse
device          ural          # Ralink Technology RT2500USB wireless NICs
device          urio          # Diamond Rio 500 MP3 player
device          uscanner      # Scanners
# USB Ethernet, requires mii
device          aue           # ADMtek USB Ethernet
device          axe           # ASIX Electronics USB Ethernet
device          cdce          # Generic USB over Ethernet
device          cue           # CATC USB Ethernet
device          kue           # Kawasaki LSI USB Ethernet
device          rue           # RealTek RTL8150 USB Ethernet</pre>
</div>
</div>
<div class="paragraph">
<p>支持各类 USB 设备。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># FireWire support
device          firewire      # FireWire bus code
device          sbp           # SCSI over FireWire (Requires scbus and da)
device          fwe           # Ethernet over FireWire (non-standard!)</pre>
</div>
</div>
<div class="paragraph">
<p>支持各类火线设备。</p>
</div>
<div class="paragraph">
<p>要了解 FreeBSD 所支持的设备的其他情况， 请参考 <span class="filename">/usr/src/sys/i386/conf/NOTES</span>。</p>
</div>
<div class="sect2">
<h3 id="_大内存支持pae">6.1. 大内存支持(PAE)<a class="anchor" href="#_大内存支持pae"></a></h3>
<div class="paragraph">
<p>大内存配置的机器需要超过４GB的虚拟地址。 因为4GB的限制，Intel在Pentium®及后续的CPUs上增加了36位物理地址的支持。</p>
</div>
<div class="paragraph">
<p>物理地址扩展 (PAE) 是 Intel® Pentium® Pro和后续的 CPU 提供的一种允许将内存地址扩展到 64GB 的功能， FreeBSD 的所有最新版本均支持此功能， 并通过 <code>PAE</code> 选项来启用这个能力。 因为Intel架构的限制， 高于或低于 4GB 都没有什么区别， 超过 4GB 的内存分配只是简单地添加到可用内存池中。</p>
</div>
<div class="paragraph">
<p>为了让内核支持PAE，只要增加下面这一行到配置文件：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options		    PAE</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>PAE在FreeBSD里面现在只能支持 Intel® IA-32处理器。 同时，还应该注意，FreeBSD的PAE支持没有经过广泛的测试， 和其他稳定的特性相比只能当作是beta版。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>PAE在FreeBSD下有如下的一些限制：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>进程不能接触大于4GB的VM空间。</p>
</li>
<li>
<p>没有使用 man:bus_dma[9] 接口的设备驱动程序在打开了 PAE 支持的内核中会导致数据损坏。 因为这个原因， <span class="filename">PAE</span> 内核配置文件 会把所有在打开了 PAE 的内核上不能工作的驱动程序排除在外。</p>
</li>
<li>
<p>一些系统打开了探测系统内存资源使用能力的功能，因为打开了 PAE支持，这些功能可能会被覆盖掉。 其中一个例子就是内核参数<code>kern.maxvnodes</code>，它是控制 内核能使用的最大vnodes数目的，建议重新调整它及其他类似参数到合适的值。</p>
</li>
<li>
<p>为了避免KVA的消耗，很有必要增加系统的内核虚拟地址， 或者减少很耗系统资源的内核选项的总量（看上面）。<code>KVA_PAGES</code>选项 可以用来增加KVA空间。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>为了稳定和高性能，建议查看man:tuning[7]手册页。man:pae[4]手册页包含 FreeBSD’sPAE支持的最新信息。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kernelconfig-trouble">7. 如果出现问题怎么办<a class="anchor" href="#kernelconfig-trouble"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>在定制一个内核时，可能会出现四种问题。它们是：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>config</code>失败：</dt>
<dd>
<p>如果 man:config[8] 在给出您的内核描述时失败， 则可能在某些地方引入了一处小的错误。 幸运的是， man:config[8] 会显示出它遇到问题的行号， 这样您就能够迅速地定位错误。 例如， 如果您看到：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">config: line 17: syntax error</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以通过与 <span class="filename">GENERIC</span> 或其他参考资料对比， 来确定这里的关键词是否拼写正确。</p>
</div>
</dd>
<dt class="hdlist1"><code>make</code>失败：</dt>
<dd>
<p>如果 <code>make</code> 命令失败， 它通常表示内核描述中发生了 man:config[8] 无法找出的的错误。 同样地， 仔细检查您的配置， 如果仍然不能解决问题， 发一封邮件到 <a href="https://lists.FreeBSD.org/subscription/freebsd-questions">FreeBSD 一般问题邮件列表</a> 并附上您的内核配置， 则问题应该很快就能解决。</p>
</dd>
<dt class="hdlist1">内核无法启动：<a id="kernelconfig-noboot"></a></dt>
<dd>
<p>如果您的内核无法启动， 或不识别您的设备， 千万别慌！ 非常幸运的是， FreeBSD 有一个很好的机制帮助您从不兼容的内核恢复。 在 FreeBSD 启动加载器那里简单地选择一下要启动的内核就可以了。 当系统在引导菜单的 10 秒倒计时时进入它， 方法是选择 &#34;Escape to a loader prompt&#34; 选项， 其编号为 6。 输入 <code>unload kernel</code>， 然后输入 <code>boot /boot/kernel.old/kernel</code>， 或者其他任何一个可以正确引导的内核即可。 当重新配置内核时， 保持一个已经证明能够正常启动的内核永远是一个好习惯。</p>
<div class="paragraph">
<p>当使用好的内核启动之后您可以检查配置文件并重新尝试编译它。 比较有用的资源是 <span class="filename">/var/log/messages</span> 文件， 它会记录每次成功启动所产生的所有内核消息。 此外， man:dmesg[8] 命令也会显示这次启动时产生的内核消息。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果在编译内核时遇到麻烦， 请务必保留一个 <span class="filename">GENERIC</span> 或已知可用的其他内核， 并命名为别的名字以免在下次启动时被覆盖。 不要依赖 <span class="filename">kernel.old</span> 因为在安装新内核时， <span class="filename">kernel.old</span> 会被上次安装的那个可能不正常的内核覆盖掉。 另外， 尽快把可用的内核挪到 <span class="filename">/boot/kernel</span> 否则类似 man:ps[1] 这样的命令可能无法正常工作。 为了完成这一点， 需要修改目录的名字：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># mv /boot/kernel /boot/kernel.bad</span>
<span class="c"># mv /boot/kernel.good /boot/kernel</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">内核工作，但是man:ps[1]根本不工作</dt>
<dd>
<p>如果您安装了一个与系统中内建工具版本不同的内核， 例如在 -STABLE 系统上安装了 -CURRENT 的内核， 许多用于检查系统状态的工具如 man:ps[1] 和 man:vmstat[8] 都将无法正常使用。 您应该 crossref:cutting-edge[makeworld,重新编译一个和内核版本一致的系统]。 这也是为什么一般不鼓励使用与系统其他部分版本不同的内核的一个主要原因。</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>

    </div>
    
    <div class="buttons">
      
      <div class="prev">
        <i class="fa fa-angle-left" aria-hidden="true" title="Prev"></i>
        <div class="container">
          
            <a href=http://127.0.0.1:5500/zh-cn/books/handbook/multimedia class="direction">Prev</a>
          
        </div>
      </div>
      
      <div class="home">
        <i class="fa fa-home" aria-hidden="true" title="Home"></i>
        <div class="container">
          
            <a href="../" class="direction">Home</a>
          
        </div>
      </div>
      
      <div class="next">
        <div class="container">
          
            <a href=http://127.0.0.1:5500/zh-cn/books/handbook/printing  class="direction">Next</a>
          
        </div>
        <i class="fa fa-angle-right" aria-hidden="true" title="Next"></i>
      </div>
      
    </div>
    <label class="hidden book-menu-overlay" for="menu-control"></label>
  </div>
  <aside class="toc">
    <div class="toc-content">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#kernelconfig-synopsis">1. 概述</a></li>
    <li><a href="#kernelconfig-custom-kernel">2. 为什么需要建立定制的内核?</a></li>
    <li><a href="#kernelconfig-devices">3. 发现系统硬件</a></li>
    <li><a href="#kernelconfig-modules">4. 内核驱动，子系统和模块</a></li>
    <li><a href="#kernelconfig-building">5. 建立并安装一个定制的内核</a></li>
    <li><a href="#kernelconfig-config">6. 配置文件</a></li>
    <li><a href="#kernelconfig-trouble">7. 如果出现问题怎么办</a></li>
  </ul>
</nav>
      <hr />
      
    </div>
  </aside>
  <a class="to-top" href="#top">
    <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
  </a>
</main>

    <footer>
  <div class="footer-container">
    <section class="logo-column">
          <img src="/images/FreeBSD-colors.svg" width="160" height="50" alt="FreeBSD logo" />
        <div class="options-container">
          
            <div class="language-container">
              <a id="languages" href="http://127.0.0.1:5500/zh-cn/languages">
                
                <img src="/images/language.png" class="language-image" alt="Choose language">
                <span>简体中文</span>
              </a>
            </div>
          
          <div class="theme-container">
            <select id="theme-chooser">
	      <option value="theme-system">System</option>
              <option value="theme-light">Light</option>
              <option value="theme-dark">Dark</option>
              <option value="theme-high-contrast">High contrast</option>
            </select>
          </div>
        </div>
      </section>
      
      <section class="copyright-column">
        <p>&copy; 1994-2023 The FreeBSD Project. All rights reserved</p>
        <span>Made with <span class="heart">♥</span> by the FreeBSD Community</span>
      </section>
  </div>
</footer>

  </body>
</html>
