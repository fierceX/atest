<!DOCTYPE html>
<html class="theme-light" lang="zh-cn">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=""/>
  <meta name="keywords" content=""/>
  <meta name="copyright" content="1995-2023 The FreeBSD Foundation" />
  <link rel="canonical" href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/" />

  <title>第 27 章 串口通讯 |  FreeBSD Documentation Portal</title>

  <meta name="theme-color" content="#790000">
  <meta name="color-scheme" content="system light dark high-contrast">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles/main.min.css">
    <link rel="stylesheet" href="/css/font-awesome-min.css">
    <script defer src="/js/theme-chooser.min.js"></script>
    <script defer src="/js/copy-clipboard.min.js"></script>
    <script defer src="/js/search.min.js"></script>

  
  
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:domain" content="docs.FreeBSD.org"/>
    <meta name="twitter:site" content="@freebsd"/>
    <meta name="twitter:url" content="https://twitter.com/freebsd"/>
    <meta property="og:title" content="第 27 章 串口通讯" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="http://127.0.0.1:5500favicon.ico"/>
    <meta property="og:image:alt" content="FreeBSD Logo">
    <meta property="og:locale" content="zh-cn" />
    <meta property="og:url" content="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/" />
    <meta property="og:site_name" content="FreeBSD Documentation Portal" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Article",
        "url": "http:\/\/127.0.0.1:5500\/zh-cn\/books\/handbook\/serialcomms\/",
        "name": "FreeBSD Documentation Portal",
        "headline": "FreeBSD Documentation Portal",
        "description": "FreeBSD Documentation Portal"
      }
    </script>
    

  
</head>


  <body>
    <header>
  <div class="header-container">
    <div class="logo-menu-bars-container">
      <a href="http://127.0.0.1:5500" class="logo">
        <img src="/images/FreeBSD-monochromatic.svg" width="160" height="50" alt="FreeBSD logo" />
      </a>
      <label class="menu-bars" for="menu-bars">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </label>
    </div>
    <input id="menu-bars" type="checkbox" />
    
    <div class="search-donate-container">
      
      
    </div>
  </div>
</header>

    
<input type="checkbox" class="hidden toggle" id="menu-control">
<main class="main-wrapper-book">
  <a id="top"></a>
  
  <aside class="book-menu">
    <div class="book-menu-content">
      <input id="search-book" type="text" placeholder="Search" aria-label="Search" maxlength="128" />
      <nav id="MenuContents">
        
  <ul>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ada319c45e780947f82b569049480cc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-8ada319c45e780947f82b569049480cc"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/">
              前言
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-audience">预期的读者</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes-from3">相对于第三版的改动</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes-from2">相对于第二版的改动 (2004)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-changes">相对于第一版的改变 (2001)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-overview">本手册的组织</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-conv">本书中使用的一些约定</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/preface/#preface-acknowledgements">致谢</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-32a83d18a326852a8d9ae2582360bbc8" class="toggle"  />
          <label  for="chapter-32a83d18a326852a8d9ae2582360bbc8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/parti/">
              部分 I. 起步
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a4909db05d872d16d5be86a57cbc2dc7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a4909db05d872d16d5be86a57cbc2dc7"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/">
              第 1 章 介绍
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#introduction-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#nutshell">2. 欢迎来到 FreeBSD 的世界!</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/introduction/#history">3. 关于 FreeBSD 项目</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6655173739803bf0920b92a7fe8a363d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-6655173739803bf0920b92a7fe8a363d"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/">
              第 2 章 安装 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-hardware">2. 硬件需求</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-pre">3. 安装前的准备工作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-start">4. 开始安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#using-sysinstall">5. 介绍 Sysinstall</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-steps">6. 分配磁盘空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-choosing">7. 选择要安装的软件包</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-media">8. 选择您要使用的安装介质</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-final-warning">9. 安装确认</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-post">10. 安装后的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-trouble">11. 常见问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-advanced">12. 高级安装指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/install/#install-diff-media">13. 准备您自己的安装介质</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3c2455cadf89eadd3f6e77461085d5e9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3c2455cadf89eadd3f6e77461085d5e9"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/">
              第 3 章 安装 FreeBSD（适用于 9.x 及以后版本）
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-hardware">2. 硬件需求</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-pre">3. 安装前的准备工作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-start">4. 开始安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#using-bsdinstall">5. 介绍 bsdinstall</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-netinstall">6. 通过网络安装</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-partitioning">7. 分配磁盘空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-final-warning">8. 安装确认</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-post">9. 安装后的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bsdinstall/#bsdinstall-install-trouble">10. 故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-709481b75d22ad36960f7ac166b3306c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-709481b75d22ad36960f7ac166b3306c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/">
              第 4 章 UNIX 基础
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#consoles">2. 虚拟控制台和终端</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#permissions">3. 权限</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#dirstructure">4. 目录架构</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#disk-organization">5. 磁盘组织</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#mount-unmount">6. 文件系统的挂接和卸下</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-processes">7. 进程</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-daemons">8. 守护进程，信号和杀死进程</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#shells">9. Shells</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#editors">10. 文本编辑器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-devices">11. 设备和设备节点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#binary-formats">12. 二进制文件格式</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/basics/#basics-more-information">13. 取得更多的资讯</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-58c050d31a1fbecd859248dacefeb567" class="toggle"  />
          <label  class="icon cursor"  for="chapter-58c050d31a1fbecd859248dacefeb567"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/">
              第 5 章 安装应用程序: Packages 和 Ports
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-overview">2. 软件安装预览</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-finding-applications">3. 寻找您要的应用程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#packages-using">4. 使用 Package 系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-using">5. 使用Ports Collection</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-nextsteps">6. 安装之后还要做点什么？</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ports/#ports-broken">7. 如何处理坏掉的 Ports</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e5a000ce7f50680a180e2c1b83c121bc" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e5a000ce7f50680a180e2c1b83c121bc"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/">
              第 6 章 X Window 系统
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x11-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-understanding">2. 理解 X</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-install">3. 安装 X11</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-config">4. 配置 X11</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-fonts">5. 在 X11 中使用字体</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x-xdm">6. X 显示管理器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/x11/#x11-wm">7. 桌面环境</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-5eb30759c3a2873e716dc31d7760054c" class="toggle"  />
          <label  for="chapter-5eb30759c3a2873e716dc31d7760054c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partii/">
              部分 II. 常见的任务
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-c96504f017c56f4bc7f71548cccf5382" class="toggle"  />
          <label  class="icon cursor"  for="chapter-c96504f017c56f4bc7f71548cccf5382"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/">
              第 7 章 桌面应用
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-browsers">2. 浏览器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-productivity">3. 办公、图象处理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-viewers">4. 文档查看器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-finance">5. 财务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/desktop/#desktop-summary">6. 总结</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-e1898af36aaacc168e13b673d25b908f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-e1898af36aaacc168e13b673d25b908f"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/">
              第 8 章 多媒体
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#multimedia-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#sound-setup">2. 安装声卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#sound-mp3">3. MP3音频</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#video-playback">4. 视频回放</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#tvcard">5. 安装电视卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/multimedia/#scanners">6. 图象扫描仪</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6926664836e63c5cae4b2fa60855f91d" class="toggle"  />
          <label  class="icon cursor"  for="chapter-6926664836e63c5cae4b2fa60855f91d"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/">
              第 9 章 配置FreeBSD的内核
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-custom-kernel">2. 为什么需要建立定制的内核?</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-devices">3. 发现系统硬件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-modules">4. 内核驱动，子系统和模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-building">5. 建立并安装一个定制的内核</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-config">6. 配置文件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/kernelconfig/#kernelconfig-trouble">7. 如果出现问题怎么办</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-19d36bd70a320268f0ea1f66e4f3e224" class="toggle"  />
          <label  class="icon cursor"  for="chapter-19d36bd70a320268f0ea1f66e4f3e224"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/">
              第 10 章 打印
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-intro-spooler">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-intro-setup">3. 基本设置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-advanced">4. 高级设置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-using">5. 使用打印机</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-lpd-alternatives">6. 替换标准后台打印</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/printing/#printing-troubleshooting">7. 疑难问题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79" class="toggle"  />
          <label  class="icon cursor"  for="chapter-a07f539e6c18f2db4da5dbb2b5bb1e79"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/">
              第 11 章 Linux® 二进制兼容模式
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-lbc-install">2. 配置 Linux® 二进制兼容模式</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/linuxemu/#linuxemu-advanced">3. 高级主题</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-51416fdea9d5a1dfa1c2718cd825213a" class="toggle"  />
          <label  for="chapter-51416fdea9d5a1dfa1c2718cd825213a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partiii/">
              部分 III. 系统管理
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-532d0380ba66d66e033765a0b6930ee7" class="toggle"  />
          <label  class="icon cursor"  for="chapter-532d0380ba66d66e033765a0b6930ee7"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/">
              第 12 章 设置和调整
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#config-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-initial">2. 初步配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-core-configuration">3. 核心配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-appconfig">4. 应用程序配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-starting-services">5. 启动服务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-cron">6. 配置 <code>cron</code></a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-rcd">7. 在 FreeBSD 中使用 rc</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#config-network-setup">8. 设置网卡</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-virtual-hosts">9. 虚拟主机</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-configfiles">10. 配置文件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-sysctl">11. 用 sysctl 进行调整</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-disk">12. 调整磁盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#configtuning-kernel-limits">13. 调整内核限制</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#adding-swap-space">14. 添加交换空间</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#acpi-overview">15. 电源和资源管理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/config/#ACPI-debug">16. 使用和调试 FreeBSD ACPI</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-d05f41680fb7e3d68b354ae03de368b1" class="toggle"  />
          <label  class="icon cursor"  for="chapter-d05f41680fb7e3d68b354ae03de368b1"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/">
              第 13 章 FreeBSD 引导过程
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-introduction">2. 引导问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-blocks">3. 引导管理器和各引导阶段</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-kernel">4. 内核在引导时的交互</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#device-hints">5. Device Hints</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-init">6. Init：进程控制及初始化</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/boot/#boot-shutdown">7. 关机 (shutdown) 过程</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-17a53b356b407d9ed656b7babd2efa34" class="toggle"  />
          <label  class="icon cursor"  for="chapter-17a53b356b407d9ed656b7babd2efa34"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/">
              第 14 章 用户和基本的帐户管理
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-introduction">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-superuser">3. 超级用户帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-system">4. 系统帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-user">5. 用户帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-modifying">6. 修改帐户</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-limiting">7. 限制用户使用系统资源</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/users/#users-groups">8. 组</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-513e8e407c57354df334059688e9b60a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-513e8e407c57354df334059688e9b60a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/">
              第 15 章 安全
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-intro">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#securing-freebsd">3. 确保 FreeBSD 的安全</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#crypt">4. DES、 Blowfish、 MD5， 以及 Crypt</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#one-time-passwords">5. 一次性口令</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#tcpwrappers">6. TCP Wrappers</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#kerberos5">7. Kerberos5</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#openssl">8. OpenSSL</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#ipsec">9. IPsec 上的 VPN</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#openssh">10. OpenSSH</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#fs-acl">11. 文件系统访问控制表</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-portaudit">12. 监视第三方安全问题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-advisories">13. FreeBSD 安全公告</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/security/#security-accounting">14. 进程记帐</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0f7d2858504c83a029928c048d394e2a" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0f7d2858504c83a029928c048d394e2a"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/">
              第 16 章 Jails
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-terms">2. 与 Jail 相关的一些术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-intro">3. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-build">4. 建立和控制 jail</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-tuning">5. 微调和管理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/jails/#jails-application">6. Jail 的应用</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-15be125ce5997f51c5499e3a0dee6c2c" class="toggle"  />
          <label  class="icon cursor"  for="chapter-15be125ce5997f51c5499e3a0dee6c2c"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/">
              第 17 章 强制访问控制
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-synopsis">1. 概要</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-inline-glossary">2. 本章出现的重要术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-initial">3. 关于 MAC 的说明</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-understandlabel">4. 理解 MAC 标签</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-planning">5. 规划安全配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-modules">6. 模块配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-seeotheruids">7. MAC seeotheruids 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-bsdextended">8. MAC bsdextended 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-ifoff">9. MAC ifoff 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-portacl">10. MAC portacl 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-partition">11. MAC partition (分区) 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-mls">12. MAC 多级 (Multi-Level) 安全模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-biba">13. MAC Biba 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-lomac">14. MAC LOMAC 模块</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-implementing">15. MAC Jail 中的 Nagios</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-userlocked">16. User Lock Down</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mac/#mac-troubleshoot">17. MAC 框架的故障排除</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3f7e8d763b17c7d0c44c60505cf0feea" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3f7e8d763b17c7d0c44c60505cf0feea"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/">
              第 18 章 安全事件审计
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-inline-glossary">2. 本章中的一些关键术语</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-install">3. 安装审计支持</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-config">4. 对审计进行配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/audit/#audit-administration">5. 管理审计子系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7bb1cb2287cd08a3672cc878e604f0d0" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7bb1cb2287cd08a3672cc878e604f0d0"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/">
              第 19 章 存储
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-naming">2. 设备命名</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-adding">3. 添加磁盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#raid">4. RAID</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#usb-disks">5. USB 存储设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#creating-cds">6. 创建和使用光学介质(CD)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#creating-dvds">7. 创建和使用光学介质(DVD)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#floppies">8. 创建和使用软盘</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backups-tapebackups">9. 用磁带机备份</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backups-floppybackups">10. 用软盘备份</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backup-strategies">11. 备份策略</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#backup-basics">12. 备份程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-virtual">13. 网络、内存和 和以及映像文件为介质的虚拟文件系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#snapshots">14. 文件系统快照</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#quotas">15. 文件系统配额</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-encrypting">16. 加密磁盘分区</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#swap-encrypting">17. 对交换区进行加密</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/disks/#disks-hast">18. 高可用性存储 (HAST)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-dec5fc4f0100e5030db0fb188d8d4b2f" class="toggle"  />
          <label  class="icon cursor"  for="chapter-dec5fc4f0100e5030db0fb188d8d4b2f"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/">
              第 20 章 GEOM: 模块化磁盘变换框架
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-intro">2. GEOM 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-striping">3. RAID0 - 条带</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-mirror">4. RAID1 - 镜像</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#GEOM-raid3">5. RAID3 - 使用专用校验设备的字节级条带</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-ggate">6. GEOM Gate 网络设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-glabel">7. 为磁盘设备添加卷标</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/geom/#geom-gjournal">8. 通过 GEOM 实现 UFS 日志</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-4c6bf6828e601b79edb2813329ac6604" class="toggle"  />
          <label  class="icon cursor"  for="chapter-4c6bf6828e601b79edb2813329ac6604"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/">
              第 21 章 文件系统 Support
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/#filesystems-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/filesystems/#filesystems-zfs">2. Z 文件系统 (ZFS)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-11d260f2685c0b17137e64887e1b1989" class="toggle"  />
          <label  class="icon cursor"  for="chapter-11d260f2685c0b17137e64887e1b1989"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/">
              第 22 章 Vinum 卷管理程序
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-intro">2. 磁盘容量太小</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-access-bottlenecks">3. 访问瓶颈</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-data-integrity">4. 数据的完整性</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-objects">5. Vinum 目标</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-examples">6. 一些例子</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-object-naming">7. 对象命名</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-config">8. 配置 Vinum</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/vinum/#vinum-root">9. 使用 Vinum 作为根文件系统</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-ae23289d4b6415f3f878893f9d3ef9b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-ae23289d4b6415f3f878893f9d3ef9b8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/">
              第 23 章 虚拟化
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-guest">2. 作为客户 OS 的 FreeBSD</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/virtualization/#virtualization-host">3. 作为宿主 OS 的 FreeBSD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-b279d2b738963a45a059268d2fae00d5" class="toggle"  />
          <label  class="icon cursor"  for="chapter-b279d2b738963a45a059268d2fae00d5"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/">
              第 24 章 本地化－I18N/L10N使用和设置
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-basics">2. 基础知识</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#using-localization">3. 使用本地化语言</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#l10n-compiling">4. 编译I18N程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/l10n/#lang-setup">5. 本地化FreeBSD</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9e3f99bd76c861ab2e9a5f31ac421842" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9e3f99bd76c861ab2e9a5f31ac421842"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/">
              第 25 章 更新与升级 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-freebsdupdate">2. FreeBSD 更新</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-portsnap">3. Portsnap： 一个 Ports Collection 更新工具</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#updating-upgrading-documentation">4. 更新系统附带的文档</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#current-stable">5. 追踪开发分支</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#synching">6. 同步您的源码</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#makeworld">7. 重新编译 "world"</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#make-delete-old">8. 删除过时的文件、 目录和函数库</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/cutting-edge/#small-lan">9. 跟踪多台机器</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-3ba999091575eb04ae88235cd0fb1afa" class="toggle"  />
          <label  class="icon cursor"  for="chapter-3ba999091575eb04ae88235cd0fb1afa"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/">
              第 26 章 DTrace
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-implementation">2. 实现上的差异</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-enable">3. 启用 DTrace 支持</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-using">4. 使用 DTrace</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/dtrace/#dtrace-language">5. D 语言</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-6d4439926bb106ac084ecc88cfd3cfa4" class="toggle"  />
          <label  for="chapter-6d4439926bb106ac084ecc88cfd3cfa4"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partiv/">
              部分 IV. 网络通讯
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-05a353fcb61d8e035f7c43e14725766e" class="toggle"  checked  />
          <label  class="icon cursor"  for="chapter-05a353fcb61d8e035f7c43e14725766e"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/">
              第 27 章 串口通讯
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serial-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serial">2. 介绍</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#term">3. 终端</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#dialup">4. 拨入服务</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#dialout">5. 拨出设备</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/serialcomms/#serialconsole-setup">6. 设置串口控制台</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8" class="toggle"  />
          <label  class="icon cursor"  for="chapter-7f0cbcbf6701b86eba3bbd6fc829f1b8"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/">
              第 28 章 PPP 和 SLIP
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp-and-slip-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#userppp">2. 使用用户级 PPP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp">3. 使用内核级PPP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#ppp-troubleshoot">4. PPP 连接故障排除</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#pppoe">5. 使用基于以太网的PPP(PPPoE)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#pppoa">6. 使用 ATM 上的 PPP (PPPoA)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip/#slip">7. 使用SLIP</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9d023b545804f197d195dd9412749943" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9d023b545804f197d195dd9412749943"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/">
              第 29 章 电子邮件
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-using">2. 使用电子邮件</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#sendmail">3. sendmail 配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-changingmta">4. 改变您的邮件传输代理程序</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-trouble">5. 疑难解答</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-advanced">6. 高级主题</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-UUCP">7. SMTP 与 UUCP</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#outgoing-only">8. 只发送邮件的配置</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-dialup">9. 拨号连接时使用邮件传送</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#SMTP-Auth">10. SMTP 验证</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-agents">11. 邮件用户代理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-fetchmail">12. 使用 fetchmail</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mail/#mail-procmail">13. 使用 procmail</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-42b19e05d30c4135c74b9878818747a9" class="toggle"  />
          <label  class="icon cursor"  for="chapter-42b19e05d30c4135c74b9878818747a9"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/">
              第 30 章 网络服务器
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-servers-synopsis">1. 概要</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-inetd">2. inetd"超级服务器"</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-nfs">3. 网络文件系统（NFS）</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-nis">4. 网络信息服务 (NIS/YP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-dhcp">5. 网络自动配置 (DHCP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-dns">6. 域名系统 (DNS)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-apache">7. Apache HTTP 服务器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-ftp">8. 文件传输协议 (FTP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-samba">9. 为 Microsoft® Windows® 客户机提供文件和打印服务 (Samba)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-ntp">10. 通过 NTP 进行时钟同步</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/network-servers/#network-syslogd">11. 使用 <code>syslogd</code> 记录远程主机的日志</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9554a5177d00d0e87ada408809a1fc67" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9554a5177d00d0e87ada408809a1fc67"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/">
              第 31 章 防火墙
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-intro">1. 入门</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-concepts">2. 防火墙的概念</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-apps">3. 防火墙软件包</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-pf">4. OpenBSD Packet Filter (PF) 和 ALTQ</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-ipf">5. IPFILTER (IPF) 防火墙</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/firewalls/#firewalls-ipfw">6. IPFW</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-9903a1d844ed803a436595e93ec33572" class="toggle"  />
          <label  class="icon cursor"  for="chapter-9903a1d844ed803a436595e93ec33572"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/">
              第 32 章 高级网络
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#advanced-networking-synopsis">1. 概述</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-routing">2. 网关和路由</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-wireless">3. 无线网络</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-bluetooth">4. 蓝牙</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-bridging">5. 桥接</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-aggregation">6. 链路聚合与故障转移</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-diskless">7. 无盘操作</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-pxe-nfs">8. 从 PXE 启动一个 NFS 根文件系统</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-isdn">9. ISDN</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-natd">10. 网络地址转换</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-plip">11. 并口电缆 IP (PLIP)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-ipv6">12. IPv6</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#network-atm">13. 异步传输模式 (ATM)</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/advanced-networking/#carp">14. Common Address Redundancy Protocol (CARP， 共用地址冗余协议)</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-8ca29f99c249993ee9234cb4632af7a5" class="toggle"  />
          <label  for="chapter-8ca29f99c249993ee9234cb4632af7a5"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/partv/">
              部分 V. 附录
            </a>
            
            
          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-0229d553ebf23ffeb945be6f32836221" class="toggle"  />
          <label  class="icon cursor"  for="chapter-0229d553ebf23ffeb945be6f32836221"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/">
              附录 A. 获取 FreeBSD
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-cdrom">1. CDROM 和 DVD 发行商</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-ftp">2. FTP 站点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#anoncvs">3. 匿名 CVS</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#ctm">4. 使用 CTM</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#cvsup">5. 使用 CVSup</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#cvs-tags">6. CVS 标签</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-afs">7. AFS 站点</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/mirrors/#mirrors-rsync">8. rsync 站点</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-743c99fa278b8138914ff018e40c9231" class="toggle"  />
          <label  class="icon cursor"  for="chapter-743c99fa278b8138914ff018e40c9231"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/">
              附录 B. 参考文献
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-freebsd">1. 关于 FreeBSD 的专业书籍与杂志</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-userguides">2. 用户指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-adminguides">3. 管理员指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-programmers">4. 开发指南</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-osinternals">5. 操作系统原理</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-security">6. 安全方面的参考文献</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-hardware">7. 硬件参考</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-history">8. UNIX® 历史</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/bibliography/#bibliography-journals">9. 各种期刊</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-de7eade4b8b64f298c0cbac44c2278da" class="toggle"  />
          <label  class="icon cursor"  for="chapter-de7eade4b8b64f298c0cbac44c2278da"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/">
              附录 C. Internet上的资源
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-mail">1. 邮件列表</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-news">2. Usenet新闻组</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-web">3. World Wide Web服务器</a></li>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/eresources/#eresources-email">4. Email地址</a></li>
  </ul>

          

        
      </li>
    
      <li>
        

          
          
          

          <input type="checkbox" id="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26" class="toggle"  />
          <label  class="icon cursor"  for="chapter-bfb0d4e71c3c1a18a8b75e03f4b48e26"><a role="button"></a></label>

          
            
            <a href="http://127.0.0.1:5500/zh-cn/books/handbook/pgpkeys/">
              附录 D. PGP公钥
            </a>
            
            
  <ul>
    <li><a href="http://127.0.0.1:5500/zh-cn/books/handbook/pgpkeys/#pgpkeys-officers">1. Officers</a></li>
  </ul>

          

        
      </li>
    
      <li>
        
      </li>
    
  </ul>


      </nav>
    </div>
  </aside>
  
  <div class="book">
    
    <div class="book-menu-mobile">
      <label for="menu-control">
        <span class="menu-control-button">
          <i class="fa fa-list" aria-hidden="true" title="Book menu"></i>
          Book menu
        </span>
      </label>
    </div>
    
    <h1 class="title">第 27 章 串口通讯</h1>
    
    
      <div class="admonitionblock note">
        <p>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          This translation may be out of date. To help with the translations please access the <a href="https://translate-dev.freebsd.org/" target="_blank">FreeBSD translations instance</a>.
        </p>
      </div>
    
    
    
    <div class="toc-mobile">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#serial-synopsis">1. 概述</a></li>
    <li><a href="#serial">2. 介绍</a></li>
    <li><a href="#term">3. 终端</a></li>
    <li><a href="#dialup">4. 拨入服务</a></li>
    <li><a href="#dialout">5. 拨出设备</a></li>
    <li><a href="#serialconsole-setup">6. 设置串口控制台</a></li>
  </ul>
</nav>
    </div>
    
      
      
    
    <div class="book-content">
      <div id="preamble">
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="serial-synopsis">1. 概述<a class="anchor" href="#serial-synopsis"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>UNIX® 一直都是支持串口通讯的。事实上， 早期的 UNIX® 系统就是利用串口线来输入和输出数据的。 那时常见的 &#34;终端&#34; 包括一个每秒10个字符的串口打印机和键盘， 现在这些已经发生了很大的变化。 这章将介绍一些利用 FreeBSD 进行串口通讯的方法。</p>
</div>
<div class="paragraph">
<p>读完这章，您将了解到：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如何通过终端连接到您的FreeBSD系统。</p>
</li>
<li>
<p>如何使用modem拨号到远程主机。</p>
</li>
<li>
<p>如何允许远程用户通过modem登录到您的系统。</p>
</li>
<li>
<p>如何从串口控制台引导您的系统。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>阅读这章之前，您应当了解：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如何配置和安装一个新的内核 (crossref:kernelconfig[kernelconfig,配置FreeBSD的内核])。</p>
</li>
<li>
<p>理解 UNIX® 的权限和进程 (crossref:basics[basics,UNIX 基础])。</p>
</li>
<li>
<p>准备您打算在 FreeBSD 中使用的串口设备 (modem 或多插口卡)的技术参考手册。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serial">2. 介绍<a class="anchor" href="#serial"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， 用于串口的设备节点从 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>； 从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户需要根据实际情况对这份文档中的例子进行必要的调整。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="serial-terminology">2.1. 术语<a class="anchor" href="#serial-terminology"></a></h3>
<div class="dlist">
<dl>
<dt class="hdlist1">bps</dt>
<dd>
<p>每秒位- 数据的传输速度</p>
</dd>
<dt class="hdlist1">DTE</dt>
<dd>
<p>数据终端设备 - 如您的计算机</p>
</dd>
<dt class="hdlist1">DCE</dt>
<dd>
<p>数据通讯设备 - 如您的modem</p>
</dd>
<dt class="hdlist1">RS-232</dt>
<dd>
<p>用于硬件串口通讯的EIA标准</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>当讨论通讯数据速度的时候，这节不会使用术语 &#34;baud&#34;。Baud指电气标准传输率，它已经使用了很长时间， 而 &#34;bps&#34; (bits per second) 才是正确使用的术语 (至少它不会打扰那些爱争吵的家伙)。</p>
</div>
</div>
<div class="sect2">
<h3 id="serial-cables-ports">2.2. 线缆和端口<a class="anchor" href="#serial-cables-ports"></a></h3>
<div class="paragraph">
<p>要将 modem 或终端与您的 FreeBSD 系统相连， 您的计算机需要一个串口， 以及用于连接串口设备所需的线缆。 如果您比较熟悉硬件及所需要的电缆， 则可以跳过这节。</p>
</div>
<div class="sect3">
<h4 id="term-cables">2.2.1. 线缆<a class="anchor" href="#term-cables"></a></h4>
<div class="paragraph">
<p>串口线缆有许多不同的种类。 最常见的两种类型是 null-modem 线缆和标准 (&#34;直联&#34;) RS-232 线缆。 您的硬件说明书中会介绍应使用的线缆种类。</p>
</div>
<div class="sect4">
<h5 id="term-cables-null">2.2.1.1. Null-modem线缆<a class="anchor" href="#term-cables-null"></a></h5>
<div class="paragraph">
<p>null-modem 电缆会直接传送某些信号， 如 &#34;Signal Ground&#34; (信号地)， 但对其他信号进行交换。 例如， &#34;Transmitted Data&#34; (数据发送) 引脚是连到另一端 &#34;Received Data&#34; (数据接收) 引脚的。</p>
</div>
<div class="paragraph">
<p>也可以自行制作 null-modem 电缆给终端使用 (例如， 为了品质的要求)。 下面的表格展示了 RS-232C <a href="#serialcomms-signal-names">信号</a>， 以及 DB-25 连接器上的引脚。 注意， 标准也要求一根直通引脚 1 到引脚 1 的 <em>保护地 (Protective Ground)</em> 线， 但这通常都被省掉。 某些终端在只有引脚 2、 3 和 7 的时候， 就已经能够正常使用了， 而其他一些， 则需要下面例子中所展示的不同的配置。</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<caption class="title">表 1. DB-25 to DB-25 Null-Modem Cable</caption>
<colgroup>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">信号</th>
<th class="tableblock halign-left valign-top">引脚 #</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">引脚 #</th>
<th class="tableblock halign-left valign-top">信号</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>这里还有两种目前比较流行的其他接线方式。</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<caption class="title">表 2. DB-9 到 DB-9 Null-Modem 电缆</caption>
<colgroup>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">信号</th>
<th class="tableblock halign-left valign-top">引脚 #</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">引脚 #</th>
<th class="tableblock halign-left valign-top">信号</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<caption class="title">表 3. DB-9 到 DB-25 Null-Modem 电缆</caption>
<colgroup>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
<col style="width: 20%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">信号</th>
<th class="tableblock halign-left valign-top">引脚 #</th>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">引脚 #</th>
<th class="tableblock halign-left valign-top">信号</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB-9 到 DB-25 Null-Modem 电缆</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">接到</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>当某一段连接器上的一个引脚需要连接到对端的一对引脚时， 通常是将那一对引脚使用一短线连接， 而使用长线接到另一端的那个引脚。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>上面的设计似乎更为流行。 在其他变种中 (在 <em>RS-232 Made Easy</em> 这本书中进行了详细介绍) 则是 SG 接 SG， TD 接 RD、 RTS 和 CTS 接 DCD、 DTR 接 DSR， 反之亦然。</p>
</div>
</div>
<div class="sect4">
<h5 id="term-cables-std">2.2.1.2. 标准RS-232C线缆<a class="anchor" href="#term-cables-std"></a></h5>
<div class="paragraph">
<p>标准的串口电缆会直接传送所有 RS-232C 信号。 也就是说， 一头的 &#34;Transmitted Data&#34; 引脚， 会直接接到另一头的 &#34;Transmitted Data&#34; 引脚。 这包括将调制解调器接到您的 FreeBSD 系统上的那种电缆， 同样也适用于某些型号的终端。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="term-ports">2.2.2. 端口<a class="anchor" href="#term-ports"></a></h4>
<div class="paragraph">
<p>串口是FreeBSD主机与终端传输数据的设备。 这节描述了端口的种类和它们在 FreeBSD 上是如何编址的。</p>
</div>
<div class="sect4">
<h5 id="term-portkinds">2.2.2.1. 端口的种类<a class="anchor" href="#term-portkinds"></a></h5>
<div class="paragraph">
<p>有好几种串口。 在采购或制作线缆之前， 您应确认它能够适合您的终端以及 FreeBSD 系统。</p>
</div>
<div class="paragraph">
<p>绝大多数终端都提供 DB-25 端口。 个人计算机， 也包括运行 FreeBSD 的 PC 机， 通常会有 DB-25 或 DB-9 口。 如果您的 PC 上有多插口串口卡， 则可能有 RJ-12 或 RJ-45 口。</p>
</div>
<div class="paragraph">
<p>请参见您硬件的文档以了解所用接口的规格。 此外， 您也可以通过观察外观来了解所用的端口。</p>
</div>
</div>
<div class="sect4">
<h5 id="term-portnames">2.2.2.2. 端口名称Port Names<a class="anchor" href="#term-portnames"></a></h5>
<div class="paragraph">
<p>在FreeBSD中，您可以通过 <span class="filename">/dev</span> 目录中的一个记录来访问每个串口。有两种不同的记录：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>呼入端口的名字是 <span class="filename">/dev/ttyuN</span>， 其中 <em>N</em> 是端口的编号， 从零开始计数。 一般来说， 您使用呼入端口作为终端。 呼入端口要求数据线使用载波检测 (DCD) 信号来工作。</p>
</li>
<li>
<p>呼出端口的名字是 <span class="filename">/dev/cuauN</span>。 通常并不使用呼出端口作为终端， 而只用于调制解调器。 如果串口线或终端不支持载波检测信号， 则可能必须要使用呼出端口。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果您已经连接一个终端到第一个串口 (在 MS-DOS® 上是<span class="filename">COM1</span>)， 则可以使用 <span class="filename">/dev/ttyu0</span> 来作为终端。 如果它是在第二个串口 (<span class="filename">COM2</span>)， 那就是 <span class="filename">/dev/ttyu1</span>，等等。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_内核配置">2.3. 内核配置<a class="anchor" href="#_内核配置"></a></h3>
<div class="paragraph">
<p>FreeBSD默认支持4个串口。 在MS-DOS®下，这些是 <span class="filename">COM1</span>， <span class="filename">COM2</span>， <span class="filename">COM3</span>， 和 <span class="filename">COM4</span>。 FreeBSD 目前支持 &#34;dumb&#34; 多口串口卡，如 BocaBoard 1008 和 2016， 以及许多 Digiboard 和 Stallion Technologies 制造的智能多接口卡。 不过， 默认的内核只会寻找标准的COM端口。</p>
</div>
<div class="paragraph">
<p>要看看您的内核是否支持您的串口，只要在内核启动时查看一下启动信息， 或使用 <code>/sbin/dmesg</code> 命令重新检测内核启动信息。 特别的，寻找以<code>sio</code>字符启动的信息。</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果想只察看包含 <code>sio</code> 一词的消息， 可以使用下面的命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># /sbin/dmesg | grep &#39;sio&#39;</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>例如，在一个带有4个串口的系统上，这些是串口特定的内核启动信息：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: <span class="nb">type </span>16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: <span class="nb">type </span>16550A
sio2 at 0x3e8-0x3ef irq 5 on isa
sio2: <span class="nb">type </span>16550A
sio3 at 0x2e8-0x2ef irq 9 on isa
sio3: <span class="nb">type </span>16550A</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果内核未能认出所有的串口， 可能需要通过修改 <span class="filename">/boot/device.hints</span> 文件来进行一些配置。 此外， 也可以注释或完全删除掉您没有的设备。</p>
</div>
<div class="paragraph">
<p>请参见 man:sio[4] 联机手册来了解关于串口， 以及多插口卡配置的进一步细节。 如果您正使用一个在不同版本的 FreeBSD 上的文件请务必小心， 因为设备参数和语法发生了变化。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>这里端口 <code>IO_COM1</code> 代替了 <code>0x3f8</code>，端口 <code>IO_COM2</code> 代替了 <code>0x2f8</code>，端口 <code>IO_COM3</code> 代替了 <code>0x3e8</code>，端口 <code>IO_COM4</code> 代替了 <code>0x2e8</code>，这些都是各自端口相应的端口地址。 中断4，3，5，9都是经常用的中断。也要注意有些正常的串口可能 <em>无法</em> 在一些ISA总线的PC上共享中断 (多插口板卡有板载的电子设备，允许在板上所有 16550A 的设备共享一个或两个中断请求)。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_设备特殊文件">2.4. 设备特殊文件<a class="anchor" href="#_设备特殊文件"></a></h3>
<div class="paragraph">
<p>在内核中， 大多数设备都是通过 &#34;设备特殊文件&#34; 来访问的， 这些文件一般位于 <span class="filename">/dev</span> 目录中。 <span class="filename">sio</span> 是通过 <span class="filename">/dev/ttyuN</span> (呼入) 和 <span class="filename">/dev/cuauN</span> (呼出) 设备来访问的。 此外， FreeBSD 也提供了初始化设备 （<span class="filename">/dev/ttyuN.init</span> 和 <span class="filename">/dev/cuauN.init</span>） 以及锁设备 （<span class="filename">/dev/ttyuN.lock</span> 和 <span class="filename">/dev/cuauN.lock</span>）。 初始化设备用于在打开端口时初始化其通讯参数， 例如使用 <code>RTS/CTS</code> 信号进行流控制的调制解调器的 <code>crtscts</code>。 锁设备则用于在端口上提供一个锁标志， 防止用户或程序改变特定的参数； 请参见 man:termios[4]、 man:sio[4]， 以及 man:stty[1] 的联机手册， 以了解关于终端配置、 锁和初始化设备， 以及配置终端参数的详细信息。</p>
</div>
</div>
<div class="sect2">
<h3 id="serial-hw-config">2.5. 串口配置<a class="anchor" href="#serial-hw-config"></a></h3>
<div class="paragraph">
<p><span class="filename">ttyuN</span> (或 <span class="filename">cuauN</span>) 设备是您将要打开的应用程序的一般设备。 当进程打开某个设备时， 它将有一个终端 I/O 设置的默认配置。 您可以在命令行看看这些设置：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># stty -a -f /dev/ttyu1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>当您修改了这个设备的设置，这个设置会生效，除非设备被关闭。 当它被重新打开时，它将回到默认设置。 要修改默认设置，您可以打开和调整 &#34;初始状态&#34; 设备的设置。例如， 要为<span class="filename">ttyu5</span> 打开 <code>CLOCAL</code> 模式，8位通讯和默认的 <code>XON/XOFF</code> 流控制， 输入：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># stty -f /dev/ttyu5.init clocal cs8 ixon ixoff</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>串口设备的系统级初始化， 是由 <span class="filename">/etc/rc.d/serial</span> 来控制的。 这个文件会影响串口设备的默认设置。</p>
</div>
<div class="paragraph">
<p>为了防止应用程序修改某些设置， 应修改 &#34;lock state&#34;(锁状态) 设备。 例如， 要把 <span class="filename">ttyu5</span> 的速率锁定为 57600 bps， 输入：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># stty -f /dev/ttyu5.lock 57600</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，一个打开<span class="filename">ttyu5</span> 和设法改变端口速度的应用程序将被固定在57600bit/s。很自然地， 您需要确定初始状态，然后用root帐户锁定状态设备的写入功能。</p>
</div>
<div class="paragraph">
<p>很显然，您应该只让 <code>root</code> 用户可以初始化或锁定设备的状态。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="term">3. 终端<a class="anchor" href="#term"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， 用于串口的设备节点从 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>； 从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户需要根据实际情况对这份文档中的例子进行必要的调整。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>当您在计算机控制台或是在一个连接的网络上时， 终端提供了一个方便和低成本的访问 FreeBSD 系统的方法。 这节描述了如何在 FreeBSD 上使用终端。</p>
</div>
<div class="sect2">
<h3 id="term-uses">3.1. 终端的用法和类型<a class="anchor" href="#term-uses"></a></h3>
<div class="paragraph">
<p>早期的 UNIX® 系统没有控制台。 人们通过将终端连接到计算机的串口来登录和使用程序。 它很像用 modem 和一些终端软件来拨号进入一个远程的系统， 只能执行文本的工作。</p>
</div>
<div class="paragraph">
<p>今天的 PC 已经可以使用高质量的图形了， 但与今天的其他UNIX®操作系统一样，建立一个登录会话的能力仍然存在。 通过使用一个终端连接到一个没有使用的串口， 您就能登录和运行任何文本程序或在 X 视窗系统中运行一个 <code>xterm</code> 窗口程序。</p>
</div>
<div class="paragraph">
<p>对于商业用户，您可以把任何终端连接到 FreeBSD 系统， 然后把它们放在员工的桌面上。 对于家庭用户，则可以使用一台比较老的 IBM PC 或 Macintosh 运行一个终端连接到一台运行 FreeBSD 的高性能机器上。</p>
</div>
<div class="paragraph">
<p>对于FreeBSD，有三种终端：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#term-dumb">哑终端</a></p>
</li>
<li>
<p><a href="#term-pcs">充当终端的PC</a></p>
</li>
<li>
<p><a href="#term-x">X 终端</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>下面一小节将描述每一种终端。</p>
</div>
<div class="sect3">
<h4 id="term-dumb">3.1.1. 哑终端<a class="anchor" href="#term-dumb"></a></h4>
<div class="paragraph">
<p>哑终端需要专门的好几种硬件，让您通过串口线连接到计算机。 它们被叫做 &#34;哑&#34; 是因为它们只能够用来显示， 发送和接收文本。 您不能在它上面运行任何程序。</p>
</div>
<div class="paragraph">
<p>有好几百种哑终端，包括Digital Equipment Corporation 的VT-100和Wyse的WY-75。只有几种可以在FreeBSD上工作。 一些高端的终端可以显示图形，但只有某些软件包可以使用这些高级特性。</p>
</div>
<div class="paragraph">
<p>哑终端被广泛用于那些不需要图形应用的工作中。</p>
</div>
</div>
<div class="sect3">
<h4 id="term-pcs">3.1.2. 充当终端的PC<a class="anchor" href="#term-pcs"></a></h4>
<div class="paragraph">
<p>假如 <a href="#term-dumb">哑终端</a> 的功能仅限于显示、 发送和接收文本的话， 那么显然任何一台闲置的个人计算机， 都完全能够胜任哑终端的工作。 因此您需要的是合适的线缆， 以及一些在这台计算机上运行的 <em>终端仿真</em> 软件。</p>
</div>
<div class="paragraph">
<p>这种配置在家庭中应用十分广泛。 例如， 如果您的爱人正忙于在您的 FreeBSD 系统的控制台上工作时， 您就可以将一台功能稍弱的计算机挂在这个 FreeBSD 系统上来同时完成一些文本界面的工作。</p>
</div>
<div class="paragraph">
<p>在 FreeBSD 的基本系统中至少有两个能用于进行串口连接的工具： man:cu[1] 和 man:tip[1]。</p>
</div>
<div class="paragraph">
<p>如果要从运行 FreeBSD 的计算机上通过串口连接到另一系统， 可以使用：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cu -l 串口设备</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>此处 &#34;串口设备&#34; 表示您计算机上某个串口对应的设备名。 <span class="filename">/dev/cuauN</span>。</p>
</div>
<div class="paragraph">
<p>此处的 &#34;N&#34; 表示串口的编号。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>请注意在 FreeBSD 中设备的编号是从零而非一开始的 (这一点与另一些系统， 如基于 MS-DOS® 的系统不同)。 因此， 在基于 MS-DOS® 系统中的 <span class="filename">COM1</span> 在 FreeBSD 中通常叫做 <span class="filename">/dev/cuau0</span>。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>其他一些人可能喜欢使用另一些来自 Ports 套件的程序。 Ports 中提供了几个与 man:cu[1] 和 man:tip[1] 类似的工具， 例如 package:comms/minicom[]。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="term-x">3.1.3. X 终端<a class="anchor" href="#term-x"></a></h4>
<div class="paragraph">
<p>X终端是最复杂的终端系统。它们通常需要使用以太网来连接。 它们能显示任何X应用程序。</p>
</div>
<div class="paragraph">
<p>我们介绍X终端只是为了感兴趣。然而， 这章_不会_涉及X终端的安装，配置或使用。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="term-config">3.2. 配置<a class="anchor" href="#term-config"></a></h3>
<div class="paragraph">
<p>这节描述了您在一个终端上启用一个登录会话时， 需要在 FreeBSD 系统上进行的配置。 假设已经配置好了内核来支持串口， 就可以直接开始连接了。</p>
</div>
<div class="paragraph">
<p>在 crossref:boot[boot,FreeBSD 引导过程] 中曾经提到， <code>init</code> 进程依赖于系统启动时所有的处理控制和初始化。 通过 <code>init</code> 来执行的一些任务将先读取 <span class="filename">/etc/ttys</span>文件， 然后在可用的终端上启用一个 <code>getty</code> 进程。 <code>getty</code> 进程可用来阅读一个登录名和启动 <code>login</code>程序。</p>
</div>
<div class="paragraph">
<p>然而，要为您的FreeBSD系统配置终端，您需要以 <code>root</code> 身份执行下面的步骤：</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>如果它不在那里， 您需要为串口在 <span class="filename">/dev</span> 目录下添加一行记录到 <span class="filename">/etc/ttys</span>。</p>
</li>
<li>
<p>指定 <code>/usr/libexec/getty</code> 在端口上运行， 然后从 <span class="filename">/etc/gettytab</span> 文件指定适当的 <em>getty</em> 类型。</p>
</li>
<li>
<p>指定默认的终端类型。</p>
</li>
<li>
<p>设置端口为 &#34;on&#34;。</p>
</li>
<li>
<p>确定端口是否为 &#34;secure&#34;。</p>
</li>
<li>
<p>迫使<code>init</code> 重新读取 <span class="filename">/etc/ttys</span>文件。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>作为可选的步骤，您可以通过在 <span class="filename">/etc/gettytab</span> 中建立一个记录，在第2步创建一个定制的 <em>getty</em> 类型来使用。这章不会介绍如何做。 您可以参考 man:gettytab[5] 和 man:getty[8] 的联机手册了解更多信息。</p>
</div>
<div class="sect3">
<h4 id="term-etcttys">3.2.1. 添加一个记录到<span class="filename">/etc/ttys</span><a class="anchor" href="#term-etcttys"></a></h4>
<div class="paragraph">
<p><span class="filename">/etc/ttys</span>文件列出了您 FreeBSD系统上允许登录的所有端口。 例如， 第一个虚拟控制台 <span class="filename">ttyv0</span> 在这个文件中有一个记录。 您可以使用这个记录登录进控制台。 这个文件也包含其他虚拟控制台的记录，串口，和伪 ttys 终端。 对于一个硬连线的终端， 只要列出串口的 <span class="filename">/dev</span> 记录而不需要 <span class="filename">/dev</span> 部分 (例如， <span class="filename">/dev/ttyv0</span> 可以被列为 <span class="filename">ttyv0</span>)。</p>
</div>
<div class="paragraph">
<p>默认的 FreeBSD 安装包括一个支持最初四个串口 <span class="filename">ttyu0</span> 到 <span class="filename">ttyu3</span> 的<span class="filename">/etc/ttys</span> 文件。 如果您从那些端口中某一个使用终端，您不需要添加另一个记录。</p>
</div>
<div id="ex-etc-ttys" class="exampleblock">
<div class="title">例 1. 在 <span class="filename">/etc/ttys</span> 中增加终端记录</div>
<div class="content">
<div class="paragraph">
<p>假设我们连接两个终端给系统： 一个 Wyse-50 和一个老的运行 Procomm 终端软件模拟一个 VT-100 终端的286IBM PC。 在 <span class="filename">/etc/ttys</span> 文件中的相应的记录是这样的：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ttyu1  &#34;/usr/libexec/getty std.38400&#34;  wy50  on  insecure
ttyu5   &#34;/usr/libexec/getty std.19200&#34;  vt100  on  insecure</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>第一部分指定了终端指定文件的名称， 它可以在 <span class="filename">/dev</span>中找到。</p>
</li>
<li>
<p>第二部分是在这行执行的命令，通常是 man:getty[8]。 <code>getty</code> 初始化然后打开一行，设置速度， 用户名的命令和执行登录程序。<code>getty</code> 程序在它的命令行接收一个参数 (可选)， <em>getty</em> 类型。 一个 <em>getty</em> 类型会在终端行描述一个特征， 像波特率和奇偶校验。 <code>getty</code> 程序从 <span class="filename">/etc/gettytab</span> 文件读取这些特征。文件<span class="filename">/etc/gettytab</span> 包含了许多老的和新的终端行记录。 在很多例子中，启动文本 <code>std</code> 的记录将用硬连线终端来工作。 这些记录忽略了奇偶性。 这是一个从110到115200 bit/s的 <code>std</code> 记录。 当然，您可以添加您自己的记录到这个文件。 gettytab 的联机手册提供了更多的信息。当在<span class="filename">/etc/ttys</span>中设置 <em>getty</em> 类型的时候， 确信在终端上的通讯设置匹配。 在我们的例子中， Wyse-50 不使用奇偶性， 用38400 bit/s 来连接。286 PC不使用奇偶性，用19200bit/s来连接。</p>
</li>
<li>
<p>第三部分是通常连接到那个tty行的终端类型。对于拨号端口， <code>unknown</code> 或 <code>dialup</code> 通常被用在这个地方。 对于硬连线的终端，终端类型不会改变， 所以您可以从termcap数据库文件中放一个真正的终端类型。在我们的例子中， Wyse-50 使用真正的终端类型， 而运行 Procomm 的286 PC将被设置成在VT-100上的模拟。</p>
</li>
<li>
<p>如果端口被启用，可以指定第四个部分。在第二部分， 把它放在这儿将执行初始化进程来启动程序 <code>getty</code>。如果您在这部分拖延， 将没有<code>getty</code>，在端口上因此就没有登录。</p>
</li>
<li>
<p>最后部分被用来指定端口是否安全。 标记一个安全的端口意味着您信任它允许用 <code>root</code> 帐户从那个端口登录。 不安全的端口不允许 <code>root</code>登录。 在一个不安全的端口上， 用户必须用无特权的帐户登录， 然后使用 <code>su</code> 或一个相似的机制来获得超级用户的权限。</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="term-hup">3.2.2. 重新读取<span class="filename">/etc/ttys</span>来强制<code>init</code><a class="anchor" href="#term-hup"></a></h4>
<div class="paragraph">
<p>对<span class="filename">/etc/ttys</span>文件做一个必要的修改后，您必须发送一个 SIGHUP 信号给初始化进程来迫使它重新读取配置文件，例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># kill -HUP 1</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>init</code> 总是系统运行时的第一个进程，因此它总是PID 1。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>如果能够正确设置，所有的线缆都是适当的，终端将可以启用了， 然后一个 <code>getty</code> 进程将在每个终端运行， 您将在您的终端上看到登录命令行。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="term-debug">3.3. 您的连接可能出现的问题<a class="anchor" href="#term-debug"></a></h3>
<div class="paragraph">
<p>即使您小心翼翼地注意细节，您仍然可能会在设置终端时出错。 这有一个有关问题和解决办法的列表：</p>
</div>
<div class="sect3">
<h4 id="_没有登录命令出现">3.3.1. 没有登录命令出现：<a class="anchor" href="#_没有登录命令出现"></a></h4>
<div class="paragraph">
<p>确定终端被嵌入和打开了。如果把一台个人计算机充当一个终端， 确信终端模拟软件运行在正确的串口上。</p>
</div>
<div class="paragraph">
<p>确信线缆被稳固地连接在终端和 FreeBSD 计算机上。 确信用了正确的电缆。</p>
</div>
<div class="paragraph">
<p>确定终端和 FreeBSD 的传输速度和奇偶设置已经一致了。 如果您有一个图像显示终端，确信对比度已经调节好了。 如果它是一个可打印的终端，确信纸张和墨水已经就绪了。</p>
</div>
<div class="paragraph">
<p>确定一个 <code>getty</code> 进程正在运行和服务终端。 例如， 可以用<code>ps</code> 命令得到运行 <code>getty</code> 程序的列表，键入：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># ps -axww|grep getty</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>您将看到一个终端的记录。例如，下面的显示表明一个<code>getty</code> 正在第二个串口 <span class="filename">ttyu1</span> 运行， 正在 <span class="filename">/etc/gettytab</span> 中使用 <code>std.38400</code> 的记录：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">22189  d1  Is+    0:00.03 /usr/libexec/getty std.38400 ttyu1</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果没有 <code>getty</code> 进程运行， 确信您已经在<span class="filename">/etc/ttys</span>中启用了端口。 在修改完<span class="filename">/etc/ttys</span>文件后，记得运行 <code>kill -HUP 1</code>。</p>
</div>
<div class="paragraph">
<p>如果 <code>getty</code> 进程确实在运行， 但终端上仍然没有显示出登录提示， 或者虽然显示了单缺不允许您输入， 您的终端或电缆可能不支持硬件握手。 请尝试将 <span class="filename">/etc/ttys</span> 中的 <code>std.38400</code> 改为 <code>3wire.38400</code> (注意在改完 <span class="filename">/etc/ttys</span> 之后要 <code>kill -HUP 1</code>)。 <code>3wire</code> 记录和 <code>std</code> 类似， 但忽略硬件握手。 您可能需要在使用 <code>3wire</code> 时减少波特率或启用软件流控制以避免缓冲区溢出。</p>
</div>
</div>
<div class="sect3">
<h4 id="_出现一个_垃圾_而不是一个登录命令行">3.3.2. 出现一个 &#34;垃圾&#34; 而不是一个登录命令行<a class="anchor" href="#_出现一个_垃圾_而不是一个登录命令行"></a></h4>
<div class="paragraph">
<p>确信终端和 FreeBSD 使用相同的 bit/s 传输率和奇偶校验设置。 检查一下 <code>getty</code> 进程确信当前使用正确的 <em>getty</em> 类型。 如果没有， 编辑<span class="filename">/etc/ttys</span>然后运行<code>kill -HUP 1</code>。</p>
</div>
</div>
<div class="sect3">
<h4 id="_当键入密码时字符两个两个出现">3.3.3. 当键入密码时，字符两个两个出现<a class="anchor" href="#_当键入密码时字符两个两个出现"></a></h4>
<div class="paragraph">
<p>将终端 (或终端模拟软件) 从 &#34;半双工&#34; 或 &#34;本地回显&#34; 换成 &#34;全双工&#34;。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dialup">4. 拨入服务<a class="anchor" href="#dialup"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， 用于串口的设备节点从 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>； 从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户需要根据实际情况对这份文档中的例子进行必要的调整。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>为拨入服务配置FreeBSD系统与连接到终端是非常相似的，除非您正在使用 modem来拨号而不是终端。</p>
</div>
<div class="sect2">
<h3 id="_外置vs_内置modem">4.1. 外置vs.内置modem<a class="anchor" href="#_外置vs_内置modem"></a></h3>
<div class="paragraph">
<p>外置modem看起来很容易拨号。 因为，外置 modem 可以通过储存在非易失性的RAM中的参数来配置， 它们通常提供指示器来显示重要的RS-232信号的状态。 不停闪光的信号灯能给用户留下比较深刻的印象， 而且指示器也可以用来查看modem是否正常地工作。</p>
</div>
<div class="paragraph">
<p>内置modem通常缺乏非易失性的RAM， 所以对它们的配置可能会限制在通过 DIP 开关来设置。 如果您的内置modem有指示灯，您也很难看得到。</p>
</div>
<div class="sect3">
<h4 id="_modem和线缆">4.1.1. Modem和线缆<a class="anchor" href="#_modem和线缆"></a></h4>
<div class="paragraph">
<p>如果您使用一个外置的 modem，那您将需要适当的电缆线。 一个标准的串口线应当足够长以至普通的信号能够连接上：</p>
</div>
<table id="serialcomms-signal-names" class="tableblock frame-none grid-all stretch">
<caption class="title">表 4. 信号名称</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">缩写</th>
<th class="tableblock halign-left valign-top">全名</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">收到数据 (Received Data)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">传出数据 (Transmitted Data)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">数据终端就绪 (Data Terminal Ready)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">数据集就绪 (Data Set Ready)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DCD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">数据载波检测 (Data Carrier Detect) (RS-232 的收到线路信号检测器)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">信号地 (Signal Ground)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">要求发送数据 (Request to Send)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">允许对方发送数据 (Clear to Send)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>FreeBSD 对速度超过 2400 bps 的情形需要通过 RTS 和 CTS 信号来完成流控制， 通过 CD 信号来检测呼叫响应和挂机， 并通过 DTR 信号来在会话结束时对调制解调器进行复位。 某些电缆在连接时没有提供全部需要的信号， 这会给您带来问题， 例如在挂断时登录会话不消失， 这就有可能是电缆的问题。</p>
</div>
<div class="paragraph">
<p>与其它类 UNIX® 操作系统类似， FreeBSD 使用硬件信号来检测呼叫响应， 以及在挂断时挂断并复位调制解调器。 FreeBSD 避免发送命令给调制解调器， 或监视其状态。 如果您熟悉通过调制解调器来连接基于 PC 的 BBS 系统， 这可能看起来有点难用。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_串口的考虑">4.2. 串口的考虑<a class="anchor" href="#_串口的考虑"></a></h3>
<div class="paragraph">
<p>FreeBSD支持基于 NS8250， NS16450， NS16550 和 NS16550A 的EIA RS-232C通讯接口。 8250和16450设备有单字符缓冲。 16550设备提供了一个 16 个字符的缓冲， 可以提高更多的系统性能。 因为单字符缓冲设备比 16 个字符的缓冲需要更多的系统资源来工作， 所以基于16550A的接口卡可能更好。 如果系统没有活动的串口， 或有较大的负载， 16 字符缓冲的卡对于低错误率的通讯来说更好。</p>
</div>
</div>
<div class="sect2">
<h3 id="_快速预览">4.3. 快速预览<a class="anchor" href="#_快速预览"></a></h3>
<div class="paragraph">
<p>对于终端， <code>init</code> 会在每个配置串口上为每个拨入连接产生一个 <code>getty</code> 进程。 例如， 如果一个 modem 被附带在 <span class="filename">/dev/ttyu0</span> 中，用命令<code>ps ax</code>可以显示下面这些：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyu0</code></pre>
</div>
</div>
<div class="paragraph">
<p>当用户拨上modem， 并使用它进行连接时， CD 线就会被 modem 认出。 内核注意到载波信号已经被检测到， 需要完成 <code>getty</code> 端口的打开。 <code>getty</code> 发送一个登录：在指定的初始线速度上的命令行。 Getty 会检查合法的字符是否被接收， 在典型的配置中， 如果发现 &#34;垃圾&#34;， <code>getty</code> 就会设法调节线速度，直到它接收到合理的字符。</p>
</div>
<div class="paragraph">
<p>用户在键入他/她的登录名称后， <code>getty</code>执行<span class="filename">/usr/bin/login</span>， 这会要求用户输入密码来完成登录， 然后启动用户的shell。</p>
</div>
</div>
<div class="sect2">
<h3 id="_配置文件">4.4. 配置文件<a class="anchor" href="#_配置文件"></a></h3>
<div class="paragraph">
<p>如果希望允许拨入您的 FreeBSD 系统， 在 <span class="filename">/etc</span> 目录中有三个系统配置文件需要您关注。 其一是 <span class="filename">/etc/gettytab</span>， 其中包含用于 <span class="filename">/usr/libexec/getty</span> 服务的配置信息。 其二是 <span class="filename">/etc/ttys</span>， 它的作用是告诉 <span class="filename">/sbin/init</span> 哪些 <span class="filename">tty</span> 设备上应该运行 <code>getty</code>。 最后， 关于端口的初始化命令， 应放到 <span class="filename">/etc/rc.d/serial</span> 脚本中。</p>
</div>
<div class="paragraph">
<p>关于在 UNIX® 上配置拨入调制解调器有两种主要的流派。 一种是将本地计算机到调制解调器的 RS-232 接口配置为固定速率。 这样做的好处是， 远程用户总能立即见到系统的登录提示符， 而其缺点则是， 系统并不知道用户真实的数据速率是多少， 因而， 类似 Emacs 这样的程序， 也就无法调整它们绘制屏幕的方式， 以便为慢速连接改善响应时间。</p>
</div>
<div class="paragraph">
<p>另一种流派将调制解调器的 RS-232 接口速率配置为随远程用户的连接速率变化。 例如， 对 V.32bis (14.4 Kbps) 连接， 调制解调器会让自己的 RS-232 接口以 19.2 Kbps 的速率运行， 而 2400 bps 连接， 则会使调制解调器的 RS-232 接口以 2400 bps 的速率运行。 由于 <code>getty</code> 并不能识别具体的调制解调器的连接速率反馈信息， 因此， <code>getty</code> 会以初始速度给出一个 <code>login:</code> 提示， 并检查用户的响应字符。 如果用户看到乱码， 则他们应知道此时应按下 <kbd>Enter</kbd> 键， 直到看到可以辨认的提示符为止。 如果数据速率不匹配， 则 <code>getty</code> 会将用户输入的任何信息均视为 &#34;乱码&#34;， 并尝试以下一种速率来再次给出 <code>login:</code> 提示符。 这一过程可能需要令人作呕地重复下去， 不过一般而言， 用户只要敲一两下键盘就能看到正确的提示符了。 显然， 这种登录过程看起来不如前面所介绍的 &#34;锁定速率&#34; 方法那样简单明了， 但使用低速连接的用户， 却可以在运行全屏幕程序时得到更好的交互响应。</p>
</div>
<div class="paragraph">
<p>这一节将尽可能公平地介绍关于配置的信息， 但更着力于介绍调制解调器速率随连接速率变化的配置方法。</p>
</div>
<div class="sect3">
<h4 id="_etcgettytab">4.4.1. <span class="filename">/etc/gettytab</span><a class="anchor" href="#_etcgettytab"></a></h4>
<div class="paragraph">
<p><span class="filename">/etc/gettytab</span>是一个用来配置 <code>getty</code> 信息的 termcap 风格的文件。 请看看 gettytab 的联机手册了解完整的文件格式和功能列表。</p>
</div>
<div class="sect4">
<h5 id="_锁定速度的配置">4.4.1.1. 锁定速度的配置<a class="anchor" href="#_锁定速度的配置"></a></h5>
<div class="paragraph">
<p>如果您把您的modem的数据通讯率锁定在一个特殊的速度上， 您不需要对 <span class="filename">/etc/gettytab</span> 文件作任何变化。</p>
</div>
</div>
<div class="sect4">
<h5 id="_匹配速度的配置">4.4.1.2. 匹配速度的配置<a class="anchor" href="#_匹配速度的配置"></a></h5>
<div class="paragraph">
<p>您将需要在 <span class="filename">/etc/gettytab</span> 中设置一个记录来告诉 <code>getty</code> 您希望在 modem 上使用的速度。 如果您的 modem 的速率是 2400 bit/s， 则可以使用现有的 <code>D2400</code> 的记录。</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#
# Fast dialup terminals, 2400/1200/300 rotary (can start either way)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre>
</div>
</div>
<div class="paragraph">
<p>如果您有一个更高速度的 modem， 必须在 <span class="filename">/etc/gettytab</span> 中添加一个记录。 下面是一个让您可以以最高 19.2 Kbit/s 的用在 14.4 Kbit/s的modem上的接口记录：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#
# Additions for a V.32bis Modem
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre>
</div>
</div>
<div class="paragraph">
<p>这样做的结果是 8-数据位， 没有奇偶校验的连接。</p>
</div>
<div class="paragraph">
<p>上面使用19.2 Kbit/s的连接速度的例子，也可以使用 9600 bit/s (for V.32)， 2400 bit/s， 1200 bit/s，300 bit/s， 直到 19.2 Kbit/s。 通讯率的调节使用 <code>nx=</code> (&#34;next table&#34;) 来实现。 每条线使用一个 <code>tc=</code> (&#34;table continuation&#34;) 的记录来加速对于一个特殊传输率的标准设置。</p>
</div>
<div class="paragraph">
<p>如果您有28.8 Kbit/s的modem，或您想使用它的 14.4Kbit/s 模式， 就需要使用一个更高的超过 19.2 Kbit/s 的通讯速度的 modem。 这是一个启动 57.6 Kbit/s 的 <span class="filename">gettytab</span> 记录的例子：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>#
# Additions for a V.32bis or V.34 Modem
# Starting at 57.6 Kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的 CPU 速度较低， 或系统的负荷很重， 而且没有 16550A 的串口，您可能会在57.6 Kbit/s 上得到 <code>sio</code> &#34;silo&#34;错误。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dialup-ttys">4.4.2. <span class="filename">/etc/ttys</span><a class="anchor" href="#dialup-ttys"></a></h4>
<div class="paragraph">
<p><span class="filename">/etc/ttys</span>文件的配置在 <a href="#ex-etc-ttys">在 <span class="filename">/etc/ttys</span> 中增加终端记录</a>中介绍过。 配置 modem 是相似的， 但我们必须指定一个不同的终端类型。 锁定速度和匹配速度配置的通用格式是：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ttyu0   &#34;/usr/libexec/getty xxx&#34;   dialup on</pre>
</div>
</div>
<div class="paragraph">
<p>上面的第一条是这个记录的设备特定文件 - <span class="filename">ttyu0</span> 表示 <span class="filename">/dev/ttyu0</span> 是这个 <code>getty</code> 将被监视的文件。 第二条 <code>&#34;/usr/libexec/getty xxx&#34;</code> 是将运行在设备上的进程 <code>init</code>。 第三条，dialup，是默认的终端类型。 第四个参数， <code>on</code>， 指出了线路是可操作的 <code>init</code>。 也可能会有第五个参数， <code>secure</code>， 但它将只被用作拥有物理安全的终端 (如系统终端)。</p>
</div>
<div class="paragraph">
<p>默认的终端类型可能依赖于本地参考。 拨号是传统的默认终端类型， 以至用户可以定制它们的登录脚本来注意终端什么时候拨号， 和自动调节它们的终端类型。 然而， 作者发现它很容易在它的站点上指定 <code>vt102</code> 作为默认的终端类型， 因为用户刚才在它们的远程系统上使用的是VT102模拟器。</p>
</div>
<div class="paragraph">
<p>您对<span class="filename">/etc/ttys</span>作修改之后，您可以发送 <code>init</code> 进程给一个 HUP 信号来重读文件。您可以使用下面的命令来发送信号：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># kill -HUP 1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果这是您的第一次设置系统， 您可能要在发信号 <code>init</code> 之前等一下， 等到您的 modem 正确地配置并连接好。</p>
</div>
<div class="sect4">
<h5 id="_锁定速度的配置_2">4.4.2.1. 锁定速度的配置<a class="anchor" href="#_锁定速度的配置_2"></a></h5>
<div class="paragraph">
<p>对于一个锁定速度的配置，您的 <span class="filename">ttys</span> 记录必须有一个为 <code>getty</code> 提供固定速度的记录。 对于一个速度被锁定在 19.2kbit/s 的 modem， <span class="filename">ttys</span> 记录是这样的：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ttyu0   &#34;/usr/libexec/getty std.19200&#34;   dialup on</pre>
</div>
</div>
<div class="paragraph">
<p>如果您的 modem 被锁定在一个不同的数据速度， 为 std.speed 使用适当的速度来代替 std.19200。 确信您使用了一个在 <span class="filename">/etc/gettytab</span> 中列出的正确的类型。</p>
</div>
</div>
<div class="sect4">
<h5 id="_匹配速度的设置">4.4.2.2. 匹配速度的设置<a class="anchor" href="#_匹配速度的设置"></a></h5>
<div class="paragraph">
<p>在一个匹配速度的设置中，您的 <span class="filename">ttys</span> 录需要参考在 <span class="filename">/etc/gettytab</span> 适当的起始 &#34;auto-baud&#34; 记录。 例如， 如果您为一个以 19.2 Kbit/s 开始的可匹配速度的 modem 添加上面建议的记录， 您的 <span class="filename">ttys</span> 记录可能是这样的：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ttyu0   &#34;/usr/libexec/getty V19200&#34;   dialup on</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_etcrc_dserial">4.4.3. <span class="filename">/etc/rc.d/serial</span><a class="anchor" href="#_etcrc_dserial"></a></h4>
<div class="paragraph">
<p>高速调制解调器， 如使用 V.32、 V.32bis， 以及 V.34 的那些， 需要使用硬件 (<code>RTS/CTS</code>) 流控制。 您可以在 <span class="filename">/etc/rc.d/serial</span> 中增加 <code>stty</code> 命令来在 FreeBSD 内核中， 为调制解调器设置硬件流控制标志。</p>
</div>
<div class="paragraph">
<p>例如， 在 1 号串口 (<span class="filename">COM2</span>) 拨入和拨出设备上配置 <code>termios</code> 标志 <code>crtscts</code>， 可以通过在 <span class="filename">/etc/rc.d/serial</span> 增加下面的设置来实现：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre># Serial port initial configuration
stty -f /dev/ttyu1.init crtscts
stty -f /dev/cuau1.init crtscts</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modem_设置">4.5. Modem 设置<a class="anchor" href="#_modem_设置"></a></h3>
<div class="paragraph">
<p>如果您有一个 modem， 它的参数能被存储在非易失性的 RAM 中， 您将必须使用一个终端程序来设置参数 （比如 MS-DOS® 下的 Telix 或者 FreeBSD 下的 <code>tip</code>）。 使用同样的通讯速度来连接 modem 作为初始速度 <code>getty</code> 将使用和配置 modem 的非易失性 RAM 来适应这些要求：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>连接时宣告 CD</p>
</li>
<li>
<p>操作时宣告 DTR； DTR 消失时挂断线路并复位调制解调器</p>
</li>
<li>
<p>CTS 传输数据流控制</p>
</li>
<li>
<p>禁用 XON/XOFF 流控制</p>
</li>
<li>
<p>RTS 接收数据流控制</p>
</li>
<li>
<p>宁静模式 (无返回码)</p>
</li>
<li>
<p>无命令回显</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>请阅读您 modem 的文档找到您需要用什么命令和 DIP 接口设置。</p>
</div>
<div class="paragraph">
<p>例如，要在一个 U.S. Robotics® Sportster® 14400 的外置 modem 上设置上面的参数，可以用下面这些命令：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre>
</div>
</div>
<div class="paragraph">
<p>您也可能想要在 modem 上寻找机会调节这个设置， 例如它是否使用 V.42bis 和 MNP5 压缩。</p>
</div>
<div class="paragraph">
<p>外置 modem 也有一些用来设置的 DIP 开关， 也许您可以使用这些设置作为一个例子：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch 1: UP - DTR Normal</p>
</li>
<li>
<p>Switch 2: N/A (Verbal Result Codes/Numeric Result Codes)</p>
</li>
<li>
<p>Switch 3: UP - Suppress Result Codes</p>
</li>
<li>
<p>Switch 4: DOWN - No echo, offline commands</p>
</li>
<li>
<p>Switch 5: UP - Auto Answer</p>
</li>
<li>
<p>Switch 6: UP - Carrier Detect Normal</p>
</li>
<li>
<p>Switch 7: UP - Load NVRAM Defaults</p>
</li>
<li>
<p>Switch 8: N/A (Smart Mode/Dumb Mode)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在拨号 modem 上的结果代码应该被 禁用/抑制， 以避免当 <code>getty</code> 在 modem 处于命令模式并回显输入时错误地给出 <code>login:</code> 提示时可能造成的问题。 这样可能导致 <code>getty</code> 与 modem 之间产生更长的不必要交互。</p>
</div>
<div class="sect3">
<h4 id="_锁定速度的配置_3">4.5.1. 锁定速度的配置<a class="anchor" href="#_锁定速度的配置_3"></a></h4>
<div class="paragraph">
<p>对于锁定速度的配置， 您需要配置 modem 来获得一个不依赖于通讯率的稳定的 modem到计算机 的传输率。 在一个 U.S. Robotics® Sportster® 14400 外置 modem 上， 这些命令将锁定 modem 到计算机 的传输率：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ATZ
AT&amp;B1&amp;W</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_匹配速度的配置_2">4.5.2. 匹配速度的配置<a class="anchor" href="#_匹配速度的配置_2"></a></h4>
<div class="paragraph">
<p>对于一个变速的配置， 您需要配置 modem 调节它的串口传输率匹配接收的传输率。 在一个 U.S. Robotics® Sportster® 14400 的外置 modem 上， 这些命令将锁定 modem 的错误修正传输率适合命令要求的速度， 但允许串口速度适应没有纠错的连接：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ATZ
AT&amp;B2&amp;W</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_检查modem的配置">4.5.3. 检查modem的配置<a class="anchor" href="#_检查modem的配置"></a></h4>
<div class="paragraph">
<p>大多数高速的modem提供了用来查看当前操作参数的命令。 在USR Sportster 14400外置modem上， 命令 <code>ATI5</code> 显示了存储在非易失性RAM中的设置。 要看看正确的 modem 操作参数， 可以使用命令 <code>ATZ</code> 然后是 <code>ATI4</code>。</p>
</div>
<div class="paragraph">
<p>如果您有一个不同牌子的 modem， 检查 modem 的使用手册看看如何双重检查您的 modem 的配置参数。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_问题解答">4.6. 问题解答<a class="anchor" href="#_问题解答"></a></h3>
<div class="paragraph">
<p>这儿是几个检查拨号modem的步骤。</p>
</div>
<div class="sect3">
<h4 id="_检查freebsd系统">4.6.1. 检查FreeBSD系统<a class="anchor" href="#_检查freebsd系统"></a></h4>
<div class="paragraph">
<p>把您的modem连接到FreeBSD系统， 启动系统， 然后， 如果您的 modem 有一个指示灯， 当登录时看看 modem 的 DTR 指示灯是否亮： 会在系统控制台出现命令行――如果它亮， 意味着 FreeBSD 已经在适当的通讯端口启动了一个 <code>getty</code> 进程， 等待 modem 接收一个呼叫。</p>
</div>
<div class="paragraph">
<p>如果DTR指示灯不亮， 通过控制台登录到 FreeBSD系统，然后执行一个 <code>ps ax</code> 命令来看 FreeBSD 是否正在正确的端口运行 <code>getty</code>进程。 您将在进程显示中看到像这样的一行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyu0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyu1</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您看到是这样的：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyu0</code></pre>
</div>
</div>
<div class="paragraph">
<p>modem 不接收呼叫， 这意味着 <code>getty</code> 已经在通讯端口打开了。 这可以指出线缆有问题或 modem 错误配置， 因为 <code>getty</code> 无法打开通讯端口。</p>
</div>
<div class="paragraph">
<p>如果您没有看到任何 <code>getty</code> 进程等待打开想要的 <span class="filename">ttyuN</span> 端口， 在 <span class="filename">/etc/ttys</span> 中双击您的记录看看那儿是否有错误。 另外，检查日志文件 <span class="filename">/var/log/messages</span> 看看是否有一些来自 <code>init</code> 或 <code>getty</code> 的问题日志。 如果有任何信息， 仔细检查配置文件 <span class="filename">/etc/ttys</span> 和 <span class="filename">/etc/gettytab</span>，还有相应的设备文件 <span class="filename">/dev/ttyuN</span>， 是否有错误，丢失记录，或丢失了设备指定文件。</p>
</div>
</div>
<div class="sect3">
<h4 id="_尝试接入try_dialing_in">4.6.2. 尝试接入Try Dialing In<a class="anchor" href="#_尝试接入try_dialing_in"></a></h4>
<div class="paragraph">
<p>设法拨入系统。 确信使用8位， 没有奇偶检验， 在远程系统上的1阻止位。 如果您不能立刻得到一个命令行， 试试每隔一秒按一下 <kbd>Enter</kbd>。 如果您仍没有看到一个登录： 设法发送一个 <code>BREAK</code>。 如果您正使用一个高速的 modem 来拨号， 请在锁定拨号 modem 的接口速度后再试试。</p>
</div>
<div class="paragraph">
<p>如果您不能得到一个登录：prompt，再检查一下 <span class="filename">/etc/gettytab</span>，重复检查：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>在<span class="filename">/etc/ttys</span> 中指定的初始可用的名称与 <span class="filename">/etc/gettytab</span> 的一个可用的相匹配。</p>
</li>
<li>
<p>每个 <code>nx=</code> 记录与另一个 <span class="filename">gettytab</span> 可用名称匹配。</p>
</li>
<li>
<p>每个 <code>tc=</code> 记录与另一个 <span class="filename">gettytab</span>可用名称相匹配。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果您拨号但 FreeBSD 系统上的 modem 没有回应， 确信 modem 能回应电话。 如果 modem 看起来配置正确了， 通过检查 modem 的指示灯来确认 DTR 线连接正确。</p>
</div>
<div class="paragraph">
<p>如果您做了好几次，它仍然无法工作，打断一会，等会再试试。 如果还不能工作， 也许您应该发一封电子邮件给 <a href="https://lists.FreeBSD.org/subscription/freebsd-questions">FreeBSD 一般问题邮件列表</a> 寻求帮助。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dialout">5. 拨出设备<a class="anchor" href="#dialout"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， 用于串口的设备节点从 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>； 从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户需要根据实际情况对这份文档中的例子进行必要的调整。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>下面将让您的主机通过 modem 连接到另一台计算机上。 这只要适当地建立一个终端作为远程主机就可以。</p>
</div>
<div class="paragraph">
<p>这可以用来登录进一个BBS。</p>
</div>
<div class="paragraph">
<p>如果您用 PPP 有问题， 那这种连接可以用来从 Internet 上下载一个文件。 如果您必须 FTP 一些东西， 而 PPP 断了， 使用终端会话来 FTP 它们。 然后使用 zmodem 来把它们传输到您的机器上。</p>
</div>
<div class="sect2">
<h3 id="hayes-unsupported">5.1. 我的Stock Hayes Modem不被支持，我该怎么办?<a class="anchor" href="#hayes-unsupported"></a></h3>
<div class="paragraph">
<p>事实上， 联机手册对于这个的描述已经过时了。 一个通用的 Hayes拨号已经内建其中。 只要在您的 <span class="filename">/etc/remote</span> 文件中使用 <code>at=hayes</code>。</p>
</div>
<div class="paragraph">
<p>Hayes 驱动不够 &#34;聪明&#34; 只能认出一些比较新的 modem 的高级特性 - 如 <code>BUSY</code>、 <code>NO DIALTONE</code>， 或 <code>CONNECT 115200</code> 的信息将被搞乱。 当您使用的时候， 您必须把这些信息关掉。(通过 <code>ATX0&amp;W</code>)。</p>
</div>
<div class="paragraph">
<p>另外，拨号的延迟是 60 秒。 您的 modem 可能使用另外的时间或提示认为有其他的通讯问题。 试试 <code>ATS7=45&amp;W</code>。</p>
</div>
</div>
<div class="sect2">
<h3 id="direct-at">5.2. 我如何输入这些 AT 命令?<a class="anchor" href="#direct-at"></a></h3>
<div class="paragraph">
<p>在 <span class="filename">/etc/remote</span> 文件中增加一个 &#34;direct&#34; 项。 举例而言， 如果您的调制解调器挂在第一个串口， 即 <span class="filename">/dev/cuau0</span> 上， 则应添加下面这行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>cuau0:dv=/dev/cuau0:br#19200:pa=none</pre>
</div>
</div>
<div class="paragraph">
<p>此处应使用您的 modem 所支持的最高 br bps 速率。 接下来， 输入 <code>tip cuau0</code> 就可以连到 modem 上了。</p>
</div>
<div class="paragraph">
<p>此外， 也可以 <code>root</code> 身份执行 <code>cu</code> 命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cu -lline -sspeed</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><em>line</em> 是串口 (例如 <span class="filename">/dev/cuau0</span>) 而 <em>speed</em> 则是速率 (如 <code>57600</code>)。 当您输入完 AT 之后， 按 <code>~.</code> 即可退出。</p>
</div>
</div>
<div class="sect2">
<h3 id="gt-failure">5.3. 现在pn <code>@</code>标记不能工作？<a class="anchor" href="#gt-failure"></a></h3>
<div class="paragraph">
<p>在电话号码中的 <code>@</code> 标记告诉计算机在 <span class="filename">/etc/phones</span> 文件中查找一个电话号码。 但 <code>@</code> 标记也是一个在像 <span class="filename">/etc/remote</span> 这样的可用文件中的特殊字符。 用一个反斜线符号退出：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>pn=\@</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dial-command-line">5.4. 我如何在命令行拨电话号码?<a class="anchor" href="#dial-command-line"></a></h3>
<div class="paragraph">
<p>在您的 <span class="filename">/etc/remote</span> 文件中通常放着一个叫做 &#34;generic&#34; 的记录。 例如：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>tip115200|Dial any phone number at 115200 bps:\
        :dv=/dev/cuau0:br#115200:at=hayes:pa=none:du:
tip57600|Dial any phone number at 57600 bps:\
        :dv=/dev/cuau0:br#57600:at=hayes:pa=none:du:</pre>
</div>
</div>
<div class="paragraph">
<p>然后， 可以执行：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># tip -115200 5551234</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您更喜欢<code>cu</code>而不是<code>tip</code>，使用一个通用的<code>cu</code>记录：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>cu115200|Use cu to dial any number at 115200bps:\
        :dv=/dev/cuau1:br#57600:at=hayes:pa=none:du:</pre>
</div>
</div>
<div class="paragraph">
<p>然后键入：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cu 5551234 -s 115200</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="set-bps">5.5. 这么做时是否每次都需要重新输入 bps 速率?<a class="anchor" href="#set-bps"></a></h3>
<div class="paragraph">
<p>添加一项 <code>tip1200</code> 或 <code>cu1200</code>， 并将 bps 速率换成更合适的值。 <code>tip</code> 的默认值是1200 bps， 也就是为什么会有 <code>tip1200</code> 这条记录的原因。 虽然您并不需要使用 1200 bps。</p>
</div>
</div>
<div class="sect2">
<h3 id="terminal-server">5.6. 我通过一个终端服务器访问了很多主机。<a class="anchor" href="#terminal-server"></a></h3>
<div class="paragraph">
<p>除非每次都要等到您连接到主机然后键入 <code>CONNECT host</code>， 否则使用 <code>tip</code> 的 <code>cm</code> 功能。 例如， 在 <span class="filename">/etc/remote</span> 中的这些记录：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>pain|pain.deep13.com|Forrester&#39;s machine:\
        :cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank&#39;s machine:\
        :cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
        :dv=/dev/cuau2:br#38400:at=hayes:du:pa=none:pn=5551234:</pre>
</div>
</div>
<div class="paragraph">
<p>将让您键入 <code>tip pain</code> 或 <code>tip muffin</code> 连接到主机 <code>pain</code> 或 <code>muffin</code>， 和 <code>tip deep13</code> 连接到终端服务器。</p>
</div>
</div>
<div class="sect2">
<h3 id="tip-multiline">5.7. <code>tip</code>能为每个站点试用多个线路吗？<a class="anchor" href="#tip-multiline"></a></h3>
<div class="paragraph">
<p>经常有一个问题， 一个大学有几个modem线路， 几千个学生设法使用它们。</p>
</div>
<div class="paragraph">
<p>在 <span class="filename">/etc/remote</span> 中为您的大学添加一个记录， 然后为 <code>pn</code> 功能使用 <code>@</code> 标记：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>big-university:\
        :pn=\@:tc=dialout
dialout:\
        :dv=/dev/cuau3:br#9600:at=courier:du:pa=none:</pre>
</div>
</div>
<div class="paragraph">
<p>接着， 在 <span class="filename">/etc/phones</span> 中列出大学的电话号码：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114</pre>
</div>
</div>
<div class="paragraph">
<p><code>tip</code> 将按顺序试用每一个，然后就停止。 如果想继续测试， 隔一段时间再运行 <code>tip</code>。</p>
</div>
</div>
<div class="sect2">
<h3 id="multi-controlp">5.8. 为什么我必须键入 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>P</kbd></span> 两次才能发出 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>P</kbd></span> 一次?<a class="anchor" href="#multi-controlp"></a></h3>
<div class="paragraph">
<p><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>P</kbd></span> 是默认的&#34;强制&#34;字符，被用来告诉 <code>tip</code> 下一个字符是文字的数据。您可以用 <code>~s</code> 给任何其他的字符设置强制字符，这意思是 &#34;设置一个变量&#34;。</p>
</div>
<div class="paragraph">
<p>在新的一行键入 <code>~sforce=single-char</code>。 <em>single-char</em> 是任何简单的字符。 如果您遗漏了 <em>single-char</em>， 那强制字符就是空字符， 这可以键入 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>2</kbd></span> 或 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Space</kbd></span>来完成。 更好的 <em>single-char</em> 是 <span class="keyseq"><kbd>Shift</kbd>+<kbd>Ctrl</kbd>+<kbd>6</kbd></span>， 这只用在一些终端服务器上。</p>
</div>
<div class="paragraph">
<p>通过在您的 <span class="filename">$HOME/.tiprc</span> 文件中指定下面这行， 就可以得到您想要的任何强制字符：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>force=single-char</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="uppercase">5.9. 突然我键入的每一样东西都变成了大写??<a class="anchor" href="#uppercase"></a></h3>
<div class="paragraph">
<p>您一定是键入了 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>A</kbd></span>， 即 <code>tip</code> 的 &#34;raise character&#34;， 会临时地指定成坏掉的 caps-lock键。 使用上面的 <code>~s</code> 来合理地设置各种 <code>raisechar</code>。 事实上， 如果您不想使用这些特性的话，您可以用同样的方法设置强制字符。</p>
</div>
<div class="paragraph">
<p>这儿有一个很好的示例 <span class="filename">.tiprc 文件</span>，对 Emacs用户来说，需要经常按 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>2</kbd></span> 和 <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>A</kbd></span>：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>force=^^
raisechar=^^</pre>
</div>
</div>
<div class="paragraph">
<p><code>^^</code> 是 <span class="keyseq"><kbd>Shift</kbd>+<kbd>Ctrl</kbd>+<kbd>6</kbd></span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="tip-filetransfer">5.10. 如何用 <code>tip</code> 做文件传输？<a class="anchor" href="#tip-filetransfer"></a></h3>
<div class="paragraph">
<p>如果您正在与另一台 UNIX® 系统对话， 您可以用 <code>~p</code>(put) 和 <code>~t</code> (take) 发送和接收文件。 这些命令可以在远程系统上运行 <code>cat</code> 和 <code>echo</code> 来接收和发送文件。 语法是这样的：</p>
</div>
<div class="paragraph">
<p><code>~p</code> local-file [ remote-file ]</p>
</div>
<div class="paragraph">
<p><code>~t</code> remote-file [ local-file ]</p>
</div>
<div class="paragraph">
<p>由于没有错误校验， 所以您需要使用其他协议， 如 zmodem。</p>
</div>
</div>
<div class="sect2">
<h3 id="zmodem-tip">5.11. 我如何用<code>tip</code>运行zmodem？<a class="anchor" href="#zmodem-tip"></a></h3>
<div class="paragraph">
<p>要接收这些文件，可以在远程终端启动发送程序。然后，键入 <code>~C rz</code> 在本地开始接收它们。 要发送文件， 可以在远程终端启动接收程序。 然后， 键入 <code>~C sz files</code> 把它们发送到远程系统。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serialconsole-setup">6. 设置串口控制台<a class="anchor" href="#serialconsole-setup"></a></h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>从 FreeBSD 8.0 开始， 用于串口的设备节点从 <span class="filename">/dev/cuadN</span> 改为了 <span class="filename">/dev/cuauN</span>； 从 <span class="filename">/dev/ttydN</span> 改为了 <span class="filename">/dev/ttyuN</span>。 FreeBSD 7.X 用户需要根据实际情况对这份文档中的例子进行必要的调整。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="serialconsole-intro">6.1. 介绍<a class="anchor" href="#serialconsole-intro"></a></h3>
<div class="paragraph">
<p>FreeBSD可以通过一个串口只使用一个哑 (dumb) 终端就可以启动一个系统。 这样一种配置只有两种人能使用： 希望在机器上安装 FreeBSD 的系统管理员， 他没有键盘或显示器， 还有就是要调试内核或设备驱动程序的开发人员。</p>
</div>
<div class="paragraph">
<p>就象 crossref:boot[boot,FreeBSD 引导过程] 描述的， FreeBSD 采用一个三步的启动过程。 最先两步储存在 FreeBSD 启动磁盘的启动 slice 的启动代码块中。 引导块然后就被加载， 接着运行第三步启动引导器 (<span class="filename">/boot/loader</span>)。</p>
</div>
<div class="paragraph">
<p>为了设置串口控制台， 您必须配置启动代码块， 启动引导器代码和内核。</p>
</div>
</div>
<div class="sect2">
<h3 id="serialconsole-howto-fast">6.2. 串口控制台的配置， 简明版<a class="anchor" href="#serialconsole-howto-fast"></a></h3>
<div class="paragraph">
<p>这一节假定您使用默认的配置， 只希望迅速地获得关于配置串口控制台的概览。</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>使用串口电缆连接 <span class="filename">COM1</span> 和控制终端。</p>
</li>
<li>
<p>要在串口控制台上显示所有的引导信息， 需要以超级用户的身份执行下面的命令：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># echo &#39;console=&#34;comconsole&#34;&#39; &gt;&gt; /boot/loader.conf</span></code></pre>
</div>
</div>
</li>
<li>
<p>编辑 <span class="filename">/etc/ttys</span> 并把 <span class="filename">ttyu0</span> 的 <code>off</code> 改为 <code>on</code>， <code>dialup</code> 改为 <code>vt100</code>。 否则通过串口控制台上将不会提示输入口令， 从而导致潜在的安全漏洞。</p>
</li>
<li>
<p>重新启动并观察是否生效。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>如果需要不同的配置， 更进一步的配置讨论可以在 <a href="#serialconsole-howto">串口控制台的设置</a> 找到。</p>
</div>
</div>
<div class="sect2">
<h3 id="serialconsole-howto">6.3. 串口控制台的设置<a class="anchor" href="#serialconsole-howto"></a></h3>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>准备一根串口线缆。</p>
<div class="paragraph">
<p>您需要使用一个 null-modem 的线缆或标准的串口线和一个 null-modem 适配器。 请参考 <a href="#serial-cables-ports">线缆和端口</a> 中有关串口线的讨论。</p>
</div>
</li>
<li>
<p>拔掉键盘。</p>
<div class="paragraph">
<p>绝大多数的PC在开机检测的时候会检测到键盘， 如果没有检测到键盘， 则会出现错误。 一些机器会提示缺少键盘， 就不会继续引导系统。</p>
</div>
<div class="paragraph">
<p>如果您的计算机出现错误， 但仍能继续启动， 您可以不必理它。</p>
</div>
<div class="paragraph">
<p>如果您的计算机没有键盘拒绝启动， 那您需要配置 BIOS 来避免它。 请参考您的主板的使用说明了解更多细节。</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>在 BIOS 中将键盘设为 &#34;Not installed&#34; (未安装)。 现在您仍然无法使用键盘。 这样做只是告诉 BIOS 在启动时不要探测键盘。 您的 BIOS 不应抱怨键盘不存在。 即使这一标志设置为 &#34;Not installed&#34; 时， 只要把键盘插上， 它就仍可使用。 如果以上的选项不存在于 BIOS 中， 可尝试寻找 &#34;Halt on Error&#34; 选项。 把这一项设置为 &#34;All but Keyboard&#34; 或者是 &#34;No Errors&#34;， 都能器到相同的作用。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果系统有 PS/2 鼠标， 如果幸运的话， 您也可以象键盘一样把它拔下来， 这是因为 PS/2 鼠标与键盘的一些硬件是共享的， 您的鼠标插上去， 系统会认为键盘仍在那儿。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>插一个哑 (dumb) 终端到<span class="filename">COM1</span>：（<span class="filename">sio0</span>）。</p>
<div class="paragraph">
<p>如果您没有哑终端， 可以使用一个比较老的带有一个 modem 程序的PC/XT机器， 或在其他 UNIX® 机器上的串口。 如果您没有 <span class="filename">COM1</span>： (<span class="filename">sio0</span>)， 去找一个。 这时， 您就不能只能选择 <span class="filename">COM1</span>：来启动系统。 如果您已经在另一台设备上使用 <span class="filename">COM1</span>， 您必须临时删除那个设备， 然后安装一个新的系统引导块和内核。</p>
</div>
</li>
<li>
<p>确信您的内核配置文件已经为 <span class="filename">COM1</span>： (<span class="filename">sio0</span>) 设置了适当的标记：</p>
<div class="paragraph">
<p>有关的标记是：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>0x10</code></dt>
<dd>
<p>启用控制台支持。 如果没有设置它， 则其他的控制台标记都会被忽略。 现在， 绝大多数的设置都有控制台的支持。 这个标记的第一个就是首选的。 这个单独选项是不能确保串口适用于控制台的， 设置下面的标记或加上下面描述的 <code>-h</code> 选项， 和这个放在一起。</p>
</dd>
<dt class="hdlist1"><code>0x20</code></dt>
<dd>
<p>无论是否使用了下面将要讨论的 <code>-h</code> 选项， 都强制这个单元作为控制台 (除非使用了更高优先级的控制台)。 标志 <code>0x20</code> 必须与 <code>0x10</code> 一起使用。</p>
</dd>
<dt class="hdlist1"><code>0x40</code></dt>
<dd>
<p>预留这个单元 (配合 <code>0x10</code>) 并让它不能用于普通的使用。 您不应在希望作为控制台的串口单元上设置这个标志。 这一标志是为内核远程调试准备的。 参见 extref:https://docs.freebsd.org/en/books/developers-handbook/[开发者手册] 以了解关于远程调试更进一步的情况。</p>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device sio0 flags 0x10</pre>
</div>
</div>
<div class="paragraph">
<p>看看 man:sio[4] 的联机手册了解更多信息。</p>
</div>
<div class="paragraph">
<p>如果标记没有被设置， 您必须运行UserConfig或重新编译内核。</p>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>在启动磁盘的 <code>a</code> 分区的根目录创建 <span class="filename">boot.config</span> 文件。</p>
<div class="paragraph">
<p>这个文件将指导引导块代码如何启动系统。 为了激活串口控制台， 您必须有一个或多个下面的选项――如果您要多个选项， 在同一行必须都包含它们：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-h</code></dt>
<dd>
<p>切换内部和串口控制台。 您使用这个来交换控制台设备。 例如， 如果您从内部控制台启动， 您可以使用 <code>-h</code> 来直接使用启动引导器和内核来使用串口作为它的控制台设备。 另外， 如果您从串口启动， 您可以使用 <code>-h</code> 来告诉启动引导器和内核使用显示设备作为控制台。</p>
</dd>
<dt class="hdlist1"><code>-D</code></dt>
<dd>
<p>切换单一和双重控制台配置。 在单一配置中， 控制台将是本机的控制台 (显示设备) 或串口。 在双重控制台配置中， 显示设备和串口将同时成为控制台， 无论 <code>-h</code> 的选项的情形。 然而， 双控制台配置只在引导块运行的过程中起作用。 一旦启动引导器获得控制， 由 <code>-h</code> 选项指定的控制台将成为唯一的控制台。</p>
</dd>
<dt class="hdlist1"><code>-P</code></dt>
<dd>
<p>在启动时，探测键盘。如果键盘找不到， <code>-D</code> 和 <code>-h</code> 选项会自动设置。</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>由于当前版本引导块的空间限制， <code>-P</code> 选项只能探测扩展的键盘。 少于101键的键盘将无法被探测到。 如果您碰到这个情况， 您必须避免使用 <code>-P</code> 选项。 目前还没有绕过这个问题的办法。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>使用 <code>-P</code> 选项来自动选择控制台， 或使用 <code>-h</code> 选项来激活控制台。</p>
</div>
<div class="paragraph">
<p>您也可以使用boot联机文档中所描述的其他选项。</p>
</div>
<div class="paragraph">
<p>除了 <code>-P</code> 选项， 所有选项将被传给启动引导器 (<span class="filename">/boot/loader</span>)。 启动引导器将通过检查 <code>-h</code> 选项的状态来决定是显示设备成为控制台， 还是串口成为控制台。 这表示如果您指定 <code>-D</code> 选项， 但在 <span class="filename">/boot.config</span> 中没有 <code>-h</code> 选项， 您在启动代码块时使用串口作为控制台。 启动引导器将使用内部显示设备作为控制台。</p>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>启动机器</p>
<div class="paragraph">
<p>当您启动您的FreeBSD时，引导块将把 <span class="filename">/boot.config</span> 的内容发给控制台。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">/boot.config: <span class="nt">-P</span>
Keyboard: no</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您把 <code>-P</code> 放在 <span class="filename">/boot.config</span> 中并指出键盘存在或不存在， 那将只出现第二行。 这些信息会被定位到串口或内部控制台， 或两者同时， 这完全取决于 <span class="filename">/boot.config</span> 中的选项。</p>
</div>
<table class="tableblock frame-none grid-all stretch informaltable">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">选项</th>
<th class="tableblock halign-left valign-top">送出消息的设备</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部控制台</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口控制台</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口控制台和内部控制台</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-Dh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口控制台和内部控制台</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-P</code>， 有键盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部控制台</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-P</code>， 无键盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口控制台</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>出现上面信息后， 在引导块加载启动引导器和更多信息被映到屏幕之前将有一个小小的停顿。 在通常情况下，您不需要打断启动进程， 但为了确信设置是否正确，您也可以这样做。</p>
</div>
<div class="paragraph">
<p>在控制台上按 <kbd>Enter</kbd> 以外的任意键就能打断启动进程。 引导块将进入命令行模式。 您将看到：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="o">&gt;&gt;</span> FreeBSD/i386 BOOT
Default: 0:ad<span class="o">(</span>0,a<span class="o">)</span>/boot/loader
boot:</code></pre>
</div>
</div>
<div class="paragraph">
<p>检验上面出现的信息， 可能是串口， 或内部控制台， 或两个同时， 完全取决于您在 <span class="filename">/boot.config</span> 中的选项。 如果信息出现在正确的控制台， 按 <kbd>Enter</kbd> 继续启动进程。</p>
</div>
<div class="paragraph">
<p>如果您要使用串口控制台， 但您没有看到命令行， 那可能设置有问题。 这时， 输入 <code>-h</code> 然后按 <kbd>Enter</kbd> 或 <kbd>Return</kbd> 来告诉引导块 (然后是启动引导器和内核) 选择串口作为控制台。 一旦系统起来了， 就可以回去检查一下是什么出了问题。</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>启动引导器加载完后， 您将进入启动进程的第三步， 您仍然可以在启动引导器通过设定您喜欢的环境来切换内部控制台和串口控制台。 参考 <a href="#serialconsole-loader">从启动引导器修改控制台</a>。</p>
</div>
</div>
<div class="sect2">
<h3 id="serialconsole-summary">6.4. 摘要<a class="anchor" href="#serialconsole-summary"></a></h3>
<div class="paragraph">
<p>这是几个在这章要讨论的几个设置和选择的控制台的摘要。</p>
</div>
<div class="sect3">
<h4 id="_例1_您为_sio0_设置标记_0x10">6.4.1. 例1： 您为 <span class="filename">sio0</span> 设置标记 0x10<a class="anchor" href="#_例1_您为_sio0_设置标记_0x10"></a></h4>
<div class="literalblock programlisting">
<div class="content">
<pre>device sio0 flags 0x10</pre>
</div>
</div>
<table class="tableblock frame-none grid-all stretch informaltable">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">在 /boot.config 中的选项</th>
<th class="tableblock halign-left valign-top">引导块执行时所用的控制台</th>
<th class="tableblock halign-left valign-top">引导加载器执行时所用的控制台</th>
<th class="tableblock halign-left valign-top">内核所用的控制台</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">无</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口和内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-Dh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口和内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-P</code>， 有键盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-P</code>， 没有键盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口和内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_例2您为_sio0_设置标记为_0x30">6.4.2. 例2：您为 <span class="filename">sio0</span> 设置标记为 0x30<a class="anchor" href="#_例2您为_sio0_设置标记为_0x30"></a></h4>
<div class="literalblock programlisting">
<div class="content">
<pre>device sio0 flags 0x30</pre>
</div>
</div>
<table class="tableblock frame-none grid-all stretch informaltable">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">在 /boot.config 中的选项</th>
<th class="tableblock halign-left valign-top">引导块执行时所用的控制台</th>
<th class="tableblock halign-left valign-top">引导加载器执行时所用的控制台</th>
<th class="tableblock halign-left valign-top">内核所用的控制台</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">无</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-h</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口和内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-Dh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口和内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-P</code>， 有键盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-P</code>， 没有键盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口和内部</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">串口</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="serialconsole-tips">6.5. 串口控制台的提示<a class="anchor" href="#serialconsole-tips"></a></h3>
<div class="sect3">
<h4 id="_设置更高的串口速度">6.5.1. 设置更高的串口速度<a class="anchor" href="#_设置更高的串口速度"></a></h4>
<div class="paragraph">
<p>在默认配置中， 串口的设置是： 速率 9600 波特、 8 数据位、 无奇偶校验位、 1 停止位。 如果您希望修改默认的控制台速率， 可以采用下列几种方法之一：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>将 <code>BOOT_COMCONSOLE_SPEED</code> 配置为希望的速率， 并重新编译引导块。 请参见 <a href="#serialconsole-com2">使用 <span class="filename">sio0</span> 以外的串口 作为控制台</a> 以了解如何联编和安装新的引导块。</p>
<div class="paragraph">
<p>如果串口控制台已配置为使用 <code>-h</code> 以外的其它方式引导， 或者内核使用的速率与引导块不同， 则必需在内核配置文件中加入下述设置， 并重新联编新内核：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>options CONSPEED=19200</pre>
</div>
</div>
</li>
<li>
<p>使用内核引导选项 <code>-S</code>. <code>-S</code> 这个命令行选项可以加到 <span class="filename">/boot.config</span> 中。 请参见联机手册 man:boot[8] 以获得如何在 <span class="filename">/boot.config</span> 中增加选项， 以及其它的可用选项。</p>
</li>
<li>
<p>在您的 <span class="filename">/boot/loader.conf</span> 文件中启用 <code>comconsole_speed</code> 选项。</p>
<div class="paragraph">
<p>使用这个选项时，您还需要在 <span class="filename">/boot/loader.conf</span> 中配置 <code>console</code>、 <code>boot_serial</code>， 以及 <code>boot_multicons</code>。 下面是一个利用 <code>comconsole_speed</code> 改变串口控制台速率的例子：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>boot_multicons=&#34;YES&#34;
boot_serial=&#34;YES&#34;
comconsole_speed=&#34;115200&#34;
console=&#34;comconsole,vidconsole&#34;</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="serialconsole-com2">6.5.2. 使用 <span class="filename">sio0</span> 以外的串口 作为控制台<a class="anchor" href="#serialconsole-com2"></a></h4>
<div class="paragraph">
<p>使用串口而不是 <span class="filename">sio0</span> 作为控制台需要做一些重编译。 如果您无论如何都要使用另一个串口， 重新编译引导块， 启动引导器和内核。</p>
</div>
<div class="exampleblock procedure">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>取得内核源代码 (参考 crossref:cutting-edge[updating-upgrading,更新与升级 FreeBSD])。</p>
</li>
<li>
<p>编辑 <span class="filename">/etc/make.conf</span> 文件， 然后设置 <code>BOOT_COMCONSOLE_PORT</code>作为您要使用 (<code>0x3f8</code>、 <code>0x2f8</code>、 0x3E8 或 0x2E8) 端口的地址。 只有 <span class="filename">sio0</span> 到 <span class="filename">sio3</span> (<span class="filename">COM1</span> 到 <span class="filename">COM4</span>) 都可以使用； 但多口串口卡将不会工作。 不需要任何中断设置。</p>
</li>
<li>
<p>创建一个定制的内核配置文件， 在您要使用的串口添加合适的标记。 例如， 如果要将 <span class="filename">sio1</span> (<span class="filename">COM2</span>) 作为控制台：</p>
<div class="literalblock programlisting">
<div class="content">
<pre>device sio1 flags 0x10</pre>
</div>
</div>
<div class="paragraph">
<p>或</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>device sio1 flags 0x30</pre>
</div>
</div>
<div class="paragraph">
<p>其他端口的控制台标记也不要设。</p>
</div>
</li>
<li>
<p>重新编译和安装引导块：</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># cd /sys/boot</span>
<span class="c"># make clean</span>
<span class="c"># make</span>
<span class="c"># make install</span></code></pre>
</div>
</div>
</li>
<li>
<p>重建和安装内核。</p>
</li>
<li>
<p>用 man:bsdlabel[8] 将引导块写到启动盘上，然后从新内核启动。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="serialconsole-ddb">6.5.3. 通过串口线进入DDB调试器<a class="anchor" href="#serialconsole-ddb"></a></h4>
<div class="literalblock programlisting">
<div class="content">
<pre>options BREAK_TO_DEBUGGER
options DDB</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_在串口控制台上得到一个登录命令行">6.5.4. 在串口控制台上得到一个登录命令行<a class="anchor" href="#_在串口控制台上得到一个登录命令行"></a></h4>
<div class="paragraph">
<p>您可能希望通过串口线进入登录提示， 现在您可以看到启动信息， 通过串口控制台键入内核调试信息。可以这样做。</p>
</div>
<div class="paragraph">
<p>用一个编辑器打开 <span class="filename">/etc/ttys</span> 文件， 然后找到下面的行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>ttyu0 &#34;/usr/libexec/getty std.9600&#34; unknown off secure
ttyu1 &#34;/usr/libexec/getty std.9600&#34; unknown off secure
ttyu2 &#34;/usr/libexec/getty std.9600&#34; unknown off secure
ttyu3 &#34;/usr/libexec/getty std.9600&#34; unknown off secure</pre>
</div>
</div>
<div class="paragraph">
<p><span class="filename">ttyu0</span> 到 <span class="filename">ttyu3</span> 相当于 <span class="filename">COM1</span> 到 <span class="filename">COM4</span>。 可以打开或关闭某个端口。 如果您已经改变了串口的速度， 还必须改掉标准的 <code>9600</code> 与当前的例如 <code>19200</code> 相匹配。</p>
</div>
<div class="paragraph">
<p>您也可以改变终端的类型从不知名的到您串口终端的真实类型。 编辑完这个文件， 您必须 <code>kill -HUP 1</code> 来使这个修改生效。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="serialconsole-loader">6.6. 从启动引导器修改控制台<a class="anchor" href="#serialconsole-loader"></a></h3>
<div class="paragraph">
<p>前面一节描述了如何通过调整引导块来设定串口控制台。 这节将讲到在启动引导器中通过键入一些命令和环境变量来指定控制台。 由于启动引导器会被启动进程的第三步所调用， 引导块以后， 在启动引导器中的设置将忽略在引导块中的设置。</p>
</div>
<div class="sect3">
<h4 id="_配置串口控制台">6.6.1. 配置串口控制台<a class="anchor" href="#_配置串口控制台"></a></h4>
<div class="paragraph">
<p>您可以很容易地指定启动引导器和内核来使用串口控制台， 只需要在 <span class="filename">/boot/loader.ronf</span>中写入下面这行：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>console=&#34;comconsole&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>无论前一节中的引导块如何配置， 这个设置都会生效。</p>
</div>
<div class="paragraph">
<p>您最好把上面一行放在 <span class="filename">/boot/loader.conf</span> 文件的第一行，以便尽早地在启动时看到串口控制台的启动信息。</p>
</div>
<div class="paragraph">
<p>同样地，您可以指定内部控制台为：</p>
</div>
<div class="literalblock programlisting">
<div class="content">
<pre>console=&#34;vidconsole&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>如果您不设置启动引导环境变量控制台， 启动引导器和内核将使用在引导块时用 <code>-h</code> 选项指定的控制台。</p>
</div>
<div class="paragraph">
<p>控制台可以在 <span class="filename">/boot/loader.conf.local</span> 或者是在 <span class="filename">/boot/loader.conf</span> 中指定。</p>
</div>
<div class="paragraph">
<p>看看 man:loader.conf[5] 的联机手册了解更多信息。</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>目前， 引导块尚不提供与引导加载器的 <code>-P</code> 选项等价的选项， 另外， 它也不能根据是否有键盘存在自动决定选择使用内部控制台还是串口控制台。</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_使用串口而不是sio0作为控制台">6.6.2. 使用串口而不是<span class="filename">sio0</span>作为控制台<a class="anchor" href="#_使用串口而不是sio0作为控制台"></a></h4>
<div class="paragraph">
<p>要使用一个串口而不是 <span class="filename">sio0</span> 作为串口控制台 需要重新编译启动引导器。下面的步骤跟 <a href="#serialconsole-com2">使用 <span class="filename">sio0</span> 以外的串口 作为控制台</a> 描述的相似。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="serialconsole-caveats">6.7. 警告<a class="anchor" href="#serialconsole-caveats"></a></h3>
<div class="paragraph">
<p>这篇文章本意是想告诉人们如何设定没有显示设备或键盘的专用服务器。 不幸的是， 绝大多数系统没有键盘可以让您启动， 而没有显示设备就不让您启动。 使用 AMI BIOS 的机器可以通过在 CMOS 中将 &#34;graphics adapter&#34; 项设为 &#34;Not installed&#34; 来在启动时不要求显示适配器。</p>
</div>
<div class="paragraph">
<p>然而， 许多机器并不支持这个选项， 如果您的系统没有显示硬件就拒绝启动。 对于这些机器， 即使您没有显示器， 也必须在机器上插上显示适配器。 建议您试试采用 AMI BIOS 的机器。</p>
</div>
</div>
</div>
</div>

    </div>
    
    <div class="buttons">
      
      <div class="prev">
        <i class="fa fa-angle-left" aria-hidden="true" title="Prev"></i>
        <div class="container">
          
            <a href=http://127.0.0.1:5500/zh-cn/books/handbook/partiv class="direction">Prev</a>
          
        </div>
      </div>
      
      <div class="home">
        <i class="fa fa-home" aria-hidden="true" title="Home"></i>
        <div class="container">
          
            <a href="../" class="direction">Home</a>
          
        </div>
      </div>
      
      <div class="next">
        <div class="container">
          
            <a href=http://127.0.0.1:5500/zh-cn/books/handbook/ppp-and-slip  class="direction">Next</a>
          
        </div>
        <i class="fa fa-angle-right" aria-hidden="true" title="Next"></i>
      </div>
      
    </div>
    <label class="hidden book-menu-overlay" for="menu-control"></label>
  </div>
  <aside class="toc">
    <div class="toc-content">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#serial-synopsis">1. 概述</a></li>
    <li><a href="#serial">2. 介绍</a></li>
    <li><a href="#term">3. 终端</a></li>
    <li><a href="#dialup">4. 拨入服务</a></li>
    <li><a href="#dialout">5. 拨出设备</a></li>
    <li><a href="#serialconsole-setup">6. 设置串口控制台</a></li>
  </ul>
</nav>
      <hr />
      
    </div>
  </aside>
  <a class="to-top" href="#top">
    <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
  </a>
</main>

    <footer>
  <div class="footer-container">
    <section class="logo-column">
          <img src="/images/FreeBSD-colors.svg" width="160" height="50" alt="FreeBSD logo" />
        <div class="options-container">
          
            <div class="language-container">
              <a id="languages" href="http://127.0.0.1:5500/zh-cn/languages">
                
                <img src="/images/language.png" class="language-image" alt="Choose language">
                <span>简体中文</span>
              </a>
            </div>
          
          <div class="theme-container">
            <select id="theme-chooser">
	      <option value="theme-system">System</option>
              <option value="theme-light">Light</option>
              <option value="theme-dark">Dark</option>
              <option value="theme-high-contrast">High contrast</option>
            </select>
          </div>
        </div>
      </section>
      
      <section class="copyright-column">
        <p>&copy; 1994-2023 The FreeBSD Project. All rights reserved</p>
        <span>Made with <span class="heart">♥</span> by the FreeBSD Community</span>
      </section>
  </div>
</footer>

  </body>
</html>
